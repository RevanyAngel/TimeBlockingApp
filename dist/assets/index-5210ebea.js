(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function c0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d0={exports:{}},lc={},h0={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ba=Symbol.for("react.element"),AS=Symbol.for("react.portal"),CS=Symbol.for("react.fragment"),RS=Symbol.for("react.strict_mode"),PS=Symbol.for("react.profiler"),bS=Symbol.for("react.provider"),xS=Symbol.for("react.context"),kS=Symbol.for("react.forward_ref"),DS=Symbol.for("react.suspense"),NS=Symbol.for("react.memo"),OS=Symbol.for("react.lazy"),$g=Symbol.iterator;function VS(t){return t===null||typeof t!="object"?null:(t=$g&&t[$g]||t["@@iterator"],typeof t=="function"?t:null)}var f0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p0=Object.assign,m0={};function Fs(t,e,n){this.props=t,this.context=e,this.refs=m0,this.updater=n||f0}Fs.prototype.isReactComponent={};Fs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function g0(){}g0.prototype=Fs.prototype;function Uf(t,e,n){this.props=t,this.context=e,this.refs=m0,this.updater=n||f0}var Bf=Uf.prototype=new g0;Bf.constructor=Uf;p0(Bf,Fs.prototype);Bf.isPureReactComponent=!0;var zg=Array.isArray,y0=Object.prototype.hasOwnProperty,jf={current:null},v0={key:!0,ref:!0,__self:!0,__source:!0};function _0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)y0.call(e,r)&&!v0.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ba,type:t,key:s,ref:o,props:i,_owner:jf.current}}function LS(t,e){return{$$typeof:ba,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $f(t){return typeof t=="object"&&t!==null&&t.$$typeof===ba}function MS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Wg=/\/+/g;function fd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MS(""+t.key):e.toString(36)}function jl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ba:case AS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+fd(o,0):r,zg(i)?(n="",t!=null&&(n=t.replace(Wg,"$&/")+"/"),jl(i,e,n,"",function(c){return c})):i!=null&&($f(i)&&(i=LS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Wg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",zg(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+fd(s,l);o+=jl(s,e,n,u,i)}else if(u=VS(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+fd(s,l++),o+=jl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fl(t,e,n){if(t==null)return t;var r=[],i=0;return jl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function FS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dt={current:null},$l={transition:null},US={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:$l,ReactCurrentOwner:jf};function w0(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:fl,forEach:function(t,e,n){fl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fl(t,function(){e++}),e},toArray:function(t){return fl(t,function(e){return e})||[]},only:function(t){if(!$f(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Fs;se.Fragment=CS;se.Profiler=PS;se.PureComponent=Uf;se.StrictMode=RS;se.Suspense=DS;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=US;se.act=w0;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=p0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=jf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)y0.call(e,u)&&!v0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:ba,type:t.type,key:i,ref:s,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:xS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bS,_context:t},t.Consumer=t};se.createElement=_0;se.createFactory=function(t){var e=_0.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:kS,render:t}};se.isValidElement=$f;se.lazy=function(t){return{$$typeof:OS,_payload:{_status:-1,_result:t},_init:FS}};se.memo=function(t,e){return{$$typeof:NS,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=$l.transition;$l.transition={};try{t()}finally{$l.transition=e}};se.unstable_act=w0;se.useCallback=function(t,e){return Dt.current.useCallback(t,e)};se.useContext=function(t){return Dt.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return Dt.current.useDeferredValue(t)};se.useEffect=function(t,e){return Dt.current.useEffect(t,e)};se.useId=function(){return Dt.current.useId()};se.useImperativeHandle=function(t,e,n){return Dt.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return Dt.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return Dt.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return Dt.current.useMemo(t,e)};se.useReducer=function(t,e,n){return Dt.current.useReducer(t,e,n)};se.useRef=function(t){return Dt.current.useRef(t)};se.useState=function(t){return Dt.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return Dt.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return Dt.current.useTransition()};se.version="18.3.1";h0.exports=se;var M=h0.exports;const Fe=c0(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS=M,jS=Symbol.for("react.element"),$S=Symbol.for("react.fragment"),zS=Object.prototype.hasOwnProperty,WS=BS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GS={key:!0,ref:!0,__self:!0,__source:!0};function E0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zS.call(e,r)&&!GS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:jS,type:t,key:s,ref:o,props:i,_owner:WS.current}}lc.Fragment=$S;lc.jsx=E0;lc.jsxs=E0;d0.exports=lc;var N=d0.exports,dh={},I0={exports:{}},en={},T0={exports:{}},S0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,Q){var Z=G.length;G.push(Q);e:for(;0<Z;){var he=Z-1>>>1,ue=G[he];if(0<i(ue,Q))G[he]=Q,G[Z]=ue,Z=he;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Q=G[0],Z=G.pop();if(Z!==Q){G[0]=Z;e:for(var he=0,ue=G.length,ge=ue>>>1;he<ge;){var Ot=2*(he+1)-1,pt=G[Ot],Ct=Ot+1,mt=G[Ct];if(0>i(pt,Z))Ct<ue&&0>i(mt,pt)?(G[he]=mt,G[Ct]=Z,he=Ct):(G[he]=pt,G[Ot]=Z,he=Ot);else if(Ct<ue&&0>i(mt,Z))G[he]=mt,G[Ct]=Z,he=Ct;else break e}}return Q}function i(G,Q){var Z=G.sortIndex-Q.sortIndex;return Z!==0?Z:G.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,f=null,p=3,g=!1,w=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=G)r(c),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(c)}}function k(G){if(C=!1,T(G),!w)if(n(u)!==null)w=!0,$t(L);else{var Q=n(c);Q!==null&&Ze(k,Q.startTime-G)}}function L(G,Q){w=!1,C&&(C=!1,E(v),v=-1),g=!0;var Z=p;try{for(T(Q),f=n(u);f!==null&&(!(f.expirationTime>Q)||G&&!b());){var he=f.callback;if(typeof he=="function"){f.callback=null,p=f.priorityLevel;var ue=he(f.expirationTime<=Q);Q=t.unstable_now(),typeof ue=="function"?f.callback=ue:f===n(u)&&r(u),T(Q)}else r(u);f=n(u)}if(f!==null)var ge=!0;else{var Ot=n(c);Ot!==null&&Ze(k,Ot.startTime-Q),ge=!1}return ge}finally{f=null,p=Z,g=!1}}var V=!1,I=null,v=-1,S=5,A=-1;function b(){return!(t.unstable_now()-A<S)}function x(){if(I!==null){var G=t.unstable_now();A=G;var Q=!0;try{Q=I(!0,G)}finally{Q?R():(V=!1,I=null)}}else V=!1}var R;if(typeof _=="function")R=function(){_(x)};else if(typeof MessageChannel<"u"){var Je=new MessageChannel,Ue=Je.port2;Je.port1.onmessage=x,R=function(){Ue.postMessage(null)}}else R=function(){P(x,0)};function $t(G){I=G,V||(V=!0,R())}function Ze(G,Q){v=P(function(){G(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,$t(L))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var Z=p;p=Q;try{return G()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,Q){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Z=p;p=G;try{return Q()}finally{p=Z}},t.unstable_scheduleCallback=function(G,Q,Z){var he=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?he+Z:he):Z=he,G){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Z+ue,G={id:h++,callback:Q,priorityLevel:G,startTime:Z,expirationTime:ue,sortIndex:-1},Z>he?(G.sortIndex=Z,e(c,G),n(u)===null&&G===n(c)&&(C?(E(v),v=-1):C=!0,Ze(k,Z-he))):(G.sortIndex=ue,e(u,G),w||g||(w=!0,$t(L))),G},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(G){var Q=p;return function(){var Z=p;p=Q;try{return G.apply(this,arguments)}finally{p=Z}}}})(S0);T0.exports=S0;var HS=T0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qS=M,Zt=HS;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A0=new Set,Yo={};function Li(t,e){ws(t,e),ws(t+"Capture",e)}function ws(t,e){for(Yo[t]=e,t=0;t<e.length;t++)A0.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hh=Object.prototype.hasOwnProperty,KS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gg={},Hg={};function QS(t){return hh.call(Hg,t)?!0:hh.call(Gg,t)?!1:KS.test(t)?Hg[t]=!0:(Gg[t]=!0,!1)}function YS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XS(t,e,n,r){if(e===null||typeof e>"u"||YS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var zf=/[\-:]([a-z])/g;function Wf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zf,Wf);dt[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zf,Wf);dt[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zf,Wf);dt[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gf(t,e,n,r){var i=dt.hasOwnProperty(e)?dt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XS(e,n,i,r)&&(n=null),r||i===null?QS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var cr=qS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),Yi=Symbol.for("react.portal"),Xi=Symbol.for("react.fragment"),Hf=Symbol.for("react.strict_mode"),fh=Symbol.for("react.profiler"),C0=Symbol.for("react.provider"),R0=Symbol.for("react.context"),qf=Symbol.for("react.forward_ref"),ph=Symbol.for("react.suspense"),mh=Symbol.for("react.suspense_list"),Kf=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),P0=Symbol.for("react.offscreen"),qg=Symbol.iterator;function po(t){return t===null||typeof t!="object"?null:(t=qg&&t[qg]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,pd;function Ao(t){if(pd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pd=e&&e[1]||""}return`
`+pd+t}var md=!1;function gd(t,e){if(!t||md)return"";md=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{md=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ao(t):""}function JS(t){switch(t.tag){case 5:return Ao(t.type);case 16:return Ao("Lazy");case 13:return Ao("Suspense");case 19:return Ao("SuspenseList");case 0:case 2:case 15:return t=gd(t.type,!1),t;case 11:return t=gd(t.type.render,!1),t;case 1:return t=gd(t.type,!0),t;default:return""}}function gh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xi:return"Fragment";case Yi:return"Portal";case fh:return"Profiler";case Hf:return"StrictMode";case ph:return"Suspense";case mh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R0:return(t.displayName||"Context")+".Consumer";case C0:return(t._context.displayName||"Context")+".Provider";case qf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kf:return e=t.displayName||null,e!==null?e:gh(t.type)||"Memo";case vr:e=t._payload,t=t._init;try{return gh(t(e))}catch{}}return null}function ZS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gh(e);case 8:return e===Hf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function b0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eA(t){var e=b0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ml(t){t._valueTracker||(t._valueTracker=eA(t))}function x0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=b0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function cu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yh(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Kg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function k0(t,e){e=e.checked,e!=null&&Gf(t,"checked",e,!1)}function vh(t,e){k0(t,e);var n=Hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_h(t,e.type,n):e.hasOwnProperty("defaultValue")&&_h(t,e.type,Hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _h(t,e,n){(e!=="number"||cu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Co=Array.isArray;function us(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function wh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(Co(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hr(n)}}function D0(t,e){var n=Hr(e.value),r=Hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function N0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Eh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?N0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gl,O0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gl=gl||document.createElement("div"),gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var No={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tA=["Webkit","ms","Moz","O"];Object.keys(No).forEach(function(t){tA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),No[e]=No[t]})});function V0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||No.hasOwnProperty(t)&&No[t]?(""+e).trim():e+"px"}function L0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=V0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nA=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ih(t,e){if(e){if(nA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function Th(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sh=null;function Qf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ah=null,cs=null,ds=null;function Jg(t){if(t=Da(t)){if(typeof Ah!="function")throw Error(j(280));var e=t.stateNode;e&&(e=fc(e),Ah(t.stateNode,t.type,e))}}function M0(t){cs?ds?ds.push(t):ds=[t]:cs=t}function F0(){if(cs){var t=cs,e=ds;if(ds=cs=null,Jg(t),e)for(t=0;t<e.length;t++)Jg(e[t])}}function U0(t,e){return t(e)}function B0(){}var yd=!1;function j0(t,e,n){if(yd)return t(e,n);yd=!0;try{return U0(t,e,n)}finally{yd=!1,(cs!==null||ds!==null)&&(B0(),F0())}}function Jo(t,e){var n=t.stateNode;if(n===null)return null;var r=fc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var Ch=!1;if(er)try{var mo={};Object.defineProperty(mo,"passive",{get:function(){Ch=!0}}),window.addEventListener("test",mo,mo),window.removeEventListener("test",mo,mo)}catch{Ch=!1}function rA(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Oo=!1,du=null,hu=!1,Rh=null,iA={onError:function(t){Oo=!0,du=t}};function sA(t,e,n,r,i,s,o,l,u){Oo=!1,du=null,rA.apply(iA,arguments)}function oA(t,e,n,r,i,s,o,l,u){if(sA.apply(this,arguments),Oo){if(Oo){var c=du;Oo=!1,du=null}else throw Error(j(198));hu||(hu=!0,Rh=c)}}function Mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zg(t){if(Mi(t)!==t)throw Error(j(188))}function aA(t){var e=t.alternate;if(!e){if(e=Mi(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Zg(i),t;if(s===r)return Zg(i),e;s=s.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function z0(t){return t=aA(t),t!==null?W0(t):null}function W0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=W0(t);if(e!==null)return e;t=t.sibling}return null}var G0=Zt.unstable_scheduleCallback,ey=Zt.unstable_cancelCallback,lA=Zt.unstable_shouldYield,uA=Zt.unstable_requestPaint,je=Zt.unstable_now,cA=Zt.unstable_getCurrentPriorityLevel,Yf=Zt.unstable_ImmediatePriority,H0=Zt.unstable_UserBlockingPriority,fu=Zt.unstable_NormalPriority,dA=Zt.unstable_LowPriority,q0=Zt.unstable_IdlePriority,uc=null,Vn=null;function hA(t){if(Vn&&typeof Vn.onCommitFiberRoot=="function")try{Vn.onCommitFiberRoot(uc,t,void 0,(t.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:mA,fA=Math.log,pA=Math.LN2;function mA(t){return t>>>=0,t===0?32:31-(fA(t)/pA|0)|0}var yl=64,vl=4194304;function Ro(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ro(l):(s&=o,s!==0&&(r=Ro(s)))}else o=n&~i,o!==0?r=Ro(o):s!==0&&(r=Ro(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sn(e),i=1<<n,r|=t[n],e&=~i;return r}function gA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Sn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=gA(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Ph(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function K0(){var t=yl;return yl<<=1,!(yl&4194240)&&(yl=64),t}function vd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sn(e),t[e]=n}function vA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Sn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Xf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function Q0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Y0,Jf,X0,J0,Z0,bh=!1,_l=[],xr=null,kr=null,Dr=null,Zo=new Map,ea=new Map,Er=[],_A="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ty(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":Zo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ea.delete(e.pointerId)}}function go(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Da(e),e!==null&&Jf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wA(t,e,n,r,i){switch(e){case"focusin":return xr=go(xr,t,e,n,r,i),!0;case"dragenter":return kr=go(kr,t,e,n,r,i),!0;case"mouseover":return Dr=go(Dr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Zo.set(s,go(Zo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ea.set(s,go(ea.get(s)||null,t,e,n,r,i)),!0}return!1}function ew(t){var e=vi(t.target);if(e!==null){var n=Mi(e);if(n!==null){if(e=n.tag,e===13){if(e=$0(n),e!==null){t.blockedOn=e,Z0(t.priority,function(){X0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sh=r,n.target.dispatchEvent(r),Sh=null}else return e=Da(n),e!==null&&Jf(e),t.blockedOn=n,!1;e.shift()}return!0}function ny(t,e,n){zl(t)&&n.delete(e)}function EA(){bh=!1,xr!==null&&zl(xr)&&(xr=null),kr!==null&&zl(kr)&&(kr=null),Dr!==null&&zl(Dr)&&(Dr=null),Zo.forEach(ny),ea.forEach(ny)}function yo(t,e){t.blockedOn===e&&(t.blockedOn=null,bh||(bh=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,EA)))}function ta(t){function e(i){return yo(i,t)}if(0<_l.length){yo(_l[0],t);for(var n=1;n<_l.length;n++){var r=_l[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&yo(xr,t),kr!==null&&yo(kr,t),Dr!==null&&yo(Dr,t),Zo.forEach(e),ea.forEach(e),n=0;n<Er.length;n++)r=Er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Er.length&&(n=Er[0],n.blockedOn===null);)ew(n),n.blockedOn===null&&Er.shift()}var hs=cr.ReactCurrentBatchConfig,mu=!0;function IA(t,e,n,r){var i=_e,s=hs.transition;hs.transition=null;try{_e=1,Zf(t,e,n,r)}finally{_e=i,hs.transition=s}}function TA(t,e,n,r){var i=_e,s=hs.transition;hs.transition=null;try{_e=4,Zf(t,e,n,r)}finally{_e=i,hs.transition=s}}function Zf(t,e,n,r){if(mu){var i=xh(t,e,n,r);if(i===null)Pd(t,e,r,gu,n),ty(t,r);else if(wA(i,t,e,n,r))r.stopPropagation();else if(ty(t,r),e&4&&-1<_A.indexOf(t)){for(;i!==null;){var s=Da(i);if(s!==null&&Y0(s),s=xh(t,e,n,r),s===null&&Pd(t,e,r,gu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pd(t,e,r,null,n)}}var gu=null;function xh(t,e,n,r){if(gu=null,t=Qf(r),t=vi(t),t!==null)if(e=Mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gu=t,null}function tw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cA()){case Yf:return 1;case H0:return 4;case fu:case dA:return 16;case q0:return 536870912;default:return 16}default:return 16}}var Rr=null,ep=null,Wl=null;function nw(){if(Wl)return Wl;var t,e=ep,n=e.length,r,i="value"in Rr?Rr.value:Rr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Wl=i.slice(t,1<r?1-r:void 0)}function Gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wl(){return!0}function ry(){return!1}function tn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wl:ry,this.isPropagationStopped=ry,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),e}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tp=tn(Us),ka=Oe({},Us,{view:0,detail:0}),SA=tn(ka),_d,wd,vo,cc=Oe({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:np,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vo&&(vo&&t.type==="mousemove"?(_d=t.screenX-vo.screenX,wd=t.screenY-vo.screenY):wd=_d=0,vo=t),_d)},movementY:function(t){return"movementY"in t?t.movementY:wd}}),iy=tn(cc),AA=Oe({},cc,{dataTransfer:0}),CA=tn(AA),RA=Oe({},ka,{relatedTarget:0}),Ed=tn(RA),PA=Oe({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),bA=tn(PA),xA=Oe({},Us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kA=tn(xA),DA=Oe({},Us,{data:0}),sy=tn(DA),NA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VA[t])?!!e[t]:!1}function np(){return LA}var MA=Oe({},ka,{key:function(t){if(t.key){var e=NA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:np,charCode:function(t){return t.type==="keypress"?Gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FA=tn(MA),UA=Oe({},cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oy=tn(UA),BA=Oe({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:np}),jA=tn(BA),$A=Oe({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),zA=tn($A),WA=Oe({},cc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GA=tn(WA),HA=[9,13,27,32],rp=er&&"CompositionEvent"in window,Vo=null;er&&"documentMode"in document&&(Vo=document.documentMode);var qA=er&&"TextEvent"in window&&!Vo,rw=er&&(!rp||Vo&&8<Vo&&11>=Vo),ay=String.fromCharCode(32),ly=!1;function iw(t,e){switch(t){case"keyup":return HA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ji=!1;function KA(t,e){switch(t){case"compositionend":return sw(e);case"keypress":return e.which!==32?null:(ly=!0,ay);case"textInput":return t=e.data,t===ay&&ly?null:t;default:return null}}function QA(t,e){if(Ji)return t==="compositionend"||!rp&&iw(t,e)?(t=nw(),Wl=ep=Rr=null,Ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rw&&e.locale!=="ko"?null:e.data;default:return null}}var YA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YA[t.type]:e==="textarea"}function ow(t,e,n,r){M0(r),e=yu(e,"onChange"),0<e.length&&(n=new tp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Lo=null,na=null;function XA(t){yw(t,0)}function dc(t){var e=ts(t);if(x0(e))return t}function JA(t,e){if(t==="change")return e}var aw=!1;if(er){var Id;if(er){var Td="oninput"in document;if(!Td){var cy=document.createElement("div");cy.setAttribute("oninput","return;"),Td=typeof cy.oninput=="function"}Id=Td}else Id=!1;aw=Id&&(!document.documentMode||9<document.documentMode)}function dy(){Lo&&(Lo.detachEvent("onpropertychange",lw),na=Lo=null)}function lw(t){if(t.propertyName==="value"&&dc(na)){var e=[];ow(e,na,t,Qf(t)),j0(XA,e)}}function ZA(t,e,n){t==="focusin"?(dy(),Lo=e,na=n,Lo.attachEvent("onpropertychange",lw)):t==="focusout"&&dy()}function eC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dc(na)}function tC(t,e){if(t==="click")return dc(e)}function nC(t,e){if(t==="input"||t==="change")return dc(e)}function rC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Rn=typeof Object.is=="function"?Object.is:rC;function ra(t,e){if(Rn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hh.call(e,i)||!Rn(t[i],e[i]))return!1}return!0}function hy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fy(t,e){var n=hy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hy(n)}}function uw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cw(){for(var t=window,e=cu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=cu(t.document)}return e}function ip(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iC(t){var e=cw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uw(n.ownerDocument.documentElement,n)){if(r!==null&&ip(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=fy(n,s);var o=fy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sC=er&&"documentMode"in document&&11>=document.documentMode,Zi=null,kh=null,Mo=null,Dh=!1;function py(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dh||Zi==null||Zi!==cu(r)||(r=Zi,"selectionStart"in r&&ip(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mo&&ra(Mo,r)||(Mo=r,r=yu(kh,"onSelect"),0<r.length&&(e=new tp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zi)))}function El(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var es={animationend:El("Animation","AnimationEnd"),animationiteration:El("Animation","AnimationIteration"),animationstart:El("Animation","AnimationStart"),transitionend:El("Transition","TransitionEnd")},Sd={},dw={};er&&(dw=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function hc(t){if(Sd[t])return Sd[t];if(!es[t])return t;var e=es[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dw)return Sd[t]=e[n];return t}var hw=hc("animationend"),fw=hc("animationiteration"),pw=hc("animationstart"),mw=hc("transitionend"),gw=new Map,my="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){gw.set(t,e),Li(e,[t])}for(var Ad=0;Ad<my.length;Ad++){var Cd=my[Ad],oC=Cd.toLowerCase(),aC=Cd[0].toUpperCase()+Cd.slice(1);ni(oC,"on"+aC)}ni(hw,"onAnimationEnd");ni(fw,"onAnimationIteration");ni(pw,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(mw,"onTransitionEnd");ws("onMouseEnter",["mouseout","mouseover"]);ws("onMouseLeave",["mouseout","mouseover"]);ws("onPointerEnter",["pointerout","pointerover"]);ws("onPointerLeave",["pointerout","pointerover"]);Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Li("onBeforeInput",["compositionend","keypress","textInput","paste"]);Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Po));function gy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oA(r,e,void 0,t),t.currentTarget=null}function yw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;gy(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;gy(i,l,c),s=u}}}if(hu)throw t=Rh,hu=!1,Rh=null,t}function Ce(t,e){var n=e[Mh];n===void 0&&(n=e[Mh]=new Set);var r=t+"__bubble";n.has(r)||(vw(e,t,2,!1),n.add(r))}function Rd(t,e,n){var r=0;e&&(r|=4),vw(n,t,r,e)}var Il="_reactListening"+Math.random().toString(36).slice(2);function ia(t){if(!t[Il]){t[Il]=!0,A0.forEach(function(n){n!=="selectionchange"&&(lC.has(n)||Rd(n,!1,t),Rd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Il]||(e[Il]=!0,Rd("selectionchange",!1,e))}}function vw(t,e,n,r){switch(tw(e)){case 1:var i=IA;break;case 4:i=TA;break;default:i=Zf}n=i.bind(null,e,n,t),i=void 0,!Ch||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=vi(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}j0(function(){var c=s,h=Qf(n),f=[];e:{var p=gw.get(t);if(p!==void 0){var g=tp,w=t;switch(t){case"keypress":if(Gl(n)===0)break e;case"keydown":case"keyup":g=FA;break;case"focusin":w="focus",g=Ed;break;case"focusout":w="blur",g=Ed;break;case"beforeblur":case"afterblur":g=Ed;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=iy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=CA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=jA;break;case hw:case fw:case pw:g=bA;break;case mw:g=zA;break;case"scroll":g=SA;break;case"wheel":g=GA;break;case"copy":case"cut":case"paste":g=kA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=oy}var C=(e&4)!==0,P=!C&&t==="scroll",E=C?p!==null?p+"Capture":null:p;C=[];for(var _=c,T;_!==null;){T=_;var k=T.stateNode;if(T.tag===5&&k!==null&&(T=k,E!==null&&(k=Jo(_,E),k!=null&&C.push(sa(_,k,T)))),P)break;_=_.return}0<C.length&&(p=new g(p,w,null,n,h),f.push({event:p,listeners:C}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Sh&&(w=n.relatedTarget||n.fromElement)&&(vi(w)||w[tr]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=c,w=w?vi(w):null,w!==null&&(P=Mi(w),w!==P||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=c),g!==w)){if(C=iy,k="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(C=oy,k="onPointerLeave",E="onPointerEnter",_="pointer"),P=g==null?p:ts(g),T=w==null?p:ts(w),p=new C(k,_+"leave",g,n,h),p.target=P,p.relatedTarget=T,k=null,vi(h)===c&&(C=new C(E,_+"enter",w,n,h),C.target=T,C.relatedTarget=P,k=C),P=k,g&&w)t:{for(C=g,E=w,_=0,T=C;T;T=Wi(T))_++;for(T=0,k=E;k;k=Wi(k))T++;for(;0<_-T;)C=Wi(C),_--;for(;0<T-_;)E=Wi(E),T--;for(;_--;){if(C===E||E!==null&&C===E.alternate)break t;C=Wi(C),E=Wi(E)}C=null}else C=null;g!==null&&yy(f,p,g,C,!1),w!==null&&P!==null&&yy(f,P,w,C,!0)}}e:{if(p=c?ts(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var L=JA;else if(uy(p))if(aw)L=nC;else{L=eC;var V=ZA}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=tC);if(L&&(L=L(t,c))){ow(f,L,n,h);break e}V&&V(t,p,c),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&_h(p,"number",p.value)}switch(V=c?ts(c):window,t){case"focusin":(uy(V)||V.contentEditable==="true")&&(Zi=V,kh=c,Mo=null);break;case"focusout":Mo=kh=Zi=null;break;case"mousedown":Dh=!0;break;case"contextmenu":case"mouseup":case"dragend":Dh=!1,py(f,n,h);break;case"selectionchange":if(sC)break;case"keydown":case"keyup":py(f,n,h)}var I;if(rp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ji?iw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(rw&&n.locale!=="ko"&&(Ji||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ji&&(I=nw()):(Rr=h,ep="value"in Rr?Rr.value:Rr.textContent,Ji=!0)),V=yu(c,v),0<V.length&&(v=new sy(v,t,null,n,h),f.push({event:v,listeners:V}),I?v.data=I:(I=sw(n),I!==null&&(v.data=I)))),(I=qA?KA(t,n):QA(t,n))&&(c=yu(c,"onBeforeInput"),0<c.length&&(h=new sy("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=I))}yw(f,e)})}function sa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Jo(t,n),s!=null&&r.unshift(sa(t,s,i)),s=Jo(t,e),s!=null&&r.push(sa(t,s,i))),t=t.return}return r}function Wi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Jo(n,s),u!=null&&o.unshift(sa(n,u,l))):i||(u=Jo(n,s),u!=null&&o.push(sa(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uC=/\r\n?/g,cC=/\u0000|\uFFFD/g;function vy(t){return(typeof t=="string"?t:""+t).replace(uC,`
`).replace(cC,"")}function Tl(t,e,n){if(e=vy(e),vy(t)!==e&&n)throw Error(j(425))}function vu(){}var Nh=null,Oh=null;function Vh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lh=typeof setTimeout=="function"?setTimeout:void 0,dC=typeof clearTimeout=="function"?clearTimeout:void 0,_y=typeof Promise=="function"?Promise:void 0,hC=typeof queueMicrotask=="function"?queueMicrotask:typeof _y<"u"?function(t){return _y.resolve(null).then(t).catch(fC)}:Lh;function fC(t){setTimeout(function(){throw t})}function bd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ta(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ta(e)}function Nr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),On="__reactFiber$"+Bs,oa="__reactProps$"+Bs,tr="__reactContainer$"+Bs,Mh="__reactEvents$"+Bs,pC="__reactListeners$"+Bs,mC="__reactHandles$"+Bs;function vi(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tr]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wy(t);t!==null;){if(n=t[On])return n;t=wy(t)}return e}t=n,n=t.parentNode}return null}function Da(t){return t=t[On]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function fc(t){return t[oa]||null}var Fh=[],ns=-1;function ri(t){return{current:t}}function Pe(t){0>ns||(t.current=Fh[ns],Fh[ns]=null,ns--)}function Se(t,e){ns++,Fh[ns]=t.current,t.current=e}var qr={},St=ri(qr),Ut=ri(!1),Ci=qr;function Es(t,e){var n=t.type.contextTypes;if(!n)return qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Bt(t){return t=t.childContextTypes,t!=null}function _u(){Pe(Ut),Pe(St)}function Ey(t,e,n){if(St.current!==qr)throw Error(j(168));Se(St,e),Se(Ut,n)}function _w(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(j(108,ZS(t)||"Unknown",i));return Oe({},n,r)}function wu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qr,Ci=St.current,Se(St,t),Se(Ut,Ut.current),!0}function Iy(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=_w(t,e,Ci),r.__reactInternalMemoizedMergedChildContext=t,Pe(Ut),Pe(St),Se(St,t)):Pe(Ut),Se(Ut,n)}var qn=null,pc=!1,xd=!1;function ww(t){qn===null?qn=[t]:qn.push(t)}function gC(t){pc=!0,ww(t)}function ii(){if(!xd&&qn!==null){xd=!0;var t=0,e=_e;try{var n=qn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qn=null,pc=!1}catch(i){throw qn!==null&&(qn=qn.slice(t+1)),G0(Yf,ii),i}finally{_e=e,xd=!1}}return null}var rs=[],is=0,Eu=null,Iu=0,rn=[],sn=0,Ri=null,Kn=1,Qn="";function pi(t,e){rs[is++]=Iu,rs[is++]=Eu,Eu=t,Iu=e}function Ew(t,e,n){rn[sn++]=Kn,rn[sn++]=Qn,rn[sn++]=Ri,Ri=t;var r=Kn;t=Qn;var i=32-Sn(r)-1;r&=~(1<<i),n+=1;var s=32-Sn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Kn=1<<32-Sn(e)+i|n<<i|r,Qn=s+t}else Kn=1<<s|n<<i|r,Qn=t}function sp(t){t.return!==null&&(pi(t,1),Ew(t,1,0))}function op(t){for(;t===Eu;)Eu=rs[--is],rs[is]=null,Iu=rs[--is],rs[is]=null;for(;t===Ri;)Ri=rn[--sn],rn[sn]=null,Qn=rn[--sn],rn[sn]=null,Kn=rn[--sn],rn[sn]=null}var Yt=null,qt=null,xe=!1,En=null;function Iw(t,e){var n=ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ty(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yt=t,qt=Nr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yt=t,qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ri!==null?{id:Kn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yt=t,qt=null,!0):!1;default:return!1}}function Uh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bh(t){if(xe){var e=qt;if(e){var n=e;if(!Ty(t,e)){if(Uh(t))throw Error(j(418));e=Nr(n.nextSibling);var r=Yt;e&&Ty(t,e)?Iw(r,n):(t.flags=t.flags&-4097|2,xe=!1,Yt=t)}}else{if(Uh(t))throw Error(j(418));t.flags=t.flags&-4097|2,xe=!1,Yt=t}}}function Sy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yt=t}function Sl(t){if(t!==Yt)return!1;if(!xe)return Sy(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vh(t.type,t.memoizedProps)),e&&(e=qt)){if(Uh(t))throw Tw(),Error(j(418));for(;e;)Iw(t,e),e=Nr(e.nextSibling)}if(Sy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qt=Nr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qt=null}}else qt=Yt?Nr(t.stateNode.nextSibling):null;return!0}function Tw(){for(var t=qt;t;)t=Nr(t.nextSibling)}function Is(){qt=Yt=null,xe=!1}function ap(t){En===null?En=[t]:En.push(t)}var yC=cr.ReactCurrentBatchConfig;function _o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function Al(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ay(t){var e=t._init;return e(t._payload)}function Sw(t){function e(E,_){if(t){var T=E.deletions;T===null?(E.deletions=[_],E.flags|=16):T.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function i(E,_){return E=Mr(E,_),E.index=0,E.sibling=null,E}function s(E,_,T){return E.index=T,t?(T=E.alternate,T!==null?(T=T.index,T<_?(E.flags|=2,_):T):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,_,T,k){return _===null||_.tag!==6?(_=Md(T,E.mode,k),_.return=E,_):(_=i(_,T),_.return=E,_)}function u(E,_,T,k){var L=T.type;return L===Xi?h(E,_,T.props.children,k,T.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===vr&&Ay(L)===_.type)?(k=i(_,T.props),k.ref=_o(E,_,T),k.return=E,k):(k=Jl(T.type,T.key,T.props,null,E.mode,k),k.ref=_o(E,_,T),k.return=E,k)}function c(E,_,T,k){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=Fd(T,E.mode,k),_.return=E,_):(_=i(_,T.children||[]),_.return=E,_)}function h(E,_,T,k,L){return _===null||_.tag!==7?(_=Ti(T,E.mode,k,L),_.return=E,_):(_=i(_,T),_.return=E,_)}function f(E,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Md(""+_,E.mode,T),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pl:return T=Jl(_.type,_.key,_.props,null,E.mode,T),T.ref=_o(E,null,_),T.return=E,T;case Yi:return _=Fd(_,E.mode,T),_.return=E,_;case vr:var k=_._init;return f(E,k(_._payload),T)}if(Co(_)||po(_))return _=Ti(_,E.mode,T,null),_.return=E,_;Al(E,_)}return null}function p(E,_,T,k){var L=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:l(E,_,""+T,k);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case pl:return T.key===L?u(E,_,T,k):null;case Yi:return T.key===L?c(E,_,T,k):null;case vr:return L=T._init,p(E,_,L(T._payload),k)}if(Co(T)||po(T))return L!==null?null:h(E,_,T,k,null);Al(E,T)}return null}function g(E,_,T,k,L){if(typeof k=="string"&&k!==""||typeof k=="number")return E=E.get(T)||null,l(_,E,""+k,L);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case pl:return E=E.get(k.key===null?T:k.key)||null,u(_,E,k,L);case Yi:return E=E.get(k.key===null?T:k.key)||null,c(_,E,k,L);case vr:var V=k._init;return g(E,_,T,V(k._payload),L)}if(Co(k)||po(k))return E=E.get(T)||null,h(_,E,k,L,null);Al(_,k)}return null}function w(E,_,T,k){for(var L=null,V=null,I=_,v=_=0,S=null;I!==null&&v<T.length;v++){I.index>v?(S=I,I=null):S=I.sibling;var A=p(E,I,T[v],k);if(A===null){I===null&&(I=S);break}t&&I&&A.alternate===null&&e(E,I),_=s(A,_,v),V===null?L=A:V.sibling=A,V=A,I=S}if(v===T.length)return n(E,I),xe&&pi(E,v),L;if(I===null){for(;v<T.length;v++)I=f(E,T[v],k),I!==null&&(_=s(I,_,v),V===null?L=I:V.sibling=I,V=I);return xe&&pi(E,v),L}for(I=r(E,I);v<T.length;v++)S=g(I,E,v,T[v],k),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?v:S.key),_=s(S,_,v),V===null?L=S:V.sibling=S,V=S);return t&&I.forEach(function(b){return e(E,b)}),xe&&pi(E,v),L}function C(E,_,T,k){var L=po(T);if(typeof L!="function")throw Error(j(150));if(T=L.call(T),T==null)throw Error(j(151));for(var V=L=null,I=_,v=_=0,S=null,A=T.next();I!==null&&!A.done;v++,A=T.next()){I.index>v?(S=I,I=null):S=I.sibling;var b=p(E,I,A.value,k);if(b===null){I===null&&(I=S);break}t&&I&&b.alternate===null&&e(E,I),_=s(b,_,v),V===null?L=b:V.sibling=b,V=b,I=S}if(A.done)return n(E,I),xe&&pi(E,v),L;if(I===null){for(;!A.done;v++,A=T.next())A=f(E,A.value,k),A!==null&&(_=s(A,_,v),V===null?L=A:V.sibling=A,V=A);return xe&&pi(E,v),L}for(I=r(E,I);!A.done;v++,A=T.next())A=g(I,E,v,A.value,k),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?v:A.key),_=s(A,_,v),V===null?L=A:V.sibling=A,V=A);return t&&I.forEach(function(x){return e(E,x)}),xe&&pi(E,v),L}function P(E,_,T,k){if(typeof T=="object"&&T!==null&&T.type===Xi&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case pl:e:{for(var L=T.key,V=_;V!==null;){if(V.key===L){if(L=T.type,L===Xi){if(V.tag===7){n(E,V.sibling),_=i(V,T.props.children),_.return=E,E=_;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===vr&&Ay(L)===V.type){n(E,V.sibling),_=i(V,T.props),_.ref=_o(E,V,T),_.return=E,E=_;break e}n(E,V);break}else e(E,V);V=V.sibling}T.type===Xi?(_=Ti(T.props.children,E.mode,k,T.key),_.return=E,E=_):(k=Jl(T.type,T.key,T.props,null,E.mode,k),k.ref=_o(E,_,T),k.return=E,E=k)}return o(E);case Yi:e:{for(V=T.key;_!==null;){if(_.key===V)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(E,_.sibling),_=i(_,T.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=Fd(T,E.mode,k),_.return=E,E=_}return o(E);case vr:return V=T._init,P(E,_,V(T._payload),k)}if(Co(T))return w(E,_,T,k);if(po(T))return C(E,_,T,k);Al(E,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(n(E,_.sibling),_=i(_,T),_.return=E,E=_):(n(E,_),_=Md(T,E.mode,k),_.return=E,E=_),o(E)):n(E,_)}return P}var Ts=Sw(!0),Aw=Sw(!1),Tu=ri(null),Su=null,ss=null,lp=null;function up(){lp=ss=Su=null}function cp(t){var e=Tu.current;Pe(Tu),t._currentValue=e}function jh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fs(t,e){Su=t,lp=ss=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function hn(t){var e=t._currentValue;if(lp!==t)if(t={context:t,memoizedValue:e,next:null},ss===null){if(Su===null)throw Error(j(308));ss=t,Su.dependencies={lanes:0,firstContext:t}}else ss=ss.next=t;return e}var _i=null;function dp(t){_i===null?_i=[t]:_i.push(t)}function Cw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,dp(e)):(n.next=i.next,i.next=n),e.interleaved=n,nr(t,r)}function nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _r=!1;function hp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,nr(t,n)}return i=r.interleaved,i===null?(e.next=e,dp(r)):(e.next=i.next,i.next=e),r.interleaved=e,nr(t,n)}function Hl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xf(t,n)}}function Cy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Au(t,e,n,r){var i=t.updateQueue;_r=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,h=c=u=null,l=s;do{var p=l.lane,g=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,C=l;switch(p=e,g=n,C.tag){case 1:if(w=C.payload,typeof w=="function"){f=w.call(g,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=C.payload,p=typeof w=="function"?w.call(g,f,p):w,p==null)break e;f=Oe({},f,p);break e;case 2:_r=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=g,u=f):h=h.next=g,o|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);bi|=o,t.lanes=o,t.memoizedState=f}}function Ry(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(j(191,i));i.call(r)}}}var Na={},Ln=ri(Na),aa=ri(Na),la=ri(Na);function wi(t){if(t===Na)throw Error(j(174));return t}function fp(t,e){switch(Se(la,e),Se(aa,t),Se(Ln,Na),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Eh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Eh(e,t)}Pe(Ln),Se(Ln,e)}function Ss(){Pe(Ln),Pe(aa),Pe(la)}function Pw(t){wi(la.current);var e=wi(Ln.current),n=Eh(e,t.type);e!==n&&(Se(aa,t),Se(Ln,n))}function pp(t){aa.current===t&&(Pe(Ln),Pe(aa))}var De=ri(0);function Cu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kd=[];function mp(){for(var t=0;t<kd.length;t++)kd[t]._workInProgressVersionPrimary=null;kd.length=0}var ql=cr.ReactCurrentDispatcher,Dd=cr.ReactCurrentBatchConfig,Pi=0,Ne=null,Qe=null,tt=null,Ru=!1,Fo=!1,ua=0,vC=0;function vt(){throw Error(j(321))}function gp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Rn(t[n],e[n]))return!1;return!0}function yp(t,e,n,r,i,s){if(Pi=s,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ql.current=t===null||t.memoizedState===null?IC:TC,t=n(r,i),Fo){s=0;do{if(Fo=!1,ua=0,25<=s)throw Error(j(301));s+=1,tt=Qe=null,e.updateQueue=null,ql.current=SC,t=n(r,i)}while(Fo)}if(ql.current=Pu,e=Qe!==null&&Qe.next!==null,Pi=0,tt=Qe=Ne=null,Ru=!1,e)throw Error(j(300));return t}function vp(){var t=ua!==0;return ua=0,t}function Dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Ne.memoizedState=tt=t:tt=tt.next=t,tt}function fn(){if(Qe===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=tt===null?Ne.memoizedState:tt.next;if(e!==null)tt=e,Qe=t;else{if(t===null)throw Error(j(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},tt===null?Ne.memoizedState=tt=t:tt=tt.next=t}return tt}function ca(t,e){return typeof e=="function"?e(t):e}function Nd(t){var e=fn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=Qe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var h=c.lane;if((Pi&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=f,o=r):u=u.next=f,Ne.lanes|=h,bi|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,Rn(r,e.memoizedState)||(Ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ne.lanes|=s,bi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Od(t){var e=fn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Rn(s,e.memoizedState)||(Ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function bw(){}function xw(t,e){var n=Ne,r=fn(),i=e(),s=!Rn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ft=!0),r=r.queue,_p(Nw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,da(9,Dw.bind(null,n,r,i,e),void 0,null),nt===null)throw Error(j(349));Pi&30||kw(n,e,i)}return i}function kw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Dw(t,e,n,r){e.value=n,e.getSnapshot=r,Ow(e)&&Vw(t)}function Nw(t,e,n){return n(function(){Ow(e)&&Vw(t)})}function Ow(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Rn(t,n)}catch{return!0}}function Vw(t){var e=nr(t,1);e!==null&&An(e,t,1,-1)}function Py(t){var e=Dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:t},e.queue=t,t=t.dispatch=EC.bind(null,Ne,t),[e.memoizedState,t]}function da(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Lw(){return fn().memoizedState}function Kl(t,e,n,r){var i=Dn();Ne.flags|=t,i.memoizedState=da(1|e,n,void 0,r===void 0?null:r)}function mc(t,e,n,r){var i=fn();r=r===void 0?null:r;var s=void 0;if(Qe!==null){var o=Qe.memoizedState;if(s=o.destroy,r!==null&&gp(r,o.deps)){i.memoizedState=da(e,n,s,r);return}}Ne.flags|=t,i.memoizedState=da(1|e,n,s,r)}function by(t,e){return Kl(8390656,8,t,e)}function _p(t,e){return mc(2048,8,t,e)}function Mw(t,e){return mc(4,2,t,e)}function Fw(t,e){return mc(4,4,t,e)}function Uw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bw(t,e,n){return n=n!=null?n.concat([t]):null,mc(4,4,Uw.bind(null,e,t),n)}function wp(){}function jw(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $w(t,e){var n=fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zw(t,e,n){return Pi&21?(Rn(n,e)||(n=K0(),Ne.lanes|=n,bi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function _C(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=Dd.transition;Dd.transition={};try{t(!1),e()}finally{_e=n,Dd.transition=r}}function Ww(){return fn().memoizedState}function wC(t,e,n){var r=Lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gw(t))Hw(e,n);else if(n=Cw(t,e,n,r),n!==null){var i=kt();An(n,t,r,i),qw(n,e,r)}}function EC(t,e,n){var r=Lr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gw(t))Hw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Rn(l,o)){var u=e.interleaved;u===null?(i.next=i,dp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Cw(t,e,i,r),n!==null&&(i=kt(),An(n,t,r,i),qw(n,e,r))}}function Gw(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Hw(t,e){Fo=Ru=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xf(t,n)}}var Pu={readContext:hn,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},IC={readContext:hn,useCallback:function(t,e){return Dn().memoizedState=[t,e===void 0?null:e],t},useContext:hn,useEffect:by,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kl(4194308,4,Uw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kl(4,2,t,e)},useMemo:function(t,e){var n=Dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wC.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=Dn();return t={current:t},e.memoizedState=t},useState:Py,useDebugValue:wp,useDeferredValue:function(t){return Dn().memoizedState=t},useTransition:function(){var t=Py(!1),e=t[0];return t=_C.bind(null,t[1]),Dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,i=Dn();if(xe){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),nt===null)throw Error(j(349));Pi&30||kw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,by(Nw.bind(null,r,s,t),[t]),r.flags|=2048,da(9,Dw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Dn(),e=nt.identifierPrefix;if(xe){var n=Qn,r=Kn;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ua++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TC={readContext:hn,useCallback:jw,useContext:hn,useEffect:_p,useImperativeHandle:Bw,useInsertionEffect:Mw,useLayoutEffect:Fw,useMemo:$w,useReducer:Nd,useRef:Lw,useState:function(){return Nd(ca)},useDebugValue:wp,useDeferredValue:function(t){var e=fn();return zw(e,Qe.memoizedState,t)},useTransition:function(){var t=Nd(ca)[0],e=fn().memoizedState;return[t,e]},useMutableSource:bw,useSyncExternalStore:xw,useId:Ww,unstable_isNewReconciler:!1},SC={readContext:hn,useCallback:jw,useContext:hn,useEffect:_p,useImperativeHandle:Bw,useInsertionEffect:Mw,useLayoutEffect:Fw,useMemo:$w,useReducer:Od,useRef:Lw,useState:function(){return Od(ca)},useDebugValue:wp,useDeferredValue:function(t){var e=fn();return Qe===null?e.memoizedState=t:zw(e,Qe.memoizedState,t)},useTransition:function(){var t=Od(ca)[0],e=fn().memoizedState;return[t,e]},useMutableSource:bw,useSyncExternalStore:xw,useId:Ww,unstable_isNewReconciler:!1};function _n(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $h(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gc={isMounted:function(t){return(t=t._reactInternals)?Mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=kt(),i=Lr(t),s=Jn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Or(t,s,i),e!==null&&(An(e,t,i,r),Hl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=kt(),i=Lr(t),s=Jn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Or(t,s,i),e!==null&&(An(e,t,i,r),Hl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kt(),r=Lr(t),i=Jn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Or(t,i,r),e!==null&&(An(e,t,r,n),Hl(e,t,r))}};function xy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ra(n,r)||!ra(i,s):!0}function Kw(t,e,n){var r=!1,i=qr,s=e.contextType;return typeof s=="object"&&s!==null?s=hn(s):(i=Bt(e)?Ci:St.current,r=e.contextTypes,s=(r=r!=null)?Es(t,i):qr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ky(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gc.enqueueReplaceState(e,e.state,null)}function zh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},hp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=hn(s):(s=Bt(e)?Ci:St.current,i.context=Es(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($h(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&gc.enqueueReplaceState(i,i.state,null),Au(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function As(t,e){try{var n="",r=e;do n+=JS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Vd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var AC=typeof WeakMap=="function"?WeakMap:Map;function Qw(t,e,n){n=Jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xu||(xu=!0,ef=r),Wh(t,e)},n}function Yw(t,e,n){n=Jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Wh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Wh(t,e),typeof r!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Dy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new AC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=UC.bind(null,t,e,n),e.then(t,t))}function Ny(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Oy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jn(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var CC=cr.ReactCurrentOwner,Ft=!1;function xt(t,e,n,r){e.child=t===null?Aw(e,null,n,r):Ts(e,t.child,n,r)}function Vy(t,e,n,r,i){n=n.render;var s=e.ref;return fs(e,i),r=yp(t,e,n,r,s,i),n=vp(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rr(t,e,i)):(xe&&n&&sp(e),e.flags|=1,xt(t,e,r,i),e.child)}function Ly(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Pp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Xw(t,e,s,r,i)):(t=Jl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ra,n(o,r)&&t.ref===e.ref)return rr(t,e,i)}return e.flags|=1,t=Mr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Xw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ra(s,r)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,rr(t,e,i)}return Gh(t,e,n,r,i)}function Jw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(as,Ht),Ht|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(as,Ht),Ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Se(as,Ht),Ht|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Se(as,Ht),Ht|=r;return xt(t,e,i,n),e.child}function Zw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gh(t,e,n,r,i){var s=Bt(n)?Ci:St.current;return s=Es(e,s),fs(e,i),n=yp(t,e,n,r,s,i),r=vp(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rr(t,e,i)):(xe&&r&&sp(e),e.flags|=1,xt(t,e,n,i),e.child)}function My(t,e,n,r,i){if(Bt(n)){var s=!0;wu(e)}else s=!1;if(fs(e,i),e.stateNode===null)Ql(t,e),Kw(e,n,r),zh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=hn(c):(c=Bt(n)?Ci:St.current,c=Es(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&ky(e,o,r,c),_r=!1;var p=e.memoizedState;o.state=p,Au(e,r,o,i),u=e.memoizedState,l!==r||p!==u||Ut.current||_r?(typeof h=="function"&&($h(e,n,h,r),u=e.memoizedState),(l=_r||xy(e,n,l,r,p,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Rw(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:_n(e.type,l),o.props=c,f=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=hn(u):(u=Bt(n)?Ci:St.current,u=Es(e,u));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==u)&&ky(e,o,r,u),_r=!1,p=e.memoizedState,o.state=p,Au(e,r,o,i);var w=e.memoizedState;l!==f||p!==w||Ut.current||_r?(typeof g=="function"&&($h(e,n,g,r),w=e.memoizedState),(c=_r||xy(e,n,c,r,p,w,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Hh(t,e,n,r,s,i)}function Hh(t,e,n,r,i,s){Zw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Iy(e,n,!1),rr(t,e,s);r=e.stateNode,CC.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ts(e,t.child,null,s),e.child=Ts(e,null,l,s)):xt(t,e,l,s),e.memoizedState=r.state,i&&Iy(e,n,!0),e.child}function eE(t){var e=t.stateNode;e.pendingContext?Ey(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ey(t,e.context,!1),fp(t,e.containerInfo)}function Fy(t,e,n,r,i){return Is(),ap(i),e.flags|=256,xt(t,e,n,r),e.child}var qh={dehydrated:null,treeContext:null,retryLane:0};function Kh(t){return{baseLanes:t,cachePool:null,transitions:null}}function tE(t,e,n){var r=e.pendingProps,i=De.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(De,i&1),t===null)return Bh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=_c(o,r,0,null),t=Ti(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Kh(n),e.memoizedState=qh,t):Ep(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return RC(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Mr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Mr(l,s):(s=Ti(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Kh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=qh,r}return s=t.child,t=s.sibling,r=Mr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ep(t,e){return e=_c({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cl(t,e,n,r){return r!==null&&ap(r),Ts(e,t.child,null,n),t=Ep(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Vd(Error(j(422))),Cl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=_c({mode:"visible",children:r.children},i,0,null),s=Ti(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ts(e,t.child,null,o),e.child.memoizedState=Kh(o),e.memoizedState=qh,s);if(!(e.mode&1))return Cl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(j(419)),r=Vd(s,r,void 0),Cl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ft||l){if(r=nt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,nr(t,i),An(r,t,i,-1))}return Rp(),r=Vd(Error(j(421))),Cl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=BC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,qt=Nr(i.nextSibling),Yt=e,xe=!0,En=null,t!==null&&(rn[sn++]=Kn,rn[sn++]=Qn,rn[sn++]=Ri,Kn=t.id,Qn=t.overflow,Ri=e),e=Ep(e,r.children),e.flags|=4096,e)}function Uy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jh(t.return,e,n)}function Ld(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function nE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(xt(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uy(t,n,e);else if(t.tag===19)Uy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(De,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Cu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ld(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ld(e,!0,n,null,s);break;case"together":Ld(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ql(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),bi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function PC(t,e,n){switch(e.tag){case 3:eE(e),Is();break;case 5:Pw(e);break;case 1:Bt(e.type)&&wu(e);break;case 4:fp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(Tu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?tE(t,e,n):(Se(De,De.current&1),t=rr(t,e,n),t!==null?t.sibling:null);Se(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,Jw(t,e,n)}return rr(t,e,n)}var rE,Qh,iE,sE;rE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qh=function(){};iE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,wi(Ln.current);var s=null;switch(n){case"input":i=yh(t,i),r=yh(t,r),s=[];break;case"select":i=Oe({},i,{value:void 0}),r=Oe({},r,{value:void 0}),s=[];break;case"textarea":i=wh(t,i),r=wh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=vu)}Ih(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Yo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Yo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ce("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};sE=function(t,e,n,r){n!==r&&(e.flags|=4)};function wo(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bC(t,e,n){var r=e.pendingProps;switch(op(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Bt(e.type)&&_u(),_t(e),null;case 3:return r=e.stateNode,Ss(),Pe(Ut),Pe(St),mp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,En!==null&&(rf(En),En=null))),Qh(t,e),_t(e),null;case 5:pp(e);var i=wi(la.current);if(n=e.type,t!==null&&e.stateNode!=null)iE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return _t(e),null}if(t=wi(Ln.current),Sl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[On]=e,r[oa]=s,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<Po.length;i++)Ce(Po[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Kg(r,s),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ce("invalid",r);break;case"textarea":Yg(r,s),Ce("invalid",r)}Ih(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Tl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Tl(r.textContent,l,t),i=["children",""+l]):Yo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":ml(r),Qg(r,s,!0);break;case"textarea":ml(r),Xg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=vu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=N0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[On]=e,t[oa]=r,rE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Th(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<Po.length;i++)Ce(Po[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":Kg(t,r),i=yh(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Oe({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":Yg(t,r),i=wh(t,r),Ce("invalid",t);break;default:i=r}Ih(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?L0(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&O0(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Xo(t,u):typeof u=="number"&&Xo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ce("scroll",t):u!=null&&Gf(t,s,u,o))}switch(n){case"input":ml(t),Qg(t,r,!1);break;case"textarea":ml(t),Xg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?us(t,!!r.multiple,s,!1):r.defaultValue!=null&&us(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=vu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)sE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=wi(la.current),wi(Ln.current),Sl(e)){if(r=e.stateNode,n=e.memoizedProps,r[On]=e,(s=r.nodeValue!==n)&&(t=Yt,t!==null))switch(t.tag){case 3:Tl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=e,e.stateNode=r}return _t(e),null;case 13:if(Pe(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&qt!==null&&e.mode&1&&!(e.flags&128))Tw(),Is(),e.flags|=98560,s=!1;else if(s=Sl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(j(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[On]=e}else Is(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),s=!1}else En!==null&&(rf(En),En=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Ye===0&&(Ye=3):Rp())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return Ss(),Qh(t,e),t===null&&ia(e.stateNode.containerInfo),_t(e),null;case 10:return cp(e.type._context),_t(e),null;case 17:return Bt(e.type)&&_u(),_t(e),null;case 19:if(Pe(De),s=e.memoizedState,s===null)return _t(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)wo(s,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cu(t),o!==null){for(e.flags|=128,wo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(De,De.current&1|2),e.child}t=t.sibling}s.tail!==null&&je()>Cs&&(e.flags|=128,r=!0,wo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Cu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!xe)return _t(e),null}else 2*je()-s.renderingStartTime>Cs&&n!==1073741824&&(e.flags|=128,r=!0,wo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=je(),e.sibling=null,n=De.current,Se(De,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return Cp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ht&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function xC(t,e){switch(op(e),e.tag){case 1:return Bt(e.type)&&_u(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ss(),Pe(Ut),Pe(St),mp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pp(e),null;case 13:if(Pe(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));Is()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(De),null;case 4:return Ss(),null;case 10:return cp(e.type._context),null;case 22:case 23:return Cp(),null;case 24:return null;default:return null}}var Rl=!1,It=!1,kC=typeof WeakSet=="function"?WeakSet:Set,K=null;function os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function Yh(t,e,n){try{n()}catch(r){Me(t,e,r)}}var By=!1;function DC(t,e){if(Nh=mu,t=cw(),ip(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++c===i&&(l=o),p===s&&++h===r&&(u=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oh={focusedElem:t,selectionRange:n},mu=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var C=w.memoizedProps,P=w.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?C:_n(e.type,C),P);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(k){Me(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return w=By,By=!1,w}function Uo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Yh(e,n,s)}i=i.next}while(i!==r)}}function yc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oE(t){var e=t.alternate;e!==null&&(t.alternate=null,oE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[oa],delete e[Mh],delete e[pC],delete e[mC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aE(t){return t.tag===5||t.tag===3||t.tag===4}function jy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vu));else if(r!==4&&(t=t.child,t!==null))for(Jh(t,e,n),t=t.sibling;t!==null;)Jh(t,e,n),t=t.sibling}function Zh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zh(t,e,n),t=t.sibling;t!==null;)Zh(t,e,n),t=t.sibling}var ot=null,wn=!1;function mr(t,e,n){for(n=n.child;n!==null;)lE(t,e,n),n=n.sibling}function lE(t,e,n){if(Vn&&typeof Vn.onCommitFiberUnmount=="function")try{Vn.onCommitFiberUnmount(uc,n)}catch{}switch(n.tag){case 5:It||os(n,e);case 6:var r=ot,i=wn;ot=null,mr(t,e,n),ot=r,wn=i,ot!==null&&(wn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(wn?(t=ot,n=n.stateNode,t.nodeType===8?bd(t.parentNode,n):t.nodeType===1&&bd(t,n),ta(t)):bd(ot,n.stateNode));break;case 4:r=ot,i=wn,ot=n.stateNode.containerInfo,wn=!0,mr(t,e,n),ot=r,wn=i;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Yh(n,e,o),i=i.next}while(i!==r)}mr(t,e,n);break;case 1:if(!It&&(os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Me(n,e,l)}mr(t,e,n);break;case 21:mr(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,mr(t,e,n),It=r):mr(t,e,n);break;default:mr(t,e,n)}}function $y(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kC),e.forEach(function(r){var i=jC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ot=l.stateNode,wn=!1;break e;case 3:ot=l.stateNode.containerInfo,wn=!0;break e;case 4:ot=l.stateNode.containerInfo,wn=!0;break e}l=l.return}if(ot===null)throw Error(j(160));lE(s,o,i),ot=null,wn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Me(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uE(e,t),e=e.sibling}function uE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vn(e,t),xn(t),r&4){try{Uo(3,t,t.return),yc(3,t)}catch(C){Me(t,t.return,C)}try{Uo(5,t,t.return)}catch(C){Me(t,t.return,C)}}break;case 1:vn(e,t),xn(t),r&512&&n!==null&&os(n,n.return);break;case 5:if(vn(e,t),xn(t),r&512&&n!==null&&os(n,n.return),t.flags&32){var i=t.stateNode;try{Xo(i,"")}catch(C){Me(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&k0(i,s),Th(l,o);var c=Th(l,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?L0(i,f):h==="dangerouslySetInnerHTML"?O0(i,f):h==="children"?Xo(i,f):Gf(i,h,f,c)}switch(l){case"input":vh(i,s);break;case"textarea":D0(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?us(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?us(i,!!s.multiple,s.defaultValue,!0):us(i,!!s.multiple,s.multiple?[]:"",!1))}i[oa]=s}catch(C){Me(t,t.return,C)}}break;case 6:if(vn(e,t),xn(t),r&4){if(t.stateNode===null)throw Error(j(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){Me(t,t.return,C)}}break;case 3:if(vn(e,t),xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ta(e.containerInfo)}catch(C){Me(t,t.return,C)}break;case 4:vn(e,t),xn(t);break;case 13:vn(e,t),xn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Sp=je())),r&4&&$y(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(It=(c=It)||h,vn(e,t),It=c):vn(e,t),xn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(f=K=h;K!==null;){switch(p=K,g=p.child,p.tag){case 0:case 11:case 14:case 15:Uo(4,p,p.return);break;case 1:os(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(C){Me(r,n,C)}}break;case 5:os(p,p.return);break;case 22:if(p.memoizedState!==null){Wy(f);continue}}g!==null?(g.return=p,K=g):Wy(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=V0("display",o))}catch(C){Me(t,t.return,C)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(C){Me(t,t.return,C)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vn(e,t),xn(t),r&4&&$y(t);break;case 21:break;default:vn(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aE(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Xo(i,""),r.flags&=-33);var s=jy(t);Zh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=jy(t);Jh(t,l,o);break;default:throw Error(j(161))}}catch(u){Me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NC(t,e,n){K=t,cE(t)}function cE(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Rl;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||It;l=Rl;var c=It;if(Rl=o,(It=u)&&!c)for(K=i;K!==null;)o=K,u=o.child,o.tag===22&&o.memoizedState!==null?Gy(i):u!==null?(u.return=o,K=u):Gy(i);for(;s!==null;)K=s,cE(s),s=s.sibling;K=i,Rl=l,It=c}zy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):zy(t)}}function zy(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||yc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ry(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ry(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&ta(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}It||e.flags&512&&Xh(e)}catch(p){Me(e,e.return,p)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Wy(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Gy(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yc(4,e)}catch(u){Me(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Me(e,i,u)}}var s=e.return;try{Xh(e)}catch(u){Me(e,s,u)}break;case 5:var o=e.return;try{Xh(e)}catch(u){Me(e,o,u)}}}catch(u){Me(e,e.return,u)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var OC=Math.ceil,bu=cr.ReactCurrentDispatcher,Ip=cr.ReactCurrentOwner,cn=cr.ReactCurrentBatchConfig,fe=0,nt=null,We=null,ct=0,Ht=0,as=ri(0),Ye=0,ha=null,bi=0,vc=0,Tp=0,Bo=null,Lt=null,Sp=0,Cs=1/0,Hn=null,xu=!1,ef=null,Vr=null,Pl=!1,Pr=null,ku=0,jo=0,tf=null,Yl=-1,Xl=0;function kt(){return fe&6?je():Yl!==-1?Yl:Yl=je()}function Lr(t){return t.mode&1?fe&2&&ct!==0?ct&-ct:yC.transition!==null?(Xl===0&&(Xl=K0()),Xl):(t=_e,t!==0||(t=window.event,t=t===void 0?16:tw(t.type)),t):1}function An(t,e,n,r){if(50<jo)throw jo=0,tf=null,Error(j(185));xa(t,n,r),(!(fe&2)||t!==nt)&&(t===nt&&(!(fe&2)&&(vc|=n),Ye===4&&Ir(t,ct)),jt(t,r),n===1&&fe===0&&!(e.mode&1)&&(Cs=je()+500,pc&&ii()))}function jt(t,e){var n=t.callbackNode;yA(t,e);var r=pu(t,t===nt?ct:0);if(r===0)n!==null&&ey(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ey(n),e===1)t.tag===0?gC(Hy.bind(null,t)):ww(Hy.bind(null,t)),hC(function(){!(fe&6)&&ii()}),n=null;else{switch(Q0(r)){case 1:n=Yf;break;case 4:n=H0;break;case 16:n=fu;break;case 536870912:n=q0;break;default:n=fu}n=vE(n,dE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dE(t,e){if(Yl=-1,Xl=0,fe&6)throw Error(j(327));var n=t.callbackNode;if(ps()&&t.callbackNode!==n)return null;var r=pu(t,t===nt?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Du(t,r);else{e=r;var i=fe;fe|=2;var s=fE();(nt!==t||ct!==e)&&(Hn=null,Cs=je()+500,Ii(t,e));do try{MC();break}catch(l){hE(t,l)}while(1);up(),bu.current=s,fe=i,We!==null?e=0:(nt=null,ct=0,e=Ye)}if(e!==0){if(e===2&&(i=Ph(t),i!==0&&(r=i,e=nf(t,i))),e===1)throw n=ha,Ii(t,0),Ir(t,r),jt(t,je()),n;if(e===6)Ir(t,r);else{if(i=t.current.alternate,!(r&30)&&!VC(i)&&(e=Du(t,r),e===2&&(s=Ph(t),s!==0&&(r=s,e=nf(t,s))),e===1))throw n=ha,Ii(t,0),Ir(t,r),jt(t,je()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:mi(t,Lt,Hn);break;case 3:if(Ir(t,r),(r&130023424)===r&&(e=Sp+500-je(),10<e)){if(pu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){kt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Lh(mi.bind(null,t,Lt,Hn),e);break}mi(t,Lt,Hn);break;case 4:if(Ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Sn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OC(r/1960))-r,10<r){t.timeoutHandle=Lh(mi.bind(null,t,Lt,Hn),r);break}mi(t,Lt,Hn);break;case 5:mi(t,Lt,Hn);break;default:throw Error(j(329))}}}return jt(t,je()),t.callbackNode===n?dE.bind(null,t):null}function nf(t,e){var n=Bo;return t.current.memoizedState.isDehydrated&&(Ii(t,e).flags|=256),t=Du(t,e),t!==2&&(e=Lt,Lt=n,e!==null&&rf(e)),t}function rf(t){Lt===null?Lt=t:Lt.push.apply(Lt,t)}function VC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Rn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ir(t,e){for(e&=~Tp,e&=~vc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sn(e),r=1<<n;t[n]=-1,e&=~r}}function Hy(t){if(fe&6)throw Error(j(327));ps();var e=pu(t,0);if(!(e&1))return jt(t,je()),null;var n=Du(t,e);if(t.tag!==0&&n===2){var r=Ph(t);r!==0&&(e=r,n=nf(t,r))}if(n===1)throw n=ha,Ii(t,0),Ir(t,e),jt(t,je()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mi(t,Lt,Hn),jt(t,je()),null}function Ap(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Cs=je()+500,pc&&ii())}}function xi(t){Pr!==null&&Pr.tag===0&&!(fe&6)&&ps();var e=fe;fe|=1;var n=cn.transition,r=_e;try{if(cn.transition=null,_e=1,t)return t()}finally{_e=r,cn.transition=n,fe=e,!(fe&6)&&ii()}}function Cp(){Ht=as.current,Pe(as)}function Ii(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dC(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(op(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_u();break;case 3:Ss(),Pe(Ut),Pe(St),mp();break;case 5:pp(r);break;case 4:Ss();break;case 13:Pe(De);break;case 19:Pe(De);break;case 10:cp(r.type._context);break;case 22:case 23:Cp()}n=n.return}if(nt=t,We=t=Mr(t.current,null),ct=Ht=e,Ye=0,ha=null,Tp=vc=bi=0,Lt=Bo=null,_i!==null){for(e=0;e<_i.length;e++)if(n=_i[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}_i=null}return t}function hE(t,e){do{var n=We;try{if(up(),ql.current=Pu,Ru){for(var r=Ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ru=!1}if(Pi=0,tt=Qe=Ne=null,Fo=!1,ua=0,Ip.current=null,n===null||n.return===null){Ye=1,ha=e,We=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=ct,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Ny(o);if(g!==null){g.flags&=-257,Oy(g,o,l,s,e),g.mode&1&&Dy(s,c,e),e=g,u=c;var w=e.updateQueue;if(w===null){var C=new Set;C.add(u),e.updateQueue=C}else w.add(u);break e}else{if(!(e&1)){Dy(s,c,e),Rp();break e}u=Error(j(426))}}else if(xe&&l.mode&1){var P=Ny(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Oy(P,o,l,s,e),ap(As(u,l));break e}}s=u=As(u,l),Ye!==4&&(Ye=2),Bo===null?Bo=[s]:Bo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=Qw(s,u,e);Cy(s,E);break e;case 1:l=u;var _=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Vr===null||!Vr.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=Yw(s,l,e);Cy(s,k);break e}}s=s.return}while(s!==null)}mE(n)}catch(L){e=L,We===n&&n!==null&&(We=n=n.return);continue}break}while(1)}function fE(){var t=bu.current;return bu.current=Pu,t===null?Pu:t}function Rp(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),nt===null||!(bi&268435455)&&!(vc&268435455)||Ir(nt,ct)}function Du(t,e){var n=fe;fe|=2;var r=fE();(nt!==t||ct!==e)&&(Hn=null,Ii(t,e));do try{LC();break}catch(i){hE(t,i)}while(1);if(up(),fe=n,bu.current=r,We!==null)throw Error(j(261));return nt=null,ct=0,Ye}function LC(){for(;We!==null;)pE(We)}function MC(){for(;We!==null&&!lA();)pE(We)}function pE(t){var e=yE(t.alternate,t,Ht);t.memoizedProps=t.pendingProps,e===null?mE(t):We=e,Ip.current=null}function mE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xC(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,We=null;return}}else if(n=bC(n,e,Ht),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Ye===0&&(Ye=5)}function mi(t,e,n){var r=_e,i=cn.transition;try{cn.transition=null,_e=1,FC(t,e,n,r)}finally{cn.transition=i,_e=r}return null}function FC(t,e,n,r){do ps();while(Pr!==null);if(fe&6)throw Error(j(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(vA(t,s),t===nt&&(We=nt=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pl||(Pl=!0,vE(fu,function(){return ps(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=cn.transition,cn.transition=null;var o=_e;_e=1;var l=fe;fe|=4,Ip.current=null,DC(t,n),uE(n,t),iC(Oh),mu=!!Nh,Oh=Nh=null,t.current=n,NC(n),uA(),fe=l,_e=o,cn.transition=s}else t.current=n;if(Pl&&(Pl=!1,Pr=t,ku=i),s=t.pendingLanes,s===0&&(Vr=null),hA(n.stateNode),jt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xu)throw xu=!1,t=ef,ef=null,t;return ku&1&&t.tag!==0&&ps(),s=t.pendingLanes,s&1?t===tf?jo++:(jo=0,tf=t):jo=0,ii(),null}function ps(){if(Pr!==null){var t=Q0(ku),e=cn.transition,n=_e;try{if(cn.transition=null,_e=16>t?16:t,Pr===null)var r=!1;else{if(t=Pr,Pr=null,ku=0,fe&6)throw Error(j(331));var i=fe;for(fe|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(K=c;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:Uo(8,h,s)}var f=h.child;if(f!==null)f.return=h,K=f;else for(;K!==null;){h=K;var p=h.sibling,g=h.return;if(oE(h),h===c){K=null;break}if(p!==null){p.return=g,K=p;break}K=g}}}var w=s.alternate;if(w!==null){var C=w.child;if(C!==null){w.child=null;do{var P=C.sibling;C.sibling=null,C=P}while(C!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Uo(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,K=E;break e}K=s.return}}var _=t.current;for(K=_;K!==null;){o=K;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,K=T;else e:for(o=_;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yc(9,l)}}catch(L){Me(l,l.return,L)}if(l===o){K=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,K=k;break e}K=l.return}}if(fe=i,ii(),Vn&&typeof Vn.onPostCommitFiberRoot=="function")try{Vn.onPostCommitFiberRoot(uc,t)}catch{}r=!0}return r}finally{_e=n,cn.transition=e}}return!1}function qy(t,e,n){e=As(n,e),e=Qw(t,e,1),t=Or(t,e,1),e=kt(),t!==null&&(xa(t,1,e),jt(t,e))}function Me(t,e,n){if(t.tag===3)qy(t,t,n);else for(;e!==null;){if(e.tag===3){qy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vr===null||!Vr.has(r))){t=As(n,t),t=Yw(e,t,1),e=Or(e,t,1),t=kt(),e!==null&&(xa(e,1,t),jt(e,t));break}}e=e.return}}function UC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=kt(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(ct&n)===n&&(Ye===4||Ye===3&&(ct&130023424)===ct&&500>je()-Sp?Ii(t,0):Tp|=n),jt(t,e)}function gE(t,e){e===0&&(t.mode&1?(e=vl,vl<<=1,!(vl&130023424)&&(vl=4194304)):e=1);var n=kt();t=nr(t,e),t!==null&&(xa(t,e,n),jt(t,n))}function BC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gE(t,n)}function jC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),gE(t,n)}var yE;yE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ut.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,PC(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,xe&&e.flags&1048576&&Ew(e,Iu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ql(t,e),t=e.pendingProps;var i=Es(e,St.current);fs(e,n),i=yp(null,e,r,t,i,n);var s=vp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bt(r)?(s=!0,wu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hp(e),i.updater=gc,e.stateNode=i,i._reactInternals=e,zh(e,r,t,n),e=Hh(null,e,r,!0,s,n)):(e.tag=0,xe&&s&&sp(e),xt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ql(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=zC(r),t=_n(r,t),i){case 0:e=Gh(null,e,r,t,n);break e;case 1:e=My(null,e,r,t,n);break e;case 11:e=Vy(null,e,r,t,n);break e;case 14:e=Ly(null,e,r,_n(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Gh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),My(t,e,r,i,n);case 3:e:{if(eE(e),t===null)throw Error(j(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Rw(t,e),Au(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=As(Error(j(423)),e),e=Fy(t,e,r,n,i);break e}else if(r!==i){i=As(Error(j(424)),e),e=Fy(t,e,r,n,i);break e}else for(qt=Nr(e.stateNode.containerInfo.firstChild),Yt=e,xe=!0,En=null,n=Aw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Is(),r===i){e=rr(t,e,n);break e}xt(t,e,r,n)}e=e.child}return e;case 5:return Pw(e),t===null&&Bh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Vh(r,i)?o=null:s!==null&&Vh(r,s)&&(e.flags|=32),Zw(t,e),xt(t,e,o,n),e.child;case 6:return t===null&&Bh(e),null;case 13:return tE(t,e,n);case 4:return fp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ts(e,null,r,n):xt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Vy(t,e,r,i,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Se(Tu,r._currentValue),r._currentValue=o,s!==null)if(Rn(s.value,o)){if(s.children===i.children&&!Ut.current){e=rr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Jn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),jh(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(j(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),jh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fs(e,n),i=hn(i),r=r(i),e.flags|=1,xt(t,e,r,n),e.child;case 14:return r=e.type,i=_n(r,e.pendingProps),i=_n(r.type,i),Ly(t,e,r,i,n);case 15:return Xw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Ql(t,e),e.tag=1,Bt(r)?(t=!0,wu(e)):t=!1,fs(e,n),Kw(e,r,i),zh(e,r,i,n),Hh(null,e,r,!0,t,n);case 19:return nE(t,e,n);case 22:return Jw(t,e,n)}throw Error(j(156,e.tag))};function vE(t,e){return G0(t,e)}function $C(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(t,e,n,r){return new $C(t,e,n,r)}function Pp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zC(t){if(typeof t=="function")return Pp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qf)return 11;if(t===Kf)return 14}return 2}function Mr(t,e){var n=t.alternate;return n===null?(n=ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Pp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xi:return Ti(n.children,i,s,e);case Hf:o=8,i|=8;break;case fh:return t=ln(12,n,e,i|2),t.elementType=fh,t.lanes=s,t;case ph:return t=ln(13,n,e,i),t.elementType=ph,t.lanes=s,t;case mh:return t=ln(19,n,e,i),t.elementType=mh,t.lanes=s,t;case P0:return _c(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C0:o=10;break e;case R0:o=9;break e;case qf:o=11;break e;case Kf:o=14;break e;case vr:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=ln(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ti(t,e,n,r){return t=ln(7,t,r,e),t.lanes=n,t}function _c(t,e,n,r){return t=ln(22,t,r,e),t.elementType=P0,t.lanes=n,t.stateNode={isHidden:!1},t}function Md(t,e,n){return t=ln(6,t,null,e),t.lanes=n,t}function Fd(t,e,n){return e=ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function WC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vd(0),this.expirationTimes=vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bp(t,e,n,r,i,s,o,l,u){return t=new WC(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ln(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hp(s),t}function GC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _E(t){if(!t)return qr;t=t._reactInternals;e:{if(Mi(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(Bt(n))return _w(t,n,e)}return e}function wE(t,e,n,r,i,s,o,l,u){return t=bp(n,r,!0,t,i,s,o,l,u),t.context=_E(null),n=t.current,r=kt(),i=Lr(n),s=Jn(r,i),s.callback=e??null,Or(n,s,i),t.current.lanes=i,xa(t,i,r),jt(t,r),t}function wc(t,e,n,r){var i=e.current,s=kt(),o=Lr(i);return n=_E(n),e.context===null?e.context=n:e.pendingContext=n,e=Jn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Or(i,e,o),t!==null&&(An(t,i,o,s),Hl(t,i,o)),o}function Nu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ky(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xp(t,e){Ky(t,e),(t=t.alternate)&&Ky(t,e)}function HC(){return null}var EE=typeof reportError=="function"?reportError:function(t){console.error(t)};function kp(t){this._internalRoot=t}Ec.prototype.render=kp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));wc(t,e,null,null)};Ec.prototype.unmount=kp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xi(function(){wc(null,t,null,null)}),e[tr]=null}};function Ec(t){this._internalRoot=t}Ec.prototype.unstable_scheduleHydration=function(t){if(t){var e=J0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Er.length&&e!==0&&e<Er[n].priority;n++);Er.splice(n,0,t),n===0&&ew(t)}};function Dp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ic(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qy(){}function qC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Nu(o);s.call(c)}}var o=wE(e,r,t,0,null,!1,!1,"",Qy);return t._reactRootContainer=o,t[tr]=o.current,ia(t.nodeType===8?t.parentNode:t),xi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=Nu(u);l.call(c)}}var u=bp(t,0,!1,null,null,!1,!1,"",Qy);return t._reactRootContainer=u,t[tr]=u.current,ia(t.nodeType===8?t.parentNode:t),xi(function(){wc(e,u,n,r)}),u}function Tc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Nu(o);l.call(u)}}wc(e,o,t,i)}else o=qC(n,e,t,i,r);return Nu(o)}Y0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ro(e.pendingLanes);n!==0&&(Xf(e,n|1),jt(e,je()),!(fe&6)&&(Cs=je()+500,ii()))}break;case 13:xi(function(){var r=nr(t,1);if(r!==null){var i=kt();An(r,t,1,i)}}),xp(t,1)}};Jf=function(t){if(t.tag===13){var e=nr(t,134217728);if(e!==null){var n=kt();An(e,t,134217728,n)}xp(t,134217728)}};X0=function(t){if(t.tag===13){var e=Lr(t),n=nr(t,e);if(n!==null){var r=kt();An(n,t,e,r)}xp(t,e)}};J0=function(){return _e};Z0=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};Ah=function(t,e,n){switch(e){case"input":if(vh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=fc(r);if(!i)throw Error(j(90));x0(r),vh(r,i)}}}break;case"textarea":D0(t,n);break;case"select":e=n.value,e!=null&&us(t,!!n.multiple,e,!1)}};U0=Ap;B0=xi;var KC={usingClientEntryPoint:!1,Events:[Da,ts,fc,M0,F0,Ap]},Eo={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QC={bundleType:Eo.bundleType,version:Eo.version,rendererPackageName:Eo.rendererPackageName,rendererConfig:Eo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=z0(t),t===null?null:t.stateNode},findFiberByHostInstance:Eo.findFiberByHostInstance||HC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{uc=bl.inject(QC),Vn=bl}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KC;en.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dp(e))throw Error(j(200));return GC(t,e,null,n)};en.createRoot=function(t,e){if(!Dp(t))throw Error(j(299));var n=!1,r="",i=EE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bp(t,1,!1,null,null,n,!1,r,i),t[tr]=e.current,ia(t.nodeType===8?t.parentNode:t),new kp(e)};en.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=z0(e),t=t===null?null:t.stateNode,t};en.flushSync=function(t){return xi(t)};en.hydrate=function(t,e,n){if(!Ic(e))throw Error(j(200));return Tc(null,t,e,!0,n)};en.hydrateRoot=function(t,e,n){if(!Dp(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=EE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wE(e,null,t,1,n??null,i,!1,s,o),t[tr]=e.current,ia(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ec(e)};en.render=function(t,e,n){if(!Ic(e))throw Error(j(200));return Tc(null,t,e,!1,n)};en.unmountComponentAtNode=function(t){if(!Ic(t))throw Error(j(40));return t._reactRootContainer?(xi(function(){Tc(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};en.unstable_batchedUpdates=Ap;en.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ic(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return Tc(t,e,n,!1,r)};en.version="18.3.1-next-f1338f8080-20240426";function IE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IE)}catch(t){console.error(t)}}IE(),I0.exports=en;var Sc=I0.exports;const YC=c0(Sc);var Yy=Sc;dh.createRoot=Yy.createRoot,dh.hydrateRoot=Yy.hydrateRoot;const XC=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},JC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},SE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,f=(s&3)<<4|l>>4;let p=(l&15)<<2|c>>6,g=c&63;u||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||f==null)throw new ZC;const p=s<<2|l>>4;if(r.push(p),c!==64){const g=l<<4&240|c>>2;if(r.push(g),f!==64){const w=c<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eR=function(t){const e=TE(t);return SE.encodeByteArray(e,!0)},Ou=function(t){return eR(t).replace(/\./g,"")},AE=function(t){try{return SE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=()=>tR().__FIREBASE_DEFAULTS__,rR=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&AE(t[1]);return e&&JSON.parse(e)},Ac=()=>{try{return XC()||nR()||rR()||iR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CE=t=>{var e,n;return(n=(e=Ac())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},sR=t=>{const e=CE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},RE=()=>{var t;return(t=Ac())==null?void 0:t.config},PE=t=>{var e;return(e=Ac())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},l="";return[Ou(JSON.stringify(n)),Ou(JSON.stringify(o)),l].join(".")}const $o={};function lR(){const t={prod:[],emulator:[]};for(const e of Object.keys($o))$o[e]?t.emulator.push(e):t.prod.push(e);return t}function uR(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Xy=!1;function xE(t,e){if(typeof window>"u"||typeof document>"u"||!js(window.location.host)||$o[t]===e||$o[t]||Xy)return;$o[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=lR().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Xy=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=uR(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),C=n("learnmore"),P=document.getElementById(C)||document.createElement("a"),E=n("preprendIcon"),_=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const T=p.element;l(T),h(P,C);const k=c();u(_,E),T.append(_,w,P,k),document.body.appendChild(T)}s?(w.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function dR(){var e;const t=(e=Ac())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mR(){const t=At();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gR(){return!dR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yR(){try{return typeof indexedDB=="object"}catch{return!1}}function vR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="FirebaseError";class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_R,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oa.prototype.create)}}class Oa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?wR(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new dr(i,l,r)}}function wR(t,e){return t.replace(ER,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ER=/\{\$([^}]+)}/g;function IR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ki(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Jy(s)&&Jy(o)){if(!ki(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Jy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function TR(t,e){const n=new SR(t,e);return n.subscribe.bind(n)}class SR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");AR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ud),i.error===void 0&&(i.error=Ud),i.complete===void 0&&(i.complete=Ud);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ud(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t){return t&&t._delegate?t._delegate:t}class Di{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CR=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PR(e))try{this.getOrInitializeService({instanceIdentifier:gi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gi){return this.instances.has(e)}getOptions(e=gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gi){return this.component?this.component.multipleInstances?e:gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function RR(t){return t===gi?void 0:t}function PR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const xR={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},kR=oe.INFO,DR={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},NR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=DR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Np{constructor(e){this.name=e,this._logLevel=kR,this._logHandler=NR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const OR=(t,e)=>e.some(n=>t instanceof n);let Zy,ev;function VR(){return Zy||(Zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LR(){return ev||(ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kE=new WeakMap,sf=new WeakMap,DE=new WeakMap,Bd=new WeakMap,Op=new WeakMap;function MR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Fr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kE.set(n,t)}).catch(()=>{}),Op.set(e,t),e}function FR(t){if(sf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});sf.set(t,e)}let of={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||DE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UR(t){of=t(of)}function BR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jd(this),e,...n);return DE.set(r,e.sort?e.sort():[e]),Fr(r)}:LR().includes(t)?function(...e){return t.apply(jd(this),e),Fr(kE.get(this))}:function(...e){return Fr(t.apply(jd(this),e))}}function jR(t){return typeof t=="function"?BR(t):(t instanceof IDBTransaction&&FR(t),OR(t,VR())?new Proxy(t,of):t)}function Fr(t){if(t instanceof IDBRequest)return MR(t);if(Bd.has(t))return Bd.get(t);const e=jR(t);return e!==t&&(Bd.set(t,e),Op.set(e,t)),e}const jd=t=>Op.get(t);function $R(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Fr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Fr(o.result),u.oldVersion,u.newVersion,Fr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const zR=["get","getKey","getAll","getAllKeys","count"],WR=["put","add","delete","clear"],$d=new Map;function tv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($d.get(e))return $d.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=WR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zR.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return $d.set(e,s),s}UR(t=>({...t,get:(e,n,r)=>tv(e,n)||t.get(e,n,r),has:(e,n)=>!!tv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const af="@firebase/app",nv="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new Np("@firebase/app"),qR="@firebase/app-compat",KR="@firebase/analytics-compat",QR="@firebase/analytics",YR="@firebase/app-check-compat",XR="@firebase/app-check",JR="@firebase/auth",ZR="@firebase/auth-compat",eP="@firebase/database",tP="@firebase/data-connect",nP="@firebase/database-compat",rP="@firebase/functions",iP="@firebase/functions-compat",sP="@firebase/installations",oP="@firebase/installations-compat",aP="@firebase/messaging",lP="@firebase/messaging-compat",uP="@firebase/performance",cP="@firebase/performance-compat",dP="@firebase/remote-config",hP="@firebase/remote-config-compat",fP="@firebase/storage",pP="@firebase/storage-compat",mP="@firebase/firestore",gP="@firebase/ai",yP="@firebase/firestore-compat",vP="firebase",_P="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="[DEFAULT]",wP={[af]:"fire-core",[qR]:"fire-core-compat",[QR]:"fire-analytics",[KR]:"fire-analytics-compat",[XR]:"fire-app-check",[YR]:"fire-app-check-compat",[JR]:"fire-auth",[ZR]:"fire-auth-compat",[eP]:"fire-rtdb",[tP]:"fire-data-connect",[nP]:"fire-rtdb-compat",[rP]:"fire-fn",[iP]:"fire-fn-compat",[sP]:"fire-iid",[oP]:"fire-iid-compat",[aP]:"fire-fcm",[lP]:"fire-fcm-compat",[uP]:"fire-perf",[cP]:"fire-perf-compat",[dP]:"fire-rc",[hP]:"fire-rc-compat",[fP]:"fire-gcs",[pP]:"fire-gcs-compat",[mP]:"fire-fst",[yP]:"fire-fst-compat",[gP]:"fire-vertex","fire-js":"fire-js",[vP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=new Map,EP=new Map,uf=new Map;function rv(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rs(t){const e=t.name;if(uf.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;uf.set(e,t);for(const n of Vu.values())rv(n,t);for(const n of EP.values())rv(n,t);return!0}function Vp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function on(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ur=new Oa("app","Firebase",IP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=_P;function NE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:lf,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ur.create("bad-app-name",{appName:String(i)});if(n||(n=RE()),!n)throw Ur.create("no-options");const s=Vu.get(i);if(s){if(ki(n,s.options)&&ki(r,s.config))return s;throw Ur.create("duplicate-app",{appName:i})}const o=new bR(i);for(const u of uf.values())o.addComponent(u);const l=new TP(n,r,o);return Vu.set(i,l),l}function OE(t=lf){const e=Vu.get(t);if(!e&&t===lf&&RE())return NE();if(!e)throw Ur.create("no-app",{appName:t});return e}function Br(t,e,n){let r=wP[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(o.join(" "));return}Rs(new Di(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP="firebase-heartbeat-database",AP=1,fa="firebase-heartbeat-store";let zd=null;function VE(){return zd||(zd=$R(SP,AP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ur.create("idb-open",{originalErrorMessage:t.message})})),zd}async function CP(t){try{const n=(await VE()).transaction(fa),r=await n.objectStore(fa).get(LE(t));return await n.done,r}catch(e){if(e instanceof dr)ir.warn(e.message);else{const n=Ur.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}async function iv(t,e){try{const r=(await VE()).transaction(fa,"readwrite");await r.objectStore(fa).put(e,LE(t)),await r.done}catch(n){if(n instanceof dr)ir.warn(n.message);else{const r=Ur.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ir.warn(r.message)}}}function LE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=1024,PP=30;class bP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=sv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>PP){const o=DP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sv(),{heartbeatsToSend:r,unsentEntries:i}=xP(this._heartbeatsCache.heartbeats),s=Ou(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ir.warn(n),""}}}function sv(){return new Date().toISOString().substring(0,10)}function xP(t,e=RP){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ov(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ov(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yR()?vR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ov(t){return Ou(JSON.stringify({version:2,heartbeats:t})).length}function DP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t){Rs(new Di("platform-logger",e=>new GR(e),"PRIVATE")),Rs(new Di("heartbeat",e=>new bP(e),"PRIVATE")),Br(af,nv,t),Br(af,nv,"esm2020"),Br("fire-js","")}NP("");var OP="firebase",VP="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(OP,VP,"app");function ME(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LP=ME,FE=new Oa("auth","Firebase",ME());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=new Np("@firebase/auth");function MP(t,...e){Lu.logLevel<=oe.WARN&&Lu.warn(`Auth (${$s}): ${t}`,...e)}function Zl(t,...e){Lu.logLevel<=oe.ERROR&&Lu.error(`Auth (${$s}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,...e){throw Lp(t,...e)}function Mn(t,...e){return Lp(t,...e)}function UE(t,e,n){const r={...LP(),[e]:n};return new Oa("auth","Firebase",r).create(e,{appName:t.name})}function Zn(t){return UE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return FE.create(t,...e)}function te(t,e,...n){if(!t)throw Lp(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zl(e),new Error(e)}function or(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function FP(){return av()==="http:"||av()==="https:"}function av(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FP()||fR()||"connection"in navigator)?navigator.onLine:!0}function BP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n){this.shortDelay=e,this.longDelay=n,or(n>e,"Short delay should be less than long delay!"),this.isMobile=cR()||pR()}get(){return UP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t,e){or(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zP=new La(3e4,6e4);function Ma(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function zs(t,e,n,r,i={}){return jE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Va({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...s};return hR()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&js(t.emulatorConfig.host)&&(c.credentials="include"),BE.fetch()(await $E(t,t.config.apiHost,n,l),c)})}async function jE(t,e,n){t._canInitEmulator=!1;const r={...jP,...e};try{const i=new WP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw xl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw xl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw xl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw UE(t,h,c);sr(t,h)}}catch(i){if(i instanceof dr)throw i;sr(t,"network-request-failed",{message:String(i)})}}async function Fp(t,e,n,r,i={}){const s=await zs(t,e,n,r,i);return"mfaPendingCredential"in s&&sr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function $E(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Mp(t.config,i):`${t.config.apiScheme}://${i}`;return $P.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class WP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Mn(this.auth,"network-request-failed")),zP.get())})}}function xl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Mn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(t,e){return zs(t,"POST","/v1/accounts:delete",e)}async function Mu(t,e){return zs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HP(t,e=!1){const n=ht(t),r=await n.getIdToken(e),i=Up(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:zo(Wd(i.auth_time)),issuedAtTime:zo(Wd(i.iat)),expirationTime:zo(Wd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Wd(t){return Number(t)*1e3}function Up(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zl("JWT malformed, contained fewer than 3 sections"),null;try{const i=AE(n);return i?JSON.parse(i):(Zl("Failed to decode base64 JWT payload"),null)}catch(i){return Zl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function lv(t){const e=Up(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dr&&qP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function qP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zo(this.lastLoginAt),this.creationTime=zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fu(t){var f;const e=t.auth,n=await t.getIdToken(),r=await pa(t,Mu(e,{idToken:n}));te(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?zE(i.providerUserInfo):[],o=YP(t.providerData,s),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),c=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new df(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function QP(t){const e=ht(t);await Fu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function zE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XP(t,e){const n=await jE(t,{},async()=>{const r=Va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await $E(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&js(t.emulatorConfig.host)&&(u.credentials="include"),BE.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function JP(t,e){return zs(t,"POST","/v2/accounts:revokeToken",Ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=lv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await XP(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ms;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ms,this.toJSON())}_performRefresh(){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class In{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new KP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new df(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await pa(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HP(this,e)}reload(){return QP(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new In({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(on(this.auth.app))return Promise.reject(Zn(this.auth));const e=await this.getIdToken();return await pa(this,GP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:w,stsTokenManager:C}=n;te(f&&C,e,"internal-error");const P=ms.fromJSON(this.name,C);te(typeof f=="string",e,"internal-error"),gr(r,e.name),gr(i,e.name),te(typeof p=="boolean",e,"internal-error"),te(typeof g=="boolean",e,"internal-error"),gr(s,e.name),gr(o,e.name),gr(l,e.name),gr(u,e.name),gr(c,e.name),gr(h,e.name);const E=new In({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:P,createdAt:c,lastLoginAt:h});return w&&Array.isArray(w)&&(E.providerData=w.map(_=>({..._}))),u&&(E._redirectEventId=u),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new ms;i.updateFromServerResponse(n);const s=new In({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Fu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];te(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?zE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new ms;l.updateFromIdToken(r);const u=new In({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new df(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=new Map;function Xn(t){or(t instanceof Function,"Expected a class definition");let e=uv.get(t);return e?(or(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WE.type="NONE";const cv=WE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t,e,n){return`firebase:${t}:${e}:${n}`}class gs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=eu(this.userKey,i.apiKey,s),this.fullPersistenceKey=eu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mu(this.auth,{idToken:e}).catch(()=>{});return n?In._fromGetAccountInfoResponse(this.auth,n,e):null}return In._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gs(Xn(cv),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Xn(cv);const o=eu(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const h=await c._get(o);if(h){let f;if(typeof h=="string"){const p=await Mu(e,{idToken:h}).catch(()=>{});if(!p)break;f=await In._fromGetAccountInfoResponse(e,p,h)}else f=In._fromJSON(e,h);c!==s&&(l=f),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new gs(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new gs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(GE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YE(e))return"Blackberry";if(XE(e))return"Webos";if(HE(e))return"Safari";if((e.includes("chrome/")||qE(e))&&!e.includes("edge/"))return"Chrome";if(QE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function GE(t=At()){return/firefox\//i.test(t)}function HE(t=At()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qE(t=At()){return/crios\//i.test(t)}function KE(t=At()){return/iemobile/i.test(t)}function QE(t=At()){return/android/i.test(t)}function YE(t=At()){return/blackberry/i.test(t)}function XE(t=At()){return/webos/i.test(t)}function Bp(t=At()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZP(t=At()){var e;return Bp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function eb(){return mR()&&document.documentMode===10}function JE(t=At()){return Bp(t)||QE(t)||XE(t)||YE(t)||/windows phone/i.test(t)||KE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t,e=[]){let n;switch(t){case"Browser":n=dv(At());break;case"Worker":n=`${dv(At())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$s}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(t,e={}){return zs(t,"GET","/v2/passwordPolicy",Ma(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=6;class ib{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rb,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hv(this),this.idTokenSubscription=new hv(this),this.beforeStateQueue=new tb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await gs.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mu(this,{idToken:e}),r=await In._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(on(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(on(this.app))return Promise.reject(Zn(this));const n=e?ht(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return on(this.app)?Promise.reject(Zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return on(this.app)?Promise.reject(Zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nb(this),n=new ib(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Oa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await JP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await gs.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(on(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&MP(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Fa(t){return ht(t)}class hv{constructor(e){this.auth=e,this.observer=null,this.addObserver=TR(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ob(t){jp=t}function ab(t){return jp.loadJS(t)}function lb(){return jp.gapiScript}function ub(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t,e){const n=Vp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ki(s,e??{}))return i;sr(i,"already-initialized")}return n.initialize({options:e})}function db(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hb(t,e,n){const r=Fa(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=eI(e),{host:o,port:l}=fb(e),u=l===null?"":`:${l}`,c={url:`${s}//${o}${u}/`},h=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(ki(c,r.config.emulator)&&ki(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,js(o)?(bE(`${s}//${o}${u}`),xE("Auth",!0)):i||pb()}function eI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fb(t){const e=eI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:fv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:fv(o)}}}function fv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ys(t,e){return Fp(t,"POST","/v1/accounts:signInWithIdp",Ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="http://localhost";class Ni extends tI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ni(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Ni(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ys(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ys(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ys(e,n)}buildRequest(){const e={requestUri:mb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Va(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends nI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Ua{constructor(){super("facebook.com")}static credential(e){return Ni._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Ua{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ni._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Sr.credential(n,r)}catch{return null}}}Sr.GOOGLE_SIGN_IN_METHOD="google.com";Sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Ua{constructor(){super("github.com")}static credential(e){return Ni._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ar.credential(e.oauthAccessToken)}catch{return null}}}Ar.GITHUB_SIGN_IN_METHOD="github.com";Ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Ua{constructor(){super("twitter.com")}static credential(e,n){return Ni._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Cr.credential(n,r)}catch{return null}}}Cr.TWITTER_SIGN_IN_METHOD="twitter.com";Cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb(t,e){return Fp(t,"POST","/v1/accounts:signUp",Ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await In._fromIdTokenResponse(e,r,i),o=pv(r);return new ar({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=pv(r);return new ar({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function pv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yb(t){var i;if(on(t.app))return Promise.reject(Zn(t));const e=Fa(t);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new ar({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await gb(e,{returnSecureToken:!0}),r=await ar._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends dr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Uu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Uu(e,n,r,i)}}function rI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Uu._fromErrorAndOperation(t,s,e,r):s})}async function vb(t,e,n=!1){const r=await pa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ar._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _b(t,e,n=!1){const{auth:r}=t;if(on(r.app))return Promise.reject(Zn(r));const i="reauthenticate";try{const s=await pa(t,rI(r,i,e,t),n);te(s.idToken,r,"internal-error");const o=Up(s.idToken);te(o,r,"internal-error");const{sub:l}=o;return te(t.uid===l,r,"user-mismatch"),ar._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&sr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(t,e,n=!1){if(on(t.app))return Promise.reject(Zn(t));const r="signIn",i=await rI(t,r,e),s=await ar._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eb(t,e){return Fp(t,"POST","/v1/accounts:signInWithCustomToken",Ma(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ib(t,e){if(on(t.app))return Promise.reject(Zn(t));const n=Fa(t),r=await Eb(n,{token:e,returnSecureToken:!0}),i=await ar._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}function Tb(t,e,n,r){return ht(t).onIdTokenChanged(e,n,r)}function Sb(t,e,n){return ht(t).beforeAuthStateChanged(e,n)}function Ab(t,e,n,r){return ht(t).onAuthStateChanged(e,n,r)}const Bu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bu,"1"),this.storage.removeItem(Bu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=1e3,Rb=10;class sI extends iI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);eb()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Rb):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Cb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sI.type="LOCAL";const Pb=sI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI extends iI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oI.type="SESSION";const aI=oI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Cc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await bb(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=$p("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(p.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return window}function kb(t){Fn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(){return typeof Fn().WorkerGlobalScope<"u"&&typeof Fn().importScripts=="function"}async function Db(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nb(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Ob(){return lI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="firebaseLocalStorageDb",Vb=1,ju="firebaseLocalStorage",cI="fbase_key";class Ba{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Rc(t,e){return t.transaction([ju],e?"readwrite":"readonly").objectStore(ju)}function Lb(){const t=indexedDB.deleteDatabase(uI);return new Ba(t).toPromise()}function hf(){const t=indexedDB.open(uI,Vb);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ju,{keyPath:cI})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ju)?e(r):(r.close(),await Lb(),e(await hf()))})})}async function mv(t,e,n){const r=Rc(t,!0).put({[cI]:e,value:n});return new Ba(r).toPromise()}async function Mb(t,e){const n=Rc(t,!1).get(e),r=await new Ba(n).toPromise();return r===void 0?null:r.value}function gv(t,e){const n=Rc(t,!0).delete(e);return new Ba(n).toPromise()}const Fb=800,Ub=3;class dI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Ub)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cc._getInstance(Ob()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Db(),!this.activeServiceWorker)return;this.sender=new xb(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hf();return await mv(e,Bu,"1"),await gv(e,Bu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>mv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Mb(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Rc(i,!1).getAll();return new Ba(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Fb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dI.type="LOCAL";const Bb=dI;new La(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t,e){return e?Xn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends tI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ys(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ys(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ys(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function $b(t){return wb(t.auth,new zp(t),t.bypassAuthState)}function zb(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),_b(n,new zp(t),t.bypassAuthState)}async function Wb(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),vb(n,new zp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $b;case"linkViaPopup":case"linkViaRedirect":return Wb;case"reauthViaPopup":case"reauthViaRedirect":return zb;default:sr(this.auth,"internal-error")}}resolve(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=new La(2e3,1e4);class ls extends hI{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ls.currentPopupAction&&ls.currentPopupAction.cancel(),ls.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){or(this.filter.length===1,"Popup operations only handle one event");const e=$p();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ls.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Gb.get())};e()}}ls.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="pendingRedirect",tu=new Map;class qb extends hI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=tu.get(this.auth._key());if(!e){try{const r=await Kb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}tu.set(this.auth._key(),e)}return this.bypassAuthState||tu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kb(t,e){const n=Xb(e),r=Yb(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Qb(t,e){tu.set(t._key(),e)}function Yb(t){return Xn(t._redirectPersistence)}function Xb(t){return eu(Hb,t.config.apiKey,t.name)}async function Jb(t,e,n=!1){if(on(t.app))return Promise.reject(Zn(t));const r=Fa(t),i=jb(r,e),o=await new qb(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=10*60*1e3;class ex{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fI(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Mn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Zb&&this.cachedEventUids.clear(),this.cachedEventUids.has(yv(e))}saveEventToCache(e){this.cachedEventUids.add(yv(e)),this.lastProcessedEventTime=Date.now()}}function yv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tx(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nx(t,e={}){return zs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ix=/^https?/;async function sx(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nx(t);for(const n of e)try{if(ox(n))return}catch{}sr(t,"unauthorized-domain")}function ox(t){const e=cf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ix.test(n))return!1;if(rx.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=new La(3e4,6e4);function vv(){const t=Fn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lx(t){return new Promise((e,n)=>{var i,s,o;function r(){vv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vv(),n(Mn(t,"network-request-failed"))},timeout:ax.get()})}if((s=(i=Fn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Fn().gapi)!=null&&o.load)r();else{const l=ub("iframefcb");return Fn()[l]=()=>{gapi.load?r():n(Mn(t,"network-request-failed"))},ab(`${lb()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw nu=null,e})}let nu=null;function ux(t){return nu=nu||lx(t),nu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new La(5e3,15e3),dx="__/auth/iframe",hx="emulator/auth/iframe",fx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},px=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mx(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mp(e,hx):`https://${t.config.authDomain}/${dx}`,r={apiKey:e.apiKey,appName:t.name,v:$s},i=px.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Va(r).slice(1)}`}async function gx(t){const e=await ux(t),n=Fn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:mx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fx,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Mn(t,"network-request-failed"),l=Fn().setTimeout(()=>{s(o)},cx.get());function u(){Fn().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vx=500,_x=600,wx="_blank",Ex="http://localhost";class _v{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ix(t,e,n,r=vx,i=_x){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...yx,width:r.toString(),height:i.toString(),top:s,left:o},c=At().toLowerCase();n&&(l=qE(c)?wx:n),GE(c)&&(e=e||Ex,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(ZP(c)&&l!=="_self")return Tx(e||"",l),new _v(null);const f=window.open(e||"",l,h);te(f,t,"popup-blocked");try{f.focus()}catch{}return new _v(f)}function Tx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="__/auth/handler",Ax="emulator/auth/handler",Cx=encodeURIComponent("fac");async function wv(t,e,n,r,i,s){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$s,eventId:i};if(e instanceof nI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",IR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof Ua){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${Cx}=${encodeURIComponent(u)}`:"";return`${Rx(t)}?${Va(l).slice(1)}${c}`}function Rx({config:t}){return t.emulator?Mp(t,Ax):`https://${t.authDomain}/${Sx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="webStorageSupport";class Px{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aI,this._completeRedirectFn=Jb,this._overrideRedirectResult=Qb}async _openPopup(e,n,r,i){var o;or((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await wv(e,n,r,cf(),i);return Ix(e,s,$p())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await wv(e,n,r,cf(),i);return kb(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(or(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gx(e),r=new ex(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gd,{type:Gd},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Gd];s!==void 0&&n(!!s),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JE()||HE()||Bp()}}const bx=Px;var Ev="@firebase/auth",Iv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dx(t){Rs(new Di("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZE(t)},c=new sb(r,i,s,u);return db(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rs(new Di("auth-internal",e=>{const n=Fa(e.getProvider("auth").getImmediate());return(r=>new xx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(Ev,Iv,kx(t)),Br(Ev,Iv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=5*60,Ox=PE("authIdTokenMaxAge")||Nx;let Tv=null;const Vx=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ox)return;const i=n==null?void 0:n.token;Tv!==i&&(Tv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Lx(t=OE()){const e=Vp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cb(t,{popupRedirectResolver:bx,persistence:[Bb,Pb,aI]}),r=PE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Vx(s.toString());Sb(n,o,()=>o(n.currentUser)),Tb(n,l=>o(l))}}const i=CE("auth");return i&&hb(n,`http://${i}`),n}function Mx(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}ob({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Mn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Mx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dx("Browser");var Sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,pI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function S(){}S.prototype=v.prototype,I.D=v.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(A,b,x){for(var R=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)R[Je-2]=arguments[Je];return v.prototype[b].apply(A,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,S){S||(S=0);var A=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)A[b]=v.charCodeAt(S++)|v.charCodeAt(S++)<<8|v.charCodeAt(S++)<<16|v.charCodeAt(S++)<<24;else for(b=0;16>b;++b)A[b]=v[S++]|v[S++]<<8|v[S++]<<16|v[S++]<<24;v=I.g[0],S=I.g[1],b=I.g[2];var x=I.g[3],R=v+(x^S&(b^x))+A[0]+3614090360&4294967295;v=S+(R<<7&4294967295|R>>>25),R=x+(b^v&(S^b))+A[1]+3905402710&4294967295,x=v+(R<<12&4294967295|R>>>20),R=b+(S^x&(v^S))+A[2]+606105819&4294967295,b=x+(R<<17&4294967295|R>>>15),R=S+(v^b&(x^v))+A[3]+3250441966&4294967295,S=b+(R<<22&4294967295|R>>>10),R=v+(x^S&(b^x))+A[4]+4118548399&4294967295,v=S+(R<<7&4294967295|R>>>25),R=x+(b^v&(S^b))+A[5]+1200080426&4294967295,x=v+(R<<12&4294967295|R>>>20),R=b+(S^x&(v^S))+A[6]+2821735955&4294967295,b=x+(R<<17&4294967295|R>>>15),R=S+(v^b&(x^v))+A[7]+4249261313&4294967295,S=b+(R<<22&4294967295|R>>>10),R=v+(x^S&(b^x))+A[8]+1770035416&4294967295,v=S+(R<<7&4294967295|R>>>25),R=x+(b^v&(S^b))+A[9]+2336552879&4294967295,x=v+(R<<12&4294967295|R>>>20),R=b+(S^x&(v^S))+A[10]+4294925233&4294967295,b=x+(R<<17&4294967295|R>>>15),R=S+(v^b&(x^v))+A[11]+2304563134&4294967295,S=b+(R<<22&4294967295|R>>>10),R=v+(x^S&(b^x))+A[12]+1804603682&4294967295,v=S+(R<<7&4294967295|R>>>25),R=x+(b^v&(S^b))+A[13]+4254626195&4294967295,x=v+(R<<12&4294967295|R>>>20),R=b+(S^x&(v^S))+A[14]+2792965006&4294967295,b=x+(R<<17&4294967295|R>>>15),R=S+(v^b&(x^v))+A[15]+1236535329&4294967295,S=b+(R<<22&4294967295|R>>>10),R=v+(b^x&(S^b))+A[1]+4129170786&4294967295,v=S+(R<<5&4294967295|R>>>27),R=x+(S^b&(v^S))+A[6]+3225465664&4294967295,x=v+(R<<9&4294967295|R>>>23),R=b+(v^S&(x^v))+A[11]+643717713&4294967295,b=x+(R<<14&4294967295|R>>>18),R=S+(x^v&(b^x))+A[0]+3921069994&4294967295,S=b+(R<<20&4294967295|R>>>12),R=v+(b^x&(S^b))+A[5]+3593408605&4294967295,v=S+(R<<5&4294967295|R>>>27),R=x+(S^b&(v^S))+A[10]+38016083&4294967295,x=v+(R<<9&4294967295|R>>>23),R=b+(v^S&(x^v))+A[15]+3634488961&4294967295,b=x+(R<<14&4294967295|R>>>18),R=S+(x^v&(b^x))+A[4]+3889429448&4294967295,S=b+(R<<20&4294967295|R>>>12),R=v+(b^x&(S^b))+A[9]+568446438&4294967295,v=S+(R<<5&4294967295|R>>>27),R=x+(S^b&(v^S))+A[14]+3275163606&4294967295,x=v+(R<<9&4294967295|R>>>23),R=b+(v^S&(x^v))+A[3]+4107603335&4294967295,b=x+(R<<14&4294967295|R>>>18),R=S+(x^v&(b^x))+A[8]+1163531501&4294967295,S=b+(R<<20&4294967295|R>>>12),R=v+(b^x&(S^b))+A[13]+2850285829&4294967295,v=S+(R<<5&4294967295|R>>>27),R=x+(S^b&(v^S))+A[2]+4243563512&4294967295,x=v+(R<<9&4294967295|R>>>23),R=b+(v^S&(x^v))+A[7]+1735328473&4294967295,b=x+(R<<14&4294967295|R>>>18),R=S+(x^v&(b^x))+A[12]+2368359562&4294967295,S=b+(R<<20&4294967295|R>>>12),R=v+(S^b^x)+A[5]+4294588738&4294967295,v=S+(R<<4&4294967295|R>>>28),R=x+(v^S^b)+A[8]+2272392833&4294967295,x=v+(R<<11&4294967295|R>>>21),R=b+(x^v^S)+A[11]+1839030562&4294967295,b=x+(R<<16&4294967295|R>>>16),R=S+(b^x^v)+A[14]+4259657740&4294967295,S=b+(R<<23&4294967295|R>>>9),R=v+(S^b^x)+A[1]+2763975236&4294967295,v=S+(R<<4&4294967295|R>>>28),R=x+(v^S^b)+A[4]+1272893353&4294967295,x=v+(R<<11&4294967295|R>>>21),R=b+(x^v^S)+A[7]+4139469664&4294967295,b=x+(R<<16&4294967295|R>>>16),R=S+(b^x^v)+A[10]+3200236656&4294967295,S=b+(R<<23&4294967295|R>>>9),R=v+(S^b^x)+A[13]+681279174&4294967295,v=S+(R<<4&4294967295|R>>>28),R=x+(v^S^b)+A[0]+3936430074&4294967295,x=v+(R<<11&4294967295|R>>>21),R=b+(x^v^S)+A[3]+3572445317&4294967295,b=x+(R<<16&4294967295|R>>>16),R=S+(b^x^v)+A[6]+76029189&4294967295,S=b+(R<<23&4294967295|R>>>9),R=v+(S^b^x)+A[9]+3654602809&4294967295,v=S+(R<<4&4294967295|R>>>28),R=x+(v^S^b)+A[12]+3873151461&4294967295,x=v+(R<<11&4294967295|R>>>21),R=b+(x^v^S)+A[15]+530742520&4294967295,b=x+(R<<16&4294967295|R>>>16),R=S+(b^x^v)+A[2]+3299628645&4294967295,S=b+(R<<23&4294967295|R>>>9),R=v+(b^(S|~x))+A[0]+4096336452&4294967295,v=S+(R<<6&4294967295|R>>>26),R=x+(S^(v|~b))+A[7]+1126891415&4294967295,x=v+(R<<10&4294967295|R>>>22),R=b+(v^(x|~S))+A[14]+2878612391&4294967295,b=x+(R<<15&4294967295|R>>>17),R=S+(x^(b|~v))+A[5]+4237533241&4294967295,S=b+(R<<21&4294967295|R>>>11),R=v+(b^(S|~x))+A[12]+1700485571&4294967295,v=S+(R<<6&4294967295|R>>>26),R=x+(S^(v|~b))+A[3]+2399980690&4294967295,x=v+(R<<10&4294967295|R>>>22),R=b+(v^(x|~S))+A[10]+4293915773&4294967295,b=x+(R<<15&4294967295|R>>>17),R=S+(x^(b|~v))+A[1]+2240044497&4294967295,S=b+(R<<21&4294967295|R>>>11),R=v+(b^(S|~x))+A[8]+1873313359&4294967295,v=S+(R<<6&4294967295|R>>>26),R=x+(S^(v|~b))+A[15]+4264355552&4294967295,x=v+(R<<10&4294967295|R>>>22),R=b+(v^(x|~S))+A[6]+2734768916&4294967295,b=x+(R<<15&4294967295|R>>>17),R=S+(x^(b|~v))+A[13]+1309151649&4294967295,S=b+(R<<21&4294967295|R>>>11),R=v+(b^(S|~x))+A[4]+4149444226&4294967295,v=S+(R<<6&4294967295|R>>>26),R=x+(S^(v|~b))+A[11]+3174756917&4294967295,x=v+(R<<10&4294967295|R>>>22),R=b+(v^(x|~S))+A[2]+718787259&4294967295,b=x+(R<<15&4294967295|R>>>17),R=S+(x^(b|~v))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+b&4294967295,I.g[3]=I.g[3]+x&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var S=v-this.blockSize,A=this.B,b=this.h,x=0;x<v;){if(b==0)for(;x<=S;)i(this,I,x),x+=this.blockSize;if(typeof I=="string"){for(;x<v;)if(A[b++]=I.charCodeAt(x++),b==this.blockSize){i(this,A),b=0;break}}else for(;x<v;)if(A[b++]=I[x++],b==this.blockSize){i(this,A),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var S=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=S&255,S/=256;for(this.u(I),I=Array(16),v=S=0;4>v;++v)for(var A=0;32>A;A+=8)I[S++]=this.g[v]>>>A&255;return I};function s(I,v){var S=l;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=v(I)}function o(I,v){this.h=v;for(var S=[],A=!0,b=I.length-1;0<=b;b--){var x=I[b]|0;A&&x==v||(S[b]=x,A=!1)}this.g=S}var l={};function u(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return P(c(-I));for(var v=[],S=1,A=0;I>=S;A++)v[A]=I/S|0,S*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return P(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(v,8)),A=f,b=0;b<I.length;b+=8){var x=Math.min(8,I.length-b),R=parseInt(I.substring(b,b+x),v);8>x?(x=c(Math.pow(v,x)),A=A.j(x).add(c(R))):(A=A.j(S),A=A.add(c(R)))}return A}var f=u(0),p=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-P(this).m();for(var I=0,v=1,S=0;S<this.g.length;S++){var A=this.i(S);I+=(0<=A?A:4294967296+A)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(C(this))return"-"+P(this).toString(I);for(var v=c(Math.pow(I,6)),S=this,A="";;){var b=k(S,v).g;S=E(S,b.j(v));var x=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=b,w(S))return x+A;for(;6>x.length;)x="0"+x;A=x+A}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function C(I){return I.h==-1}t.l=function(I){return I=E(this,I),C(I)?-1:w(I)?0:1};function P(I){for(var v=I.g.length,S=[],A=0;A<v;A++)S[A]=~I.g[A];return new o(S,~I.h).add(p)}t.abs=function(){return C(this)?P(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],A=0,b=0;b<=v;b++){var x=A+(this.i(b)&65535)+(I.i(b)&65535),R=(x>>>16)+(this.i(b)>>>16)+(I.i(b)>>>16);A=R>>>16,x&=65535,R&=65535,S[b]=R<<16|x}return new o(S,S[S.length-1]&-2147483648?-1:0)};function E(I,v){return I.add(P(v))}t.j=function(I){if(w(this)||w(I))return f;if(C(this))return C(I)?P(this).j(P(I)):P(P(this).j(I));if(C(I))return P(this.j(P(I)));if(0>this.l(g)&&0>I.l(g))return c(this.m()*I.m());for(var v=this.g.length+I.g.length,S=[],A=0;A<2*v;A++)S[A]=0;for(A=0;A<this.g.length;A++)for(var b=0;b<I.g.length;b++){var x=this.i(A)>>>16,R=this.i(A)&65535,Je=I.i(b)>>>16,Ue=I.i(b)&65535;S[2*A+2*b]+=R*Ue,_(S,2*A+2*b),S[2*A+2*b+1]+=x*Ue,_(S,2*A+2*b+1),S[2*A+2*b+1]+=R*Je,_(S,2*A+2*b+1),S[2*A+2*b+2]+=x*Je,_(S,2*A+2*b+2)}for(A=0;A<v;A++)S[A]=S[2*A+1]<<16|S[2*A];for(A=v;A<2*v;A++)S[A]=0;return new o(S,0)};function _(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function T(I,v){this.g=I,this.h=v}function k(I,v){if(w(v))throw Error("division by zero");if(w(I))return new T(f,f);if(C(I))return v=k(P(I),v),new T(P(v.g),P(v.h));if(C(v))return v=k(I,P(v)),new T(P(v.g),v.h);if(30<I.g.length){if(C(I)||C(v))throw Error("slowDivide_ only works with positive integers.");for(var S=p,A=v;0>=A.l(I);)S=L(S),A=L(A);var b=V(S,1),x=V(A,1);for(A=V(A,2),S=V(S,2);!w(A);){var R=x.add(A);0>=R.l(I)&&(b=b.add(S),x=R),A=V(A,1),S=V(S,1)}return v=E(I,b.j(v)),new T(b,v)}for(b=f;0<=I.l(v);){for(S=Math.max(1,Math.floor(I.m()/v.m())),A=Math.ceil(Math.log(S)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),x=c(S),R=x.j(v);C(R)||0<R.l(I);)S-=A,x=c(S),R=x.j(v);w(x)&&(x=p),b=b.add(x),I=E(I,R)}return new T(b,I)}t.A=function(I){return k(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)&I.i(A);return new o(S,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)|I.i(A);return new o(S,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),S=[],A=0;A<v;A++)S[A]=this.i(A)^I.i(A);return new o(S,this.h^I.h)};function L(I){for(var v=I.g.length+1,S=[],A=0;A<v;A++)S[A]=I.i(A)<<1|I.i(A-1)>>>31;return new o(S,I.h)}function V(I,v){var S=v>>5;v%=32;for(var A=I.g.length-S,b=[],x=0;x<A;x++)b[x]=0<v?I.i(x+S)>>>v|I.i(x+S+1)<<32-v:I.i(x+S);return new o(b,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,jr=o}).apply(typeof Sv<"u"?Sv:typeof self<"u"?self:typeof window<"u"?window:{});var kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mI,bo,gI,ru,ff,yI,vI,_I;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,m){return a==Array.prototype||a==Object.prototype||(a[d]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof kl=="object"&&kl];for(var d=0;d<a.length;++d){var m=a[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var m=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var D=a[y];if(!(D in m))break e;m=m[D]}a=a[a.length-1],y=m[a],d=d(y),d!=y&&d!=null&&e(m,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var m=0,y=!1,D={next:function(){if(!y&&m<a.length){var O=m++;return{value:d(O,a[O]),done:!1}}return y=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,m){return a.call.apply(a.bind,arguments)}function f(a,d,m){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,y),a.apply(d,D)}}return function(){return a.apply(d,arguments)}}function p(a,d,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(a,d){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function w(a,d){function m(){}m.prototype=d.prototype,a.aa=d.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(y,D,O){for(var W=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)W[Ee-2]=arguments[Ee];return d.prototype[D].apply(y,W)}}function C(a){const d=a.length;if(0<d){const m=Array(d);for(let y=0;y<d;y++)m[y]=a[y];return m}return[]}function P(a,d){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(u(y)){const D=a.length||0,O=y.length||0;a.length=D+O;for(let W=0;W<O;W++)a[D+W]=y[W]}else a.push(y)}}class E{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function k(a){return k[" "](a),a}k[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(a,d,m){for(const y in a)d.call(m,a[y],y,a)}function I(a,d){for(const m in a)d.call(void 0,a[m],m,a)}function v(a){const d={};for(const m in a)d[m]=a[m];return d}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(a,d){let m,y;for(let D=1;D<arguments.length;D++){y=arguments[D];for(m in y)a[m]=y[m];for(let O=0;O<S.length;O++)m=S[O],Object.prototype.hasOwnProperty.call(y,m)&&(a[m]=y[m])}}function b(a){var d=1;a=a.split(":");const m=[];for(;0<d&&a.length;)m.push(a.shift()),d--;return a.length&&m.push(a.join(":")),m}function x(a){l.setTimeout(()=>{throw a},0)}function R(){var a=Q;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Je{constructor(){this.h=this.g=null}add(d,m){const y=Ue.get();y.set(d,m),this.h?this.h.next=y:this.g=y,this.h=y}}var Ue=new E(()=>new $t,a=>a.reset());class $t{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Ze,G=!1,Q=new Je,Z=()=>{const a=l.Promise.resolve(void 0);Ze=()=>{a.then(he)}};var he=()=>{for(var a;a=R();){try{a.h.call(a.g)}catch(m){x(m)}var d=Ue;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}G=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var Ot=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,d),l.removeEventListener("test",m,d)}catch{}return a}();function pt(a,d){if(ge.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(L){e:{try{k(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else m=="mouseover"?d=a.fromElement:m=="mouseout"&&(d=a.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ct[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&pt.aa.h.call(this)}}w(pt,ge);var Ct={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var mt="closure_listenable_"+(1e6*Math.random()|0),Js=0;function bn(a,d,m,y,D){this.listener=a,this.proxy=null,this.src=d,this.type=m,this.capture=!!y,this.ha=D,this.key=++Js,this.da=this.fa=!1}function pn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ai(a){this.src=a,this.g={},this.h=0}ai.prototype.add=function(a,d,m,y,D){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var W=zt(a,d,y,D);return-1<W?(d=a[W],m||(d.fa=!1)):(d=new bn(d,this.src,O,!!y,D),d.fa=m,a.push(d)),d};function be(a,d){var m=d.type;if(m in a.g){var y=a.g[m],D=Array.prototype.indexOf.call(y,d,void 0),O;(O=0<=D)&&Array.prototype.splice.call(y,D,1),O&&(pn(d),a.g[m].length==0&&(delete a.g[m],a.h--))}}function zt(a,d,m,y){for(var D=0;D<a.length;++D){var O=a[D];if(!O.da&&O.listener==d&&O.capture==!!m&&O.ha==y)return D}return-1}var li="closure_lm_"+(1e6*Math.random()|0),mn={};function Zs(a,d,m,y,D){if(y&&y.once)return Y(a,d,m,y,D);if(Array.isArray(d)){for(var O=0;O<d.length;O++)Zs(a,d[O],m,y,D);return null}return m=gn(m),a&&a[mt]?a.K(d,m,c(y)?!!y.capture:!!y,D):B(a,d,m,!1,y,D)}function B(a,d,m,y,D,O){if(!d)throw Error("Invalid event type");var W=c(D)?!!D.capture:!!D,Ee=ke(a);if(Ee||(a[li]=Ee=new ai(a)),m=Ee.add(d,m,y,W,O),m.proxy)return m;if(y=$(),m.proxy=y,y.src=a,y.listener=m,a.addEventListener)Ot||(D=W),D===void 0&&(D=!1),a.addEventListener(d.toString(),y,D);else if(a.attachEvent)a.attachEvent(we(d.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function $(){function a(m){return d.call(a.src,a.listener,m)}const d=Ie;return a}function Y(a,d,m,y,D){if(Array.isArray(d)){for(var O=0;O<d.length;O++)Y(a,d[O],m,y,D);return null}return m=gn(m),a&&a[mt]?a.L(d,m,c(y)?!!y.capture:!!y,D):B(a,d,m,!0,y,D)}function ne(a,d,m,y,D){if(Array.isArray(d))for(var O=0;O<d.length;O++)ne(a,d[O],m,y,D);else y=c(y)?!!y.capture:!!y,m=gn(m),a&&a[mt]?(a=a.i,d=String(d).toString(),d in a.g&&(O=a.g[d],m=zt(O,m,y,D),-1<m&&(pn(O[m]),Array.prototype.splice.call(O,m,1),O.length==0&&(delete a.g[d],a.h--)))):a&&(a=ke(a))&&(d=a.g[d.toString()],a=-1,d&&(a=zt(d,m,y,D)),(m=-1<a?d[a]:null)&&me(m))}function me(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[mt])be(d.i,a);else{var m=a.type,y=a.proxy;d.removeEventListener?d.removeEventListener(m,y,a.capture):d.detachEvent?d.detachEvent(we(m),y):d.addListener&&d.removeListener&&d.removeListener(y),(m=ke(d))?(be(m,a),m.h==0&&(m.src=null,d[li]=null)):pn(a)}}}function we(a){return a in mn?mn[a]:mn[a]="on"+a}function Ie(a,d){if(a.da)a=!0;else{d=new pt(d,this);var m=a.listener,y=a.ha||a.src;a.fa&&me(a),a=m.call(y,d)}return a}function ke(a){return a=a[li],a instanceof ai?a:null}var Wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function gn(a){return typeof a=="function"?a:(a[Wt]||(a[Wt]=function(d){return a.handleEvent(d)}),a[Wt])}function $e(){ue.call(this),this.i=new ai(this),this.M=this,this.F=null}w($e,ue),$e.prototype[mt]=!0,$e.prototype.removeEventListener=function(a,d,m,y){ne(this,a,d,m,y)};function Ke(a,d){var m,y=a.F;if(y)for(m=[];y;y=y.F)m.push(y);if(a=a.M,y=d.type||d,typeof d=="string")d=new ge(d,a);else if(d instanceof ge)d.target=d.target||a;else{var D=d;d=new ge(y,a),A(d,D)}if(D=!0,m)for(var O=m.length-1;0<=O;O--){var W=d.g=m[O];D=Xa(W,y,!0,d)&&D}if(W=d.g=a,D=Xa(W,y,!0,d)&&D,D=Xa(W,y,!1,d)&&D,m)for(O=0;O<m.length;O++)W=d.g=m[O],D=Xa(W,y,!1,d)&&D}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var m=a.g[d],y=0;y<m.length;y++)pn(m[y]);delete a.g[d],a.h--}}this.F=null},$e.prototype.K=function(a,d,m,y){return this.i.add(String(a),d,!1,m,y)},$e.prototype.L=function(a,d,m,y){return this.i.add(String(a),d,!0,m,y)};function Xa(a,d,m,y){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,O=0;O<d.length;++O){var W=d[O];if(W&&!W.da&&W.capture==m){var Ee=W.listener,st=W.ha||W.src;W.fa&&be(a.i,W),D=Ee.call(st,y)!==!1&&D}}return D&&!y.defaultPrevented}function qm(a,d,m){if(typeof a=="function")m&&(a=p(a,m));else if(a&&typeof a.handleEvent=="function")a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function Km(a){a.g=qm(()=>{a.g=null,a.i&&(a.i=!1,Km(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Z1 extends ue{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Km(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eo(a){ue.call(this),this.h=a,this.g={}}w(eo,ue);var Qm=[];function Ym(a){V(a.g,function(d,m){this.g.hasOwnProperty(m)&&me(d)},a),a.g={}}eo.prototype.N=function(){eo.aa.N.call(this),Ym(this)},eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xc=l.JSON.stringify,eS=l.JSON.parse,tS=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Jc(){}Jc.prototype.h=null;function Xm(a){return a.h||(a.h=a.i())}function Jm(){}var to={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zc(){ge.call(this,"d")}w(Zc,ge);function ed(){ge.call(this,"c")}w(ed,ge);var ui={},Zm=null;function Ja(){return Zm=Zm||new $e}ui.La="serverreachability";function eg(a){ge.call(this,ui.La,a)}w(eg,ge);function no(a){const d=Ja();Ke(d,new eg(d))}ui.STAT_EVENT="statevent";function tg(a,d){ge.call(this,ui.STAT_EVENT,a),this.stat=d}w(tg,ge);function Rt(a){const d=Ja();Ke(d,new tg(d,a))}ui.Ma="timingevent";function ng(a,d){ge.call(this,ui.Ma,a),this.size=d}w(ng,ge);function ro(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function io(){this.g=!0}io.prototype.xa=function(){this.g=!1};function nS(a,d,m,y,D,O){a.info(function(){if(a.g)if(O)for(var W="",Ee=O.split("&"),st=0;st<Ee.length;st++){var pe=Ee[st].split("=");if(1<pe.length){var gt=pe[0];pe=pe[1];var yt=gt.split("_");W=2<=yt.length&&yt[1]=="type"?W+(gt+"="+pe+"&"):W+(gt+"=redacted&")}}else W=null;else W=O;return"XMLHTTP REQ ("+y+") [attempt "+D+"]: "+d+`
`+m+`
`+W})}function rS(a,d,m,y,D,O,W){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+D+"]: "+d+`
`+m+`
`+O+" "+W})}function Bi(a,d,m,y){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+sS(a,m)+(y?" "+y:"")})}function iS(a,d){a.info(function(){return"TIMEOUT: "+d})}io.prototype.info=function(){};function sS(a,d){if(!a.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var y=m[a];if(!(2>y.length)){var D=y[1];if(Array.isArray(D)&&!(1>D.length)){var O=D[0];if(O!="noop"&&O!="stop"&&O!="close")for(var W=1;W<D.length;W++)D[W]=""}}}}return Xc(m)}catch{return d}}var Za={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},td;function el(){}w(el,Jc),el.prototype.g=function(){return new XMLHttpRequest},el.prototype.i=function(){return{}},td=new el;function hr(a,d,m,y){this.j=a,this.i=d,this.l=m,this.R=y||1,this.U=new eo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ig}function ig(){this.i=null,this.g="",this.h=!1}var sg={},nd={};function rd(a,d,m){a.L=1,a.v=il(Wn(d)),a.m=m,a.P=!0,og(a,null)}function og(a,d){a.F=Date.now(),tl(a),a.A=Wn(a.v);var m=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),wg(m.i,"t",y),a.C=0,m=a.j.J,a.h=new ig,a.g=Fg(a.j,m?d:null,!a.m),0<a.O&&(a.M=new Z1(p(a.Y,a,a.g),a.O)),d=a.U,m=a.g,y=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(Qm[0]=D.toString()),D=Qm);for(var O=0;O<D.length;O++){var W=Zs(m,D[O],y||d.handleEvent,!1,d.h||d);if(!W)break;d.g[W.key]=W}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),no(),nS(a.i,a.u,a.A,a.l,a.R,a.m)}hr.prototype.ca=function(a){a=a.target;const d=this.M;d&&Gn(a)==3?d.j():this.Y(a)},hr.prototype.Y=function(a){try{if(a==this.g)e:{const yt=Gn(this.g);var d=this.g.Ba();const zi=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||Rg(this.g)))){this.J||yt!=4||d==7||(d==8||0>=zi?no(3):no(2)),id(this);var m=this.g.Z();this.X=m;t:if(ag(this)){var y=Rg(this.g);a="";var D=y.length,O=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ci(this),so(this);var W="";break t}this.h.i=new l.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,a+=this.h.i.decode(y[d],{stream:!(O&&d==D-1)});y.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=m==200,rS(this.i,this.u,this.A,this.l,this.R,yt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,st=this.g;if((Ee=st.g?st.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Ee)){var pe=Ee;break t}}pe=null}if(m=pe)Bi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sd(this,m);else{this.o=!1,this.s=3,Rt(12),ci(this),so(this);break e}}if(this.P){m=!0;let yn;for(;!this.J&&this.C<W.length;)if(yn=oS(this,W),yn==nd){yt==4&&(this.s=4,Rt(14),m=!1),Bi(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==sg){this.s=4,Rt(15),Bi(this.i,this.l,W,"[Invalid Chunk]"),m=!1;break}else Bi(this.i,this.l,yn,null),sd(this,yn);if(ag(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||W.length!=0||this.h.h||(this.s=1,Rt(16),m=!1),this.o=this.o&&m,!m)Bi(this.i,this.l,W,"[Invalid Chunked Response]"),ci(this),so(this);else if(0<W.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),dd(gt),gt.M=!0,Rt(11))}}else Bi(this.i,this.l,W,null),sd(this,W);yt==4&&ci(this),this.o&&!this.J&&(yt==4?Og(this.j,this):(this.o=!1,tl(this)))}else TS(this.g),m==400&&0<W.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),ci(this),so(this)}}}catch{}finally{}};function ag(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function oS(a,d){var m=a.C,y=d.indexOf(`
`,m);return y==-1?nd:(m=Number(d.substring(m,y)),isNaN(m)?sg:(y+=1,y+m>d.length?nd:(d=d.slice(y,y+m),a.C=y+m,d)))}hr.prototype.cancel=function(){this.J=!0,ci(this)};function tl(a){a.S=Date.now()+a.I,lg(a,a.I)}function lg(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ro(p(a.ba,a),d)}function id(a){a.B&&(l.clearTimeout(a.B),a.B=null)}hr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(iS(this.i,this.A),this.L!=2&&(no(),Rt(17)),ci(this),this.s=2,so(this)):lg(this,this.S-a)};function so(a){a.j.G==0||a.J||Og(a.j,a)}function ci(a){id(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Ym(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function sd(a,d){try{var m=a.j;if(m.G!=0&&(m.g==a||od(m.h,a))){if(!a.K&&od(m.h,a)&&m.G==3){try{var y=m.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var D=y;if(D[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)cl(m),ll(m);else break e;cd(m),Rt(18)}}else m.za=D[1],0<m.za-m.T&&37500>D[2]&&m.F&&m.v==0&&!m.C&&(m.C=ro(p(m.Za,m),6e3));if(1>=dg(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else hi(m,11)}else if((a.K||m.g==a)&&cl(m),!_(d))for(D=m.Da.g.parse(d),d=0;d<D.length;d++){let pe=D[d];if(m.T=pe[0],pe=pe[1],m.G==2)if(pe[0]=="c"){m.K=pe[1],m.ia=pe[2];const gt=pe[3];gt!=null&&(m.la=gt,m.j.info("VER="+m.la));const yt=pe[4];yt!=null&&(m.Aa=yt,m.j.info("SVER="+m.Aa));const zi=pe[5];zi!=null&&typeof zi=="number"&&0<zi&&(y=1.5*zi,m.L=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const yn=a.g;if(yn){const hl=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hl){var O=y.h;O.g||hl.indexOf("spdy")==-1&&hl.indexOf("quic")==-1&&hl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(ad(O,O.h),O.h=null))}if(y.D){const hd=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;hd&&(y.ya=hd,Ae(y.I,y.D,hd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),y=m;var W=a;if(y.qa=Mg(y,y.J?y.ia:null,y.W),W.K){hg(y.h,W);var Ee=W,st=y.L;st&&(Ee.I=st),Ee.B&&(id(Ee),tl(Ee)),y.g=W}else Dg(y);0<m.i.length&&ul(m)}else pe[0]!="stop"&&pe[0]!="close"||hi(m,7);else m.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?hi(m,7):ud(m):pe[0]!="noop"&&m.l&&m.l.ta(pe),m.v=0)}}no(4)}catch{}}var aS=class{constructor(a,d){this.g=a,this.map=d}};function ug(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function dg(a){return a.h?1:a.g?a.g.size:0}function od(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function ad(a,d){a.g?a.g.add(d):a.h=d}function hg(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}ug.prototype.cancel=function(){if(this.i=fg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function fg(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const m of a.g.values())d=d.concat(m.D);return d}return C(a.i)}function lS(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],m=a.length,y=0;y<m;y++)d.push(a[y]);return d}d=[],m=0;for(y in a)d[m++]=a[y];return d}function uS(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var m=0;m<a;m++)d.push(m);return d}d=[],m=0;for(const y in a)d[m++]=y;return d}}}function pg(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var m=uS(a),y=lS(a),D=y.length,O=0;O<D;O++)d.call(void 0,y[O],m&&m[O],a)}var mg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cS(a,d){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var y=a[m].indexOf("="),D=null;if(0<=y){var O=a[m].substring(0,y);D=a[m].substring(y+1)}else O=a[m];d(O,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function di(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof di){this.h=a.h,nl(this,a.j),this.o=a.o,this.g=a.g,rl(this,a.s),this.l=a.l;var d=a.i,m=new lo;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),gg(this,m),this.m=a.m}else a&&(d=String(a).match(mg))?(this.h=!1,nl(this,d[1]||"",!0),this.o=oo(d[2]||""),this.g=oo(d[3]||"",!0),rl(this,d[4]),this.l=oo(d[5]||"",!0),gg(this,d[6]||"",!0),this.m=oo(d[7]||"")):(this.h=!1,this.i=new lo(null,this.h))}di.prototype.toString=function(){var a=[],d=this.j;d&&a.push(ao(d,yg,!0),":");var m=this.g;return(m||d=="file")&&(a.push("//"),(d=this.o)&&a.push(ao(d,yg,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(ao(m,m.charAt(0)=="/"?fS:hS,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",ao(m,mS)),a.join("")};function Wn(a){return new di(a)}function nl(a,d,m){a.j=m?oo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function rl(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function gg(a,d,m){d instanceof lo?(a.i=d,gS(a.i,a.h)):(m||(d=ao(d,pS)),a.i=new lo(d,a.h))}function Ae(a,d,m){a.i.set(d,m)}function il(a){return Ae(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function oo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ao(a,d,m){return typeof a=="string"?(a=encodeURI(a).replace(d,dS),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function dS(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var yg=/[#\/\?@]/g,hS=/[#\?:]/g,fS=/[#\?]/g,pS=/[#\?@]/g,mS=/#/g;function lo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function fr(a){a.g||(a.g=new Map,a.h=0,a.i&&cS(a.i,function(d,m){a.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=lo.prototype,t.add=function(a,d){fr(this),this.i=null,a=ji(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(d),this.h+=1,this};function vg(a,d){fr(a),d=ji(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function _g(a,d){return fr(a),d=ji(a,d),a.g.has(d)}t.forEach=function(a,d){fr(this),this.g.forEach(function(m,y){m.forEach(function(D){a.call(d,D,y,this)},this)},this)},t.na=function(){fr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let y=0;y<d.length;y++){const D=a[y];for(let O=0;O<D.length;O++)m.push(d[y])}return m},t.V=function(a){fr(this);let d=[];if(typeof a=="string")_g(this,a)&&(d=d.concat(this.g.get(ji(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)d=d.concat(a[m])}return d},t.set=function(a,d){return fr(this),this.i=null,a=ji(this,a),_g(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function wg(a,d,m){vg(a,d),0<m.length&&(a.i=null,a.g.set(ji(a,d),C(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var y=d[m];const O=encodeURIComponent(String(y)),W=this.V(y);for(y=0;y<W.length;y++){var D=O;W[y]!==""&&(D+="="+encodeURIComponent(String(W[y]))),a.push(D)}}return this.i=a.join("&")};function ji(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function gS(a,d){d&&!a.j&&(fr(a),a.i=null,a.g.forEach(function(m,y){var D=y.toLowerCase();y!=D&&(vg(this,y),wg(this,D,m))},a)),a.j=d}function yS(a,d){const m=new io;if(l.Image){const y=new Image;y.onload=g(pr,m,"TestLoadImage: loaded",!0,d,y),y.onerror=g(pr,m,"TestLoadImage: error",!1,d,y),y.onabort=g(pr,m,"TestLoadImage: abort",!1,d,y),y.ontimeout=g(pr,m,"TestLoadImage: timeout",!1,d,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else d(!1)}function vS(a,d){const m=new io,y=new AbortController,D=setTimeout(()=>{y.abort(),pr(m,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:y.signal}).then(O=>{clearTimeout(D),O.ok?pr(m,"TestPingServer: ok",!0,d):pr(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),pr(m,"TestPingServer: error",!1,d)})}function pr(a,d,m,y,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),y(m)}catch{}}function _S(){this.g=new tS}function wS(a,d,m){const y=m||"";try{pg(a,function(D,O){let W=D;c(D)&&(W=Xc(D)),d.push(y+O+"="+encodeURIComponent(W))})}catch(D){throw d.push(y+"type="+encodeURIComponent("_badmap")),D}}function sl(a){this.l=a.Ub||null,this.j=a.eb||!1}w(sl,Jc),sl.prototype.g=function(){return new ol(this.l,this.j)},sl.prototype.i=function(a){return function(){return a}}({});function ol(a,d){$e.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(ol,$e),t=ol.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,co(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,uo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Eg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Eg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?uo(this):co(this),this.readyState==3&&Eg(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,uo(this))},t.Qa=function(a){this.g&&(this.response=a,uo(this))},t.ga=function(){this.g&&uo(this)};function uo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,co(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=d.next();return a.join(`\r
`)};function co(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ig(a){let d="";return V(a,function(m,y){d+=y,d+=":",d+=m,d+=`\r
`}),d}function ld(a,d,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=Ig(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):Ae(a,d,m))}function Le(a){$e.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Le,$e);var ES=/^https?$/i,IS=["POST","PUT"];t=Le.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():td.g(),this.v=this.o?Xm(this.o):Xm(td),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(O){Tg(this,O);return}if(a=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var D in y)m.set(D,y[D]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const O of y.keys())m.set(O,y.get(O));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(O=>O.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(IS,d,void 0))||y||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,W]of m)this.g.setRequestHeader(O,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cg(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){Tg(this,O)}};function Tg(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Sg(a),al(a)}function Sg(a){a.A||(a.A=!0,Ke(a,"complete"),Ke(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ke(this,"complete"),Ke(this,"abort"),al(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),al(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ag(this):this.bb())},t.bb=function(){Ag(this)};function Ag(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Gn(a)!=4||a.Z()!=2)){if(a.u&&Gn(a)==4)qm(a.Ea,0,a);else if(Ke(a,"readystatechange"),Gn(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var y;if(y=W===0){var D=String(a.D).match(mg)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),y=!ES.test(D?D.toLowerCase():"")}m=y}if(m)Ke(a,"complete"),Ke(a,"success");else{a.m=6;try{var O=2<Gn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",Sg(a)}}finally{al(a)}}}}function al(a,d){if(a.g){Cg(a);const m=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Ke(a,"ready");try{m.onreadystatechange=y}catch{}}}function Cg(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Gn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),eS(d)}};function Rg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function TS(a){const d={};a=(a.g&&2<=Gn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(_(a[y]))continue;var m=b(a[y]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const O=d[D]||[];d[D]=O,O.push(m)}I(d,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ho(a,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||d}function Pg(a){this.Aa=0,this.i=[],this.j=new io,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ho("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ho("baseRetryDelayMs",5e3,a),this.cb=ho("retryDelaySeedMs",1e4,a),this.Wa=ho("forwardChannelMaxRetries",2,a),this.wa=ho("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ug(a&&a.concurrentRequestLimit),this.Da=new _S,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Pg.prototype,t.la=8,t.G=1,t.connect=function(a,d,m,y){Rt(0),this.W=a,this.H=d||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=Mg(this,null,this.W),ul(this)};function ud(a){if(bg(a),a.G==3){var d=a.U++,m=Wn(a.I);if(Ae(m,"SID",a.K),Ae(m,"RID",d),Ae(m,"TYPE","terminate"),fo(a,m),d=new hr(a,a.j,d),d.L=2,d.v=il(Wn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=d.v,m=!0),m||(d.g=Fg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),tl(d)}Lg(a)}function ll(a){a.g&&(dd(a),a.g.cancel(),a.g=null)}function bg(a){ll(a),a.u&&(l.clearTimeout(a.u),a.u=null),cl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ul(a){if(!cg(a.h)&&!a.s){a.s=!0;var d=a.Ga;Ze||Z(),G||(Ze(),G=!0),Q.add(d,a),a.B=0}}function SS(a,d){return dg(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ro(p(a.Ga,a,d),Vg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new hr(this,this.j,a);let O=this.o;if(this.S&&(O?(O=v(O),A(O,this.S)):O=this.S),this.m!==null||this.O||(D.H=O,O=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=kg(this,D,d),m=Wn(this.I),Ae(m,"RID",a),Ae(m,"CVER",22),this.D&&Ae(m,"X-HTTP-Session-Id",this.D),fo(this,m),O&&(this.O?d="headers="+encodeURIComponent(String(Ig(O)))+"&"+d:this.m&&ld(m,this.m,O)),ad(this.h,D),this.Ua&&Ae(m,"TYPE","init"),this.P?(Ae(m,"$req",d),Ae(m,"SID","null"),D.T=!0,rd(D,m,null)):rd(D,m,d),this.G=2}}else this.G==3&&(a?xg(this,a):this.i.length==0||cg(this.h)||xg(this))};function xg(a,d){var m;d?m=d.l:m=a.U++;const y=Wn(a.I);Ae(y,"SID",a.K),Ae(y,"RID",m),Ae(y,"AID",a.T),fo(a,y),a.m&&a.o&&ld(y,a.m,a.o),m=new hr(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),d&&(a.i=d.D.concat(a.i)),d=kg(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ad(a.h,m),rd(m,y,d)}function fo(a,d){a.H&&V(a.H,function(m,y){Ae(d,y,m)}),a.l&&pg({},function(m,y){Ae(d,y,m)})}function kg(a,d,m){m=Math.min(a.i.length,m);var y=a.l?p(a.l.Na,a.l,a):null;e:{var D=a.i;let O=-1;for(;;){const W=["count="+m];O==-1?0<m?(O=D[0].g,W.push("ofs="+O)):O=0:W.push("ofs="+O);let Ee=!0;for(let st=0;st<m;st++){let pe=D[st].g;const gt=D[st].map;if(pe-=O,0>pe)O=Math.max(0,D[st].g-100),Ee=!1;else try{wS(gt,W,"req"+pe+"_")}catch{y&&y(gt)}}if(Ee){y=W.join("&");break e}}}return a=a.i.splice(0,m),d.D=a,y}function Dg(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Ze||Z(),G||(Ze(),G=!0),Q.add(d,a),a.v=0}}function cd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ro(p(a.Fa,a),Vg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Ng(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ro(p(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),ll(this),Ng(this))};function dd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Ng(a){a.g=new hr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Wn(a.qa);Ae(d,"RID","rpc"),Ae(d,"SID",a.K),Ae(d,"AID",a.T),Ae(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ae(d,"TO",a.ja),Ae(d,"TYPE","xmlhttp"),fo(a,d),a.m&&a.o&&ld(d,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=il(Wn(d)),m.m=null,m.P=!0,og(m,a)}t.Za=function(){this.C!=null&&(this.C=null,ll(this),cd(this),Rt(19))};function cl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Og(a,d){var m=null;if(a.g==d){cl(a),dd(a),a.g=null;var y=2}else if(od(a.h,d))m=d.D,hg(a.h,d),y=1;else return;if(a.G!=0){if(d.o)if(y==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var D=a.B;y=Ja(),Ke(y,new ng(y,m)),ul(a)}else Dg(a);else if(D=d.s,D==3||D==0&&0<d.X||!(y==1&&SS(a,d)||y==2&&cd(a)))switch(m&&0<m.length&&(d=a.h,d.i=d.i.concat(m)),D){case 1:hi(a,5);break;case 4:hi(a,10);break;case 3:hi(a,6);break;default:hi(a,2)}}}function Vg(a,d){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*d}function hi(a,d){if(a.j.info("Error code "+d),d==2){var m=p(a.fb,a),y=a.Xa;const D=!y;y=new di(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||nl(y,"https"),il(y),D?yS(y.toString(),m):vS(y.toString(),m)}else Rt(2);a.G=0,a.l&&a.l.sa(d),Lg(a),bg(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Lg(a){if(a.G=0,a.ka=[],a.l){const d=fg(a.h);(d.length!=0||a.i.length!=0)&&(P(a.ka,d),P(a.ka,a.i),a.h.i.length=0,C(a.i),a.i.length=0),a.l.ra()}}function Mg(a,d,m){var y=m instanceof di?Wn(m):new di(m);if(y.g!="")d&&(y.g=d+"."+y.g),rl(y,y.s);else{var D=l.location;y=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var O=new di(null);y&&nl(O,y),d&&(O.g=d),D&&rl(O,D),m&&(O.l=m),y=O}return m=a.D,d=a.ya,m&&d&&Ae(y,m,d),Ae(y,"VER",a.la),fo(a,y),y}function Fg(a,d,m){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Le(new sl({eb:m})):new Le(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ug(){}t=Ug.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function dl(){}dl.prototype.g=function(a,d){return new Gt(a,d)};function Gt(a,d){$e.call(this),this.g=new Pg(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!_(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new $i(this)}w(Gt,$e),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){ud(this.g)},Gt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=Xc(a),a=m);d.i.push(new aS(d.Ya++,a)),d.G==3&&ul(d)},Gt.prototype.N=function(){this.g.l=null,delete this.j,ud(this.g),delete this.g,Gt.aa.N.call(this)};function Bg(a){Zc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const m in d){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}w(Bg,Zc);function jg(){ed.call(this),this.status=1}w(jg,ed);function $i(a){this.g=a}w($i,Ug),$i.prototype.ua=function(){Ke(this.g,"a")},$i.prototype.ta=function(a){Ke(this.g,new Bg(a))},$i.prototype.sa=function(a){Ke(this.g,new jg)},$i.prototype.ra=function(){Ke(this.g,"b")},dl.prototype.createWebChannel=dl.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,_I=function(){return new dl},vI=function(){return Ja()},yI=ui,ff={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Za.NO_ERROR=0,Za.TIMEOUT=8,Za.HTTP_ERROR=6,ru=Za,rg.COMPLETE="complete",gI=rg,Jm.EventType=to,to.OPEN="a",to.CLOSE="b",to.ERROR="c",to.MESSAGE="d",$e.prototype.listen=$e.prototype.K,bo=Jm,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,mI=Le}).apply(typeof kl<"u"?kl:typeof self<"u"?self:typeof window<"u"?window:{});const Av="@firebase/firestore",Cv="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ws="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new Np("@firebase/firestore");function Hi(){return Kr.logLevel}function Fx(t){Kr.setLogLevel(t)}function H(t,...e){if(Kr.logLevel<=oe.DEBUG){const n=e.map(Wp);Kr.debug(`Firestore (${Ws}): ${t}`,...n)}}function lr(t,...e){if(Kr.logLevel<=oe.ERROR){const n=e.map(Wp);Kr.error(`Firestore (${Ws}): ${t}`,...n)}}function Ps(t,...e){if(Kr.logLevel<=oe.WARN){const n=e.map(Wp);Kr.warn(`Firestore (${Ws}): ${t}`,...n)}}function Wp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,wI(t,r,n)}function wI(t,e,n){let r=`FIRESTORE (${Ws}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw lr(r),new Error(r)}function ve(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||wI(e,i,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ux{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class Bx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class jx{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ve(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Si;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Si,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Si)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string",31837,{l:r}),new EI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class $x{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zx{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new $x(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wx{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,on(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ve(this.o===void 0,3512);const r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Rv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Rv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Gx(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function pf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Hd(i)===Hd(s)?ae(i,s):Hd(i)?1:-1}return ae(t.length,e.length)}const Hx=55296,qx=57343;function Hd(t){const e=t.charCodeAt(0);return e>=Hx&&e<=qx}function bs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="__name__";class Nn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ee(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Nn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Nn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ae(e.length,n.length)}static compareSegments(e,n){const r=Nn.isNumericId(e),i=Nn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Nn.extractNumericId(e).compare(Nn.extractNumericId(n)):pf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jr.fromString(e.substring(4,e.length-2))}}class Te extends Nn{construct(e,n,r){return new Te(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const Kx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Nn{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return Kx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Pv}static keyField(){return new lt([Pv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Te.fromString(e))}static fromName(e){return new J(Te.fromString(e).popFirst(5))}static empty(){return new J(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(t,e,n){if(!n)throw new q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Qx(t,e,n,r){if(e===!0&&r===!0)throw new q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bv(t){if(!J.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xv(t){if(J.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee(12329,{type:typeof t})}function $r(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pc(t);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t,e){const n={typeString:t};return e&&(n.value=e),n}function ja(t,e){if(!TI(t))throw new q(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new q(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=-62135596800,Dv=1e6;class Re{static now(){return Re.fromMillis(Date.now())}static fromDate(e){return Re.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Dv);return new Re(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<kv)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Dv}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ja(e,Re._jsonSchema))return new Re(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Re._jsonSchemaVersion="firestore/timestamp/1.0",Re._jsonSchema={type:He("string",Re._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Re(0,0))}static max(){return new re(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=-1;function Yx(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Re(n+1,0):new Re(n,r));return new Qr(i,J.empty(),e)}function Xx(t){return new Qr(t.readTime,t.key,ma)}class Qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qr(re.min(),J.empty(),ma)}static max(){return new Qr(re.max(),J.empty(),ma)}}function Jx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ek{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gs(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==Zx)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++l,l===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function tk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=-1;function xc(t){return t==null}function $u(t){return t===0&&1/t==-1/0}function nk(t){return typeof t=="number"&&Number.isInteger(t)&&!$u(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="";function rk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Nv(e)),e=ik(t.get(n),e);return Nv(e)}function ik(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case SI:n+="";break;default:n+=s}}return n}function Nv(t){return t+SI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function si(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function AI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dl(this.root,e,this.comparator,!0)}}class Dl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??at.RED,this.left=i??at.EMPTY,this.right=s??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new at(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return at.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vv(this.data.getIterator())}getIteratorFrom(e){return new Vv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class Vv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new Xe(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new CI("Invalid base64 string: "+s):s}}(e);return new ft(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const sk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(ve(!!t,39018),typeof t=="string"){let e=0;const n=sk.exec(t);if(ve(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xr(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="server_timestamp",PI="__type__",bI="__previous_value__",xI="__local_write_time__";function qp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[PI])==null?void 0:r.stringValue)===RI}function kc(t){const e=t.mapValue.fields[bI];return qp(e)?kc(e):e}function ga(t){const e=Yr(t.mapValue.fields[xI].timestampValue);return new Re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n,r,i,s,o,l,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const zu="(default)";class ya{constructor(e,n){this.projectId=e,this.database=n||zu}static empty(){return new ya("","")}get isDefaultDatabase(){return this.database===zu}isEqual(e){return e instanceof ya&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="__type__",DI="__max__",Nl={mapValue:{fields:{__type__:{stringValue:DI}}}},NI="__vector__",Wu="value";function Jr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qp(t)?4:lk(t)?9007199254740991:ak(t)?10:11:ee(28295,{value:t})}function zn(t,e){if(t===e)return!0;const n=Jr(t);if(n!==Jr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ga(t).isEqual(ga(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Yr(i.timestampValue),l=Yr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Xr(i.bytesValue).isEqual(Xr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Be(i.geoPointValue.latitude)===Be(s.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Be(i.integerValue)===Be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Be(i.doubleValue),l=Be(s.doubleValue);return o===l?$u(o)===$u(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return bs(t.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Ov(o)!==Ov(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!zn(o[u],l[u])))return!1;return!0}(t,e);default:return ee(52216,{left:t})}}function va(t,e){return(t.values||[]).find(n=>zn(n,e))!==void 0}function xs(t,e){if(t===e)return 0;const n=Jr(t),r=Jr(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Be(s.integerValue||s.doubleValue),u=Be(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Lv(t.timestampValue,e.timestampValue);case 4:return Lv(ga(t),ga(e));case 5:return pf(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Xr(s),u=Xr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=ae(l[c],u[c]);if(h!==0)return h}return ae(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ae(Be(s.latitude),Be(o.latitude));return l!==0?l:ae(Be(s.longitude),Be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Mv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,g,w,C;const l=s.fields||{},u=o.fields||{},c=(p=l[Wu])==null?void 0:p.arrayValue,h=(g=u[Wu])==null?void 0:g.arrayValue,f=ae(((w=c==null?void 0:c.values)==null?void 0:w.length)||0,((C=h==null?void 0:h.values)==null?void 0:C.length)||0);return f!==0?f:Mv(c,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Nl.mapValue&&o===Nl.mapValue)return 0;if(s===Nl.mapValue)return 1;if(o===Nl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=pf(u[f],h[f]);if(p!==0)return p;const g=xs(l[u[f]],c[h[f]]);if(g!==0)return g}return ae(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ee(23264,{he:n})}}function Lv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Yr(t),r=Yr(e),i=ae(n.seconds,r.seconds);return i!==0?i:ae(n.nanos,r.nanos)}function Mv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=xs(n[i],r[i]);if(s)return s}return ae(n.length,r.length)}function ks(t){return mf(t)}function mf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=mf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${mf(n.fields[o])}`;return i+"}"}(t.mapValue):ee(61005,{value:t})}function iu(t){switch(Jr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kc(t);return e?16+iu(e):16;case 5:return 2*t.stringValue.length;case 6:return Xr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+iu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return si(r.fields,(s,o)=>{i+=s.length+iu(o)}),i}(t.mapValue);default:throw ee(13486,{value:t})}}function Fv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gf(t){return!!t&&"integerValue"in t}function Kp(t){return!!t&&"arrayValue"in t}function Uv(t){return!!t&&"nullValue"in t}function Bv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function su(t){return!!t&&"mapValue"in t}function ak(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[kI])==null?void 0:r.stringValue)===NI}function Wo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return si(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Wo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wo(t.arrayValue.values[n]);return e}return{...t}}function lk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===DI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!su(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wo(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Wo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());su(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];su(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){si(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mt(Wo(this.value))}}function OI(t){const e=[];return si(t.fields,(n,r)=>{const i=new lt([n]);if(su(r)){const s=OI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Tt(e,0,re.min(),re.min(),re.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,i){return new Tt(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new Tt(e,2,n,re.min(),re.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,re.min(),re.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n){this.position=e,this.inclusive=n}}function jv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=xs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function $v(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n="asc"){this.field=e,this.dir=n}}function uk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{}class Ge extends VI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new dk(e,n,r):n==="array-contains"?new pk(e,r):n==="in"?new mk(e,r):n==="not-in"?new gk(e,r):n==="array-contains-any"?new yk(e,r):new Ge(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hk(e,r):new fk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(xs(n,this.value)):n!==null&&Jr(this.value)===Jr(n)&&this.matchesComparison(xs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pn extends VI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Pn(e,n)}matches(e){return LI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function LI(t){return t.op==="and"}function MI(t){return ck(t)&&LI(t)}function ck(t){for(const e of t.filters)if(e instanceof Pn)return!1;return!0}function yf(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+ks(t.value);if(MI(t))return t.filters.map(e=>yf(e)).join(",");{const e=t.filters.map(n=>yf(n)).join(",");return`${t.op}(${e})`}}function FI(t,e){return t instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.field.isEqual(i.field)&&zn(r.value,i.value)}(t,e):t instanceof Pn?function(r,i){return i instanceof Pn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&FI(o,i.filters[l]),!0):!1}(t,e):void ee(19439)}function UI(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${ks(n.value)}`}(t):t instanceof Pn?function(n){return n.op.toString()+" {"+n.getFilters().map(UI).join(" ,")+"}"}(t):"Filter"}class dk extends Ge{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class hk extends Ge{constructor(e,n){super(e,"in",n),this.keys=BI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fk extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=BI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function BI(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class pk extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kp(n)&&va(n.arrayValue,this.value)}}class mk extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&va(this.value.arrayValue,n)}}class gk extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(va(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!va(this.value.arrayValue,n)}}class yk extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>va(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function zv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new vk(t,e,n,r,i,s,o)}function Qp(t){const e=ie(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),xc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ks(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ks(r)).join(",")),e.Te=n}return e.Te}function Yp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$v(t.startAt,e.startAt)&&$v(t.endAt,e.endAt)}function vf(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _k(t,e,n,r,i,s,o,l){return new $a(t,e,n,r,i,s,o,l)}function Xp(t){return new $a(t)}function Wv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jI(t){return t.collectionGroup!==null}function Go(t){const e=ie(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Xe(lt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Hu(s,r))}),n.has(lt.keyField().canonicalString())||e.Ie.push(new Hu(lt.keyField(),r))}return e.Ie}function Un(t){const e=ie(t);return e.Ee||(e.Ee=wk(e,Go(t))),e.Ee}function wk(t,e){if(t.limitType==="F")return zv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Hu(i.field,s)});const n=t.endAt?new Gu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gu(t.startAt.position,t.startAt.inclusive):null;return zv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _f(t,e){const n=t.filters.concat([e]);return new $a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wf(t,e,n){return new $a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dc(t,e){return Yp(Un(t),Un(e))&&t.limitType===e.limitType}function $I(t){return`${Qp(Un(t))}|lt:${t.limitType}`}function qi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>UI(i)).join(", ")}]`),xc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ks(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ks(i)).join(",")),`Target(${r})`}(Un(t))}; limitType=${t.limitType})`}function Nc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Go(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=jv(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,Go(r),i)||r.endAt&&!function(o,l,u){const c=jv(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,Go(r),i))}(t,e)}function Ek(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zI(t){return(e,n)=>{let r=!1;for(const i of Go(t)){const s=Ik(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Ik(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?xs(u,c):ee(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){si(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return AI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=new Ve(J.comparator);function ur(){return Tk}const WI=new Ve(J.comparator);function xo(...t){let e=WI;for(const n of t)e=e.insert(n.key,n);return e}function GI(t){let e=WI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ei(){return Ho()}function HI(){return Ho()}function Ho(){return new Fi(t=>t.toString(),(t,e)=>t.isEqual(e))}const Sk=new Ve(J.comparator),Ak=new Xe(J.comparator);function le(...t){let e=Ak;for(const n of t)e=e.add(n);return e}const Ck=new Xe(ae);function Rk(){return Ck}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$u(e)?"-0":e}}function qI(t){return{integerValue:""+t}}function Pk(t,e){return nk(e)?qI(e):Jp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this._=void 0}}function bk(t,e,n){return t instanceof _a?function(i,s){const o={fields:{[PI]:{stringValue:RI},[xI]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&qp(s)&&(s=kc(s)),s&&(o.fields[bI]=s),{mapValue:o}}(n,e):t instanceof wa?QI(t,e):t instanceof Ea?YI(t,e):function(i,s){const o=KI(i,s),l=Gv(o)+Gv(i.Ae);return gf(o)&&gf(i.Ae)?qI(l):Jp(i.serializer,l)}(t,e)}function xk(t,e,n){return t instanceof wa?QI(t,e):t instanceof Ea?YI(t,e):n}function KI(t,e){return t instanceof qu?function(r){return gf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class _a extends Oc{}class wa extends Oc{constructor(e){super(),this.elements=e}}function QI(t,e){const n=XI(e);for(const r of t.elements)n.some(i=>zn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ea extends Oc{constructor(e){super(),this.elements=e}}function YI(t,e){let n=XI(e);for(const r of t.elements)n=n.filter(i=>!zn(i,r));return{arrayValue:{values:n}}}class qu extends Oc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Gv(t){return Be(t.integerValue||t.doubleValue)}function XI(t){return Kp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n){this.field=e,this.transform=n}}function Dk(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof wa&&i instanceof wa||r instanceof Ea&&i instanceof Ea?bs(r.elements,i.elements,zn):r instanceof qu&&i instanceof qu?zn(r.Ae,i.Ae):r instanceof _a&&i instanceof _a}(t.transform,e.transform)}class Nk{constructor(e,n){this.version=e,this.transformResults=n}}class Cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ou(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vc{}function JI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zp(t.key,Cn.none()):new za(t.key,t.data,Cn.none());{const n=t.data,r=Mt.empty();let i=new Xe(lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new oi(t.key,r,new Kt(i.toArray()),Cn.none())}}function Ok(t,e,n){t instanceof za?function(i,s,o){const l=i.value.clone(),u=qv(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof oi?function(i,s,o){if(!ou(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=qv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(ZI(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function qo(t,e,n,r){return t instanceof za?function(s,o,l,u){if(!ou(s.precondition,o))return l;const c=s.value.clone(),h=Kv(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof oi?function(s,o,l,u){if(!ou(s.precondition,o))return l;const c=Kv(s.fieldTransforms,u,o),h=o.data;return h.setAll(ZI(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,l){return ou(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Vk(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=KI(r.transform,i||null);s!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,s))}return n||null}function Hv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bs(r,i,(s,o)=>Dk(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class za extends Vc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class oi extends Vc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ZI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qv(t,e,n){const r=new Map;ve(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,xk(o,l,n[i]))}return r}function Kv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,bk(s,o,e))}return r}class Zp extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lk extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Ok(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=HI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=JI(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&bs(this.mutations,e.mutations,(n,r)=>Hv(n,r))&&bs(this.baseMutations,e.baseMutations,(n,r)=>Hv(n,r))}}class em{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return Sk}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new em(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,ce;function Bk(t){switch(t){case F.OK:return ee(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ee(15467,{code:t})}}function eT(t){if(t===void 0)return lr("GRPC error has no .code"),F.UNKNOWN;switch(t){case ze.OK:return F.OK;case ze.CANCELLED:return F.CANCELLED;case ze.UNKNOWN:return F.UNKNOWN;case ze.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ze.INTERNAL:return F.INTERNAL;case ze.UNAVAILABLE:return F.UNAVAILABLE;case ze.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ze.NOT_FOUND:return F.NOT_FOUND;case ze.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ze.ABORTED:return F.ABORTED;case ze.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ze.DATA_LOSS:return F.DATA_LOSS;default:return ee(39323,{code:t})}}(ce=ze||(ze={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new jr([4294967295,4294967295],0);function Qv(t){const e=jk().encode(t),n=new pI;return n.update(e),new Uint8Array(n.digest())}function Yv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new jr([n,r],0),new jr([i,s],0)]}class tm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ko(`Invalid padding: ${n}`);if(r<0)throw new ko(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ko(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ko(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=jr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(jr.fromNumber(r)));return i.compare($k)===1&&(i=new jr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Qv(e),[r,i]=Yv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new tm(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Qv(e),[r,i]=Yv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Wa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lc(re.min(),i,new Ve(ae),ur(),le())}}class Wa{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Wa(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class tT{constructor(e,n){this.targetId=e,this.Ce=n}}class nT{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Xv{constructor(){this.ve=0,this.Fe=Jv(),this.Me=ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),n=le(),r=le();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee(38017,{changeType:s})}}),new Wa(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Jv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class zk{constructor(e){this.Ge=e,this.ze=new Map,this.je=ur(),this.Je=Ol(),this.He=Ol(),this.Ye=new Ve(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(vf(s))if(r===0){const o=new J(s.path);this.et(n,o,Tt.newNoDocument(o,re.min()))}else ve(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Xr(r).toUint8Array()}catch(u){if(u instanceof CI)return Ps("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new tm(o,i,s)}catch(u){return Ps(u instanceof ko?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&vf(l.target)){const u=new J(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Tt.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=le();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Lc(e,n,this.Ye,this.je,r);return this.je=ur(),this.Je=Ol(),this.He=Ol(),this.Ye=new Ve(ae),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Xv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Xe(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Xe(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Xv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ol(){return new Ve(J.comparator)}function Jv(){return new Ve(J.comparator)}const Wk=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Gk=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Hk=(()=>({and:"AND",or:"OR"}))();class qk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ef(t,e){return t.useProto3Json||xc(e)?e:{value:e}}function Ku(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Kk(t,e){return Ku(t,e.toTimestamp())}function Bn(t){return ve(!!t,49232),re.fromTimestamp(function(n){const r=Yr(n);return new Re(r.seconds,r.nanos)}(t))}function nm(t,e){return If(t,e).canonicalString()}function If(t,e){const n=function(i){return new Te(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iT(t){const e=Te.fromString(t);return ve(uT(e),10190,{key:e.toString()}),e}function Tf(t,e){return nm(t.databaseId,e.path)}function qd(t,e){const n=iT(e);if(n.get(1)!==t.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(oT(n))}function sT(t,e){return nm(t.databaseId,e)}function Qk(t){const e=iT(t);return e.length===4?Te.emptyPath():oT(e)}function Sf(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oT(t){return ve(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Zv(t,e,n){return{name:Tf(t,e),fields:n.value.mapValue.fields}}function Yk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ve(h===void 0||typeof h=="string",58123),ft.fromBase64String(h||"")):(ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ft.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const h=c.code===void 0?F.UNKNOWN:eT(c.code);return new q(h,c.message||"")}(o);n=new nT(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=qd(t,r.document.name),s=Bn(r.document.updateTime),o=r.document.createTime?Bn(r.document.createTime):re.min(),l=new Mt({mapValue:{fields:r.document.fields}}),u=Tt.newFoundDocument(i,s,o,l),c=r.targetIds||[],h=r.removedTargetIds||[];n=new au(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=qd(t,r.document),s=r.readTime?Bn(r.readTime):re.min(),o=Tt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new au([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=qd(t,r.document),s=r.removedTargetIds||[];n=new au([],s,i,null)}else{if(!("filter"in e))return ee(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Uk(i,s),l=r.targetId;n=new tT(l,o)}}return n}function Xk(t,e){let n;if(e instanceof za)n={update:Zv(t,e.key,e.value)};else if(e instanceof Zp)n={delete:Tf(t,e.key)};else if(e instanceof oi)n={update:Zv(t,e.key,e.data),updateMask:oD(e.fieldMask)};else{if(!(e instanceof Lk))return ee(16599,{Vt:e.type});n={verify:Tf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof _a)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof wa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ea)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof qu)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ee(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Kk(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee(27497)}(t,e.precondition)),n}function Jk(t,e){return t&&t.length>0?(ve(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Bn(i.updateTime):Bn(s);return o.isEqual(re.min())&&(o=Bn(s)),new Nk(o,i.transformResults||[])}(n,e))):[]}function Zk(t,e){return{documents:[sT(t,e.path)]}}function eD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=sT(t,i);const s=function(c){if(c.length!==0)return lT(Pn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Ki(p.field),direction:rD(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Ef(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function tD(t){let e=Qk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ve(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=aT(f);return p instanceof Pn&&MI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new Hu(Qi(w.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,xc(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(f){const p=!!f.before,g=f.values||[];return new Gu(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new Gu(g,p)}(n.endAt)),_k(e,i,o,s,l,"F",u,c)}function nD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qi(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qi(n.unaryFilter.field);return Ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qi(n.unaryFilter.field);return Ge.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qi(n.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(Qi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pn.create(n.compositeFilter.filters.map(r=>aT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee(1026)}}(n.compositeFilter.op))}(t):ee(30097,{filter:t})}function rD(t){return Wk[t]}function iD(t){return Gk[t]}function sD(t){return Hk[t]}function Ki(t){return{fieldPath:t.canonicalString()}}function Qi(t){return lt.fromServerFormat(t.fieldPath)}function lT(t){return t instanceof Ge?function(n){if(n.op==="=="){if(Bv(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NAN"}};if(Uv(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Bv(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NOT_NAN"}};if(Uv(n.value))return{unaryFilter:{field:Ki(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ki(n.field),op:iD(n.op),value:n.value}}}(t):t instanceof Pn?function(n){const r=n.getFilters().map(i=>lT(i));return r.length===1?r[0]:{compositeFilter:{op:sD(n.op),filters:r}}}(t):ee(54877,{filter:t})}function oD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,i,s=re.min(),o=re.min(),l=ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.yt=e}}function lD(t){const e=tD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(){this.Cn=new cD}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Qr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class cD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xe(Te.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xe(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cT=41943040;class Vt{static withCacheSize(e){return new Vt(e,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(cT,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ds(0)}static cr(){return new Ds(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="LruGarbageCollector",dD=1048576;function n_([t,e],[n,r]){const i=ae(t,n);return i===0?ae(e,r):i}class hD{constructor(e){this.Ir=e,this.buffer=new Xe(n_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();n_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fD{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(t_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hs(n)?H(t_,"Ignoring IndexedDB error during garbage collection: ",n):await Gs(n)}await this.Vr(3e5)})}}class pD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(bc.ce);const r=new hD(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(e_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),e_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Hi()<=oe.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function mD(t,e){return new pD(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.changes=new Fi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&qo(r.mutation,i,Kt.empty(),Re.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const i=Ei();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=xo();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ei();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=ur();const o=Ho(),l=function(){return Ho()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof oi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),qo(h.mutation,c,h.mutation.getFieldMask(),Re.now())):o.set(c.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>l.set(c,new yD(h,o.get(c)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Ho();let i=new Ve((o,l)=>o-l),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Kt.empty();h=l.applyToLocalView(c,h),r.set(u,h);const f=(i.get(l.batchId)||le()).add(u);i=i.insert(l.batchId,f)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,f=HI();h.forEach(p=>{if(!s.has(p)){const g=JI(n.get(p),r.get(p));g!==null&&f.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Ei());let l=ma,u=s;return o.next(c=>U.forEach(c,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,le())).next(h=>({batchId:l,changes:GI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=xo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=xo();return this.indexManager.getCollectionParents(e,s).next(l=>U.forEach(l,u=>{const c=function(f,p){return new $a(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Tt.newInvalidDocument(h)))});let l=xo();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&qo(h.mutation,c,Kt.empty(),Re.now()),Nc(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:lD(i.bundledQuery),readTime:Bn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(){this.overlays=new Ve(J.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ei();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Ei(),s=n.length+1,o=new J(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ve((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Ei(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=Ei(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=i)););return U.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Fk(n,r));let s=this.qr.get(n);s===void 0&&(s=le(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(){this.Qr=new Xe(et.$r),this.Ur=new Xe(et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new et(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new et(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new Te([])),r=new et(n,e),i=new et(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new Te([])),r=new et(n,e),i=new et(n,e+1);let s=le();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new et(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class et{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Xe(et.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Mk(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new et(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Hp:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new et(n,0),i=new et(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(ae);return n.forEach(i=>{const s=new et(i,0),o=new et(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new et(new J(s),0);let l=new Xe(ae);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.Yr)),!0)},o),U.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ve(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,i=>{const s=new et(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new et(n,0),i=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.ri=e,this.docs=function(){return new Ve(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Tt.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ur();const o=n.path,l=new J(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Jx(Xx(h),r)<=0||(i.has(h.key)||Nc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ee(9500)}ii(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new SD(this)}getSize(e){return U.resolve(this.size)}}class SD extends gD{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.persistence=e,this.si=new Fi(n=>Qp(n),Yp),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new rm,this.targetCount=0,this.ai=Ds.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ds(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n){this.ui={},this.overlays={},this.ci=new bc(0),this.li=!1,this.li=!0,this.hi=new ED,this.referenceDelegate=e(this),this.Pi=new AD(this),this.indexManager=new uD,this.remoteDocumentCache=function(i){return new TD(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new aD(n),this.Ii=new _D(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new ID(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const i=new CD(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class CD extends ek{constructor(e){super(),this.currentSequenceNumber=e}}class im{constructor(e){this.persistence=e,this.Ri=new rm,this.Vi=null}static mi(e){return new im(e)}get fi(){if(this.Vi)return this.Vi;throw ee(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{const i=J.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Qu{constructor(e,n){this.persistence=e,this.pi=new Fi(r=>rk(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=mD(this,n)}static mi(e,n){return new Qu(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?U.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,re.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=iu(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=le(),i=le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new sm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return gR()?8:tk(At())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new RD;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Hi()<=oe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",qi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(Hi()<=oe.DEBUG&&H("QueryEngine","Query:",qi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Hi()<=oe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",qi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(n))):U.resolve())}ys(e,n){if(Wv(n))return U.resolve(null);let r=Un(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wf(n,null,"F"),r=Un(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=le(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Ds(n,l);return this.Cs(n,c,o,u.readTime)?this.ys(e,wf(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,r,i){return Wv(n)||i.isEqual(re.min())?U.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?U.resolve(null):(Hi()<=oe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qi(n)),this.vs(e,o,n,Yx(i,ma)).next(l=>l))})}Ds(e,n){let r=new Xe(zI(e));return n.forEach((i,s)=>{Nc(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Hi()<=oe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",qi(n)),this.ps.getDocumentsMatchingQuery(e,n,Qr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="LocalStore",bD=3e8;class xD{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ve(ae),this.xs=new Fi(s=>Qp(s),Yp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function kD(t,e,n,r){return new xD(t,e,n,r)}async function hT(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=le();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:l}))})})}function DD(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const f=c.batch,p=f.keys();let g=U.resolve();return p.forEach(w=>{g=g.next(()=>h.getEntry(u,w)).next(C=>{const P=c.docVersions.get(w);ve(P!==null,48541),C.version.compareTo(P)<0&&(f.applyToRemoteDocument(C,c),C.isValidDocument()&&(C.setReadTime(c.commitVersion),h.addEntry(C)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=le();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function fT(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function ND(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,f)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(ft.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(f,g),function(C,P,E){return C.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=bD?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,g,h)&&l.push(n.Pi.updateTargetData(s,g))});let u=ur(),c=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(OD(s,o,e.documentUpdates).next(h=>{u=h.ks,c=h.qs})),!r.isEqual(re.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(f=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return U.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ms=i,s))}function OD(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ur();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):H(om,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{ks:o,qs:i}})}function VD(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Hp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function LD(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new br(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Af(t,e,n){const r=ie(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Hs(o))throw o;H(om,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function r_(t,e,n){const r=ie(t);let i=re.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=ie(u),p=f.xs.get(h);return p!==void 0?U.resolve(f.Ms.get(p)):f.Pi.getTargetData(c,h)}(r,o,Un(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:le())).next(l=>(MD(r,Ek(e),l),{documents:l,Qs:s})))}function MD(t,e,n){let r=t.Os.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class i_{constructor(){this.activeTargetIds=Rk()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FD{constructor(){this.Mo=new i_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new i_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="ConnectivityMonitor";class o_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(s_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(s_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl=null;function Cf(){return Vl===null?Vl=function(){return 268435456+Math.round(2147483648*Math.random())}():Vl++,"0x"+Vl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="RestConnection",BD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===zu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=Cf(),l=this.zo(e,n.toUriEncodedString());H(Kd,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:c}=new URL(l),h=js(c);return this.Jo(e,l,u,r,h).then(f=>(H(Kd,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Ps(Kd,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ws}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=BD[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class zD extends jD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Cf();return new Promise((l,u)=>{const c=new mI;c.setWithCredentials(!0),c.listenOnce(gI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ru.NO_ERROR:const f=c.getResponseJson();H(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case ru.TIMEOUT:H(wt,`RPC '${e}' ${o} timed out`),u(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case ru.HTTP_ERROR:const p=c.getStatus();if(H(wt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const C=function(E){const _=E.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(_)>=0?_:F.UNKNOWN}(w.status);u(new q(C,w.message))}else u(new q(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new q(F.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{H(wt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);H(wt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",h,r,15)})}T_(e,n,r){const i=Cf(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_I(),l=vI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");H(wt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const f=o.createWebChannel(h,u);this.I_(f);let p=!1,g=!1;const w=new $D({Yo:P=>{g?H(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(p||(H(wt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),H(wt,`RPC '${e}' stream ${i} sending:`,P),f.send(P))},Zo:()=>f.close()}),C=(P,E,_)=>{P.listen(E,T=>{try{_(T)}catch(k){setTimeout(()=>{throw k},0)}})};return C(f,bo.EventType.OPEN,()=>{g||(H(wt,`RPC '${e}' stream ${i} transport opened.`),w.o_())}),C(f,bo.EventType.CLOSE,()=>{g||(g=!0,H(wt,`RPC '${e}' stream ${i} transport closed`),w.a_(),this.E_(f))}),C(f,bo.EventType.ERROR,P=>{g||(g=!0,Ps(wt,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),w.a_(new q(F.UNAVAILABLE,"The operation could not be completed")))}),C(f,bo.EventType.MESSAGE,P=>{var E;if(!g){const _=P.data[0];ve(!!_,16349);const T=_,k=(T==null?void 0:T.error)||((E=T[0])==null?void 0:E.error);if(k){H(wt,`RPC '${e}' stream ${i} received error:`,k);const L=k.status;let V=function(S){const A=ze[S];if(A!==void 0)return eT(A)}(L),I=k.message;V===void 0&&(V=F.INTERNAL,I="Unknown error status: "+L+" with message "+k.message),g=!0,w.a_(new q(V,I)),f.close()}else H(wt,`RPC '${e}' stream ${i} received:`,_),w.u_(_)}}),C(l,yI.STAT_EVENT,P=>{P.stat===ff.PROXY?H(wt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===ff.NOPROXY&&H(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t){return new qk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="PersistentStream";class mT{constructor(e,n,r,i,s,o,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(lr(n.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(a_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(a_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WD extends mT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Yk(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Bn(o.readTime):re.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Sf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=vf(u)?{documents:Zk(s,u)}:{query:eD(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=rT(s,o.resumeToken);const c=Ef(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(re.min())>0){l.readTime=Ku(s,o.snapshotVersion.toTimestamp());const c=Ef(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=nD(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Sf(this.serializer),n.removeTarget=e,this.q_(n)}}class GD extends mT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Jk(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Sf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Xk(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{}class qD extends HD{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,If(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(F.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,If(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class KD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(lr(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="RemoteStore";class QD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ui(this)&&(H(Oi,"Restarting streams for network reachability change."),await async function(u){const c=ie(u);c.Ea.add(4),await Ga(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Fc(c)}(this))})}),this.Ra=new KD(r,i)}}async function Fc(t){if(Ui(t))for(const e of t.da)await e(!0)}async function Ga(t){for(const e of t.da)await e(!1)}function gT(t,e){const n=ie(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),cm(n)?um(n):qs(n).O_()&&lm(n,e))}function am(t,e){const n=ie(t),r=qs(n);n.Ia.delete(e),r.O_()&&yT(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ui(n)&&n.Ra.set("Unknown"))}function lm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qs(t).Y_(e)}function yT(t,e){t.Va.Ue(e),qs(t).Z_(e)}function um(t){t.Va=new zk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),qs(t).start(),t.Ra.ua()}function cm(t){return Ui(t)&&!qs(t).x_()&&t.Ia.size>0}function Ui(t){return ie(t).Ea.size===0}function vT(t){t.Va=void 0}async function YD(t){t.Ra.set("Online")}async function XD(t){t.Ia.forEach((e,n)=>{lm(t,e)})}async function JD(t,e){vT(t),cm(t)?(t.Ra.ha(e),um(t)):t.Ra.set("Unknown")}async function ZD(t,e,n){if(t.Ra.set("Online"),e instanceof nT&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){H(Oi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yu(t,r)}else if(e instanceof au?t.Va.Ze(e):e instanceof tT?t.Va.st(e):t.Va.tt(e),!n.isEqual(re.min()))try{const r=await fT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.Ia.get(c);h&&s.Ia.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=s.Ia.get(u);if(!h)return;s.Ia.set(u,h.withResumeToken(ft.EMPTY_BYTE_STRING,h.snapshotVersion)),yT(s,u);const f=new br(h.target,u,c,h.sequenceNumber);lm(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(Oi,"Failed to raise snapshot:",r),await Yu(t,r)}}async function Yu(t,e,n){if(!Hs(e))throw e;t.Ea.add(1),await Ga(t),t.Ra.set("Offline"),n||(n=()=>fT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Oi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Fc(t)})}function _T(t,e){return e().catch(n=>Yu(t,n,e))}async function Uc(t){const e=ie(t),n=Zr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Hp;for(;eN(e);)try{const i=await VD(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,tN(e,i)}catch(i){await Yu(e,i)}wT(e)&&ET(e)}function eN(t){return Ui(t)&&t.Ta.length<10}function tN(t,e){t.Ta.push(e);const n=Zr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function wT(t){return Ui(t)&&!Zr(t).x_()&&t.Ta.length>0}function ET(t){Zr(t).start()}async function nN(t){Zr(t).ra()}async function rN(t){const e=Zr(t);for(const n of t.Ta)e.ea(n.mutations)}async function iN(t,e,n){const r=t.Ta.shift(),i=em.from(r,e,n);await _T(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Uc(t)}async function sN(t,e){e&&Zr(t).X_&&await async function(r,i){if(function(o){return Bk(o)&&o!==F.ABORTED}(i.code)){const s=r.Ta.shift();Zr(r).B_(),await _T(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Uc(r)}}(t,e),wT(t)&&ET(t)}async function l_(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),H(Oi,"RemoteStore received new credentials");const r=Ui(n);n.Ea.add(3),await Ga(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Fc(n)}async function oN(t,e){const n=ie(t);e?(n.Ea.delete(2),await Fc(n)):e||(n.Ea.add(2),await Ga(n),n.Ra.set("Unknown"))}function qs(t){return t.ma||(t.ma=function(n,r,i){const s=ie(n);return s.sa(),new WD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:YD.bind(null,t),t_:XD.bind(null,t),r_:JD.bind(null,t),H_:ZD.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),cm(t)?um(t):t.Ra.set("Unknown")):(await t.ma.stop(),vT(t))})),t.ma}function Zr(t){return t.fa||(t.fa=function(n,r,i){const s=ie(n);return s.sa(),new GD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:nN.bind(null,t),r_:sN.bind(null,t),ta:rN.bind(null,t),na:iN.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Uc(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Oi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Si,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new dm(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hm(t,e){if(lr("AsyncQueue",`${e}: ${t}`),Hs(t))return new q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{static emptySet(e){return new vs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=xo(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this.ga=new Ve(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ee(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ns{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ns(e,n,vs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class lN{constructor(){this.queries=c_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ie(n),s=i.queries;i.queries=c_(),s.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new q(F.ABORTED,"Firestore shutting down"))}}function c_(){return new Fi(t=>$I(t),Dc)}async function uN(t,e){const n=ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new aN,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=hm(o,`Initialization of query '${qi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&fm(n)}async function cN(t,e){const n=ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function dN(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&fm(n)}function hN(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function fm(t){t.Ca.forEach(e=>{e.next()})}var Rf,d_;(d_=Rf||(Rf={})).Ma="default",d_.Cache="cache";class fN{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ns(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.key=e}}class TT{constructor(e){this.key=e}}class pN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=zI(e),this.tu=new vs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new u_,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),g=Nc(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),C=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;p&&g?p.data.isEqual(g.data)?w!==C&&(r.track({type:3,doc:g}),P=!0):this.su(p,g)||(r.track({type:2,doc:g}),P=!0,(u&&this.eu(g,u)>0||c&&this.eu(g,c)<0)&&(l=!0)):!p&&g?(r.track({type:0,doc:g}),P=!0):p&&!g&&(r.track({type:1,doc:p}),P=!0,(u||c)&&(l=!0)),P&&(g?(o=o.add(g),s=C?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(g,w){const C=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{Rt:P})}};return C(g)-C(w)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,c=u!==this.Za;return this.Za=u,o.length!==0||c?{snapshot:new Ns(this.query,e.tu,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new u_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new TT(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new IT(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ns.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pm="SyncEngine";class mN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class gN{constructor(e){this.key=e,this.hu=!1}}class yN{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Fi(l=>$I(l),Dc),this.Iu=new Map,this.Eu=new Set,this.du=new Ve(J.comparator),this.Au=new Map,this.Ru=new rm,this.Vu={},this.mu=new Map,this.fu=Ds.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function vN(t,e,n=!0){const r=bT(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await ST(r,e,n,!0),i}async function _N(t,e){const n=bT(t);await ST(n,e,!0,!1)}async function ST(t,e,n,r){const i=await LD(t.localStore,Un(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await wN(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&gT(t.remoteStore,i),l}async function wN(t,e,n,r,i){t.pu=(f,p,g)=>async function(C,P,E,_){let T=P.view.ru(E);T.Cs&&(T=await r_(C.localStore,P.query,!1).then(({documents:I})=>P.view.ru(I,T)));const k=_&&_.targetChanges.get(P.targetId),L=_&&_.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(T,C.isPrimaryClient,k,L);return f_(C,P.targetId,V.au),V.snapshot}(t,f,p,g);const s=await r_(t.localStore,e,!0),o=new pN(e,s.Qs),l=o.ru(s.documents),u=Wa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);f_(t,n,c.au);const h=new mN(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function EN(t,e,n){const r=ie(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Dc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Af(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&am(r.remoteStore,i.targetId),Pf(r,i.targetId)}).catch(Gs)):(Pf(r,i.targetId),await Af(r.localStore,i.targetId,!0))}async function IN(t,e){const n=ie(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),am(n.remoteStore,r.targetId))}async function TN(t,e,n){const r=xN(t);try{const i=await function(o,l){const u=ie(o),c=Re.now(),h=l.reduce((g,w)=>g.add(w.key),le());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=ur(),C=le();return u.Ns.getEntries(g,h).next(P=>{w=P,w.forEach((E,_)=>{_.isValidDocument()||(C=C.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,w)).next(P=>{f=P;const E=[];for(const _ of l){const T=Vk(_,f.get(_.key).overlayedDocument);T!=null&&E.push(new oi(_.key,T,OI(T.value.mapValue),Cn.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,E,l)}).next(P=>{p=P;const E=P.applyToLocalDocumentSet(f,C);return u.documentOverlayCache.saveOverlays(g,P.batchId,E)})}).then(()=>({batchId:p.batchId,changes:GI(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ve(ae)),c=c.insert(l,u),o.Vu[o.currentUser.toKey()]=c}(r,i.batchId,n),await Ha(r,i.changes),await Uc(r.remoteStore)}catch(i){const s=hm(i,"Failed to persist write");n.reject(s)}}async function AT(t,e){const n=ie(t);try{const r=await ND(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ve(o.hu,14607):i.removedDocuments.size>0&&(ve(o.hu,42227),o.hu=!1))}),await Ha(n,r,e)}catch(r){await Gs(r)}}function h_(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ie(o);u.onlineState=l;let c=!1;u.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(c=!0)}),c&&fm(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SN(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ve(J.comparator);o=o.insert(s,Tt.newNoDocument(s,re.min()));const l=le().add(s),u=new Lc(re.min(),new Map,new Ve(ae),o,l);await AT(r,u),r.du=r.du.remove(s),r.Au.delete(e),mm(r)}else await Af(r.localStore,e,!1).then(()=>Pf(r,e,n)).catch(Gs)}async function AN(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await DD(n.localStore,e);RT(n,r,null),CT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ha(n,i)}catch(i){await Gs(i)}}async function CN(t,e,n){const r=ie(t);try{const i=await function(o,l){const u=ie(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(f=>(ve(f!==null,37113),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);RT(r,e,n),CT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ha(r,i)}catch(i){await Gs(i)}}function CT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function RT(t,e,n){const r=ie(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Pf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||PT(t,r)})}function PT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(am(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),mm(t))}function f_(t,e,n){for(const r of n)r instanceof IT?(t.Ru.addReference(r.key,e),RN(t,r)):r instanceof TT?(H(pm,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||PT(t,r.key)):ee(19791,{wu:r})}function RN(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(pm,"New document in limbo: "+n),t.Eu.add(r),mm(t))}function mm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(Te.fromString(e)),r=t.fu.next();t.Au.set(r,new gN(n)),t.du=t.du.insert(n,r),gT(t.remoteStore,new br(Un(Xp(n.path)),r,"TargetPurposeLimboResolution",bc.ce))}}async function Ha(t,e,n){const r=ie(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){i.push(c);const f=sm.As(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,c){const h=ie(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(c,p=>U.forEach(p.Es,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>U.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Hs(f))throw f;H(om,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=h.Ms.get(p),w=g.snapshotVersion,C=g.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(p,C)}}}(r.localStore,s))}async function PN(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){H(pm,"User change. New user:",e.toKey());const r=await hT(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new q(F.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ha(n,r.Ls)}}function bN(t,e){const n=ie(t),r=n.Au.get(e);if(r&&r.hu)return le().add(r.key);{let i=le();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function bT(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SN.bind(null,e),e.Pu.H_=dN.bind(null,e.eventManager),e.Pu.yu=hN.bind(null,e.eventManager),e}function xN(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CN.bind(null,e),e}class Xu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return kD(this.persistence,new PD,e.initialUser,this.serializer)}Cu(e){return new dT(im.mi,this.serializer)}Du(e){return new FD}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xu.provider={build:()=>new Xu};class kN extends Xu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ve(this.persistence.referenceDelegate instanceof Qu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new fD(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new dT(r=>Qu.mi(r,n),this.serializer)}}class bf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>h_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PN.bind(null,this.syncEngine),await oN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lN}()}createDatastore(e){const n=Mc(e.databaseInfo.databaseId),r=function(s){return new zD(s)}(e.databaseInfo);return function(s,o,l,u){return new qD(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new QD(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>h_(this.syncEngine,n,0),function(){return o_.v()?new o_:new UD}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,h){const f=new yN(i,s,o,l,u,c);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ie(i);H(Oi,"RemoteStore shutting down."),s.Ea.add(5),await Ga(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}bf.provider={build:()=>new bf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="FirestoreClient";class NN{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=Gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{H(ei,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(ei,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Si;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yd(t,e){t.asyncQueue.verifyOperationInProgress(),H(ei,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await hT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function p_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ON(t);H(ei,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>l_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>l_(e.remoteStore,i)),t._onlineComponents=e}async function ON(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(ei,"Using user provided OfflineComponentProvider");try{await Yd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ps("Error using user provided cache. Falling back to memory cache: "+n),await Yd(t,new Xu)}}else H(ei,"Using default OfflineComponentProvider"),await Yd(t,new kN(void 0));return t._offlineComponents}async function xT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(ei,"Using user provided OnlineComponentProvider"),await p_(t,t._uninitializedComponentsProvider._online)):(H(ei,"Using default OnlineComponentProvider"),await p_(t,new bf))),t._onlineComponents}function VN(t){return xT(t).then(e=>e.syncEngine)}async function m_(t){const e=await xT(t),n=e.eventManager;return n.onListen=vN.bind(null,e.syncEngine),n.onUnlisten=EN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_N.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IN.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="firestore.googleapis.com",y_=!0;class v_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DT,this.ssl=y_}else this.host=e.host,this.ssl=e.ssl??y_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dD)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kT(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new v_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new v_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ux;switch(r.type){case"firstParty":return new zx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=g_.get(n);r&&(H("ComponentProvider","Removing Datastore"),g_.delete(n),r.terminate())}(this),Promise.resolve()}}function LN(t,e,n,r={}){var c;t=$r(t,Bc);const i=js(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(bE(`https://${l}`),xE("Firestore",!0)),s.host!==DT&&s.host!==l&&Ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!ki(u,o)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Et.MOCK_USER;else{h=aR(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Et(p)}t._authCredentials=new Bx(new EI(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ks(this.firestore,e,this._query)}}class qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qe(this.firestore,e,this._key)}toJSON(){return{type:qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ja(n,qe._jsonSchema))return new qe(e,r||null,new J(Te.fromString(n.referencePath)))}}qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:He("string",qe._jsonSchemaVersion),referencePath:He("string")};class zr extends Ks{constructor(e,n,r){super(e,n,Xp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new J(e))}withConverter(e){return new zr(this.firestore,e,this._path)}}function __(t,e,...n){if(t=ht(t),II("collection","path",e),t instanceof Bc){const r=Te.fromString(e,...n);return xv(r),new zr(t,null,r)}{if(!(t instanceof qe||t instanceof zr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return xv(r),new zr(t.firestore,null,r)}}function yr(t,e,...n){if(t=ht(t),arguments.length===1&&(e=Gp.newId()),II("doc","path",e),t instanceof Bc){const r=Te.fromString(e,...n);return bv(r),new qe(t,null,new J(r))}{if(!(t instanceof qe||t instanceof zr))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Te.fromString(e,...n));return bv(r),new qe(t.firestore,t instanceof zr?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="AsyncQueue";class E_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pT(this,"async_queue_retry"),this._c=()=>{const r=Qd();r&&H(w_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Qd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Qd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Si;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hs(e))throw e;H(w_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,lr("INTERNAL UNHANDLED ERROR: ",I_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=dm.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ee(47125,{Pc:I_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function I_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Os extends Bc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new E_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new E_(e),this._firestoreClient=void 0,await e}}}function MN(t,e){const n=typeof t=="object"?t:OE(),r=typeof t=="string"?t:e||zu,i=Vp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=sR("firestore");s&&LN(i,...s)}return i}function NT(t){if(t._terminated)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FN(t),t._firestoreClient}function FN(t){var r,i,s;const e=t._freezeSettings(),n=function(l,u,c,h){return new ok(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,kT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new NN(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this._byteString=e}static fromBase64String(e){try{return new an(ft.fromBase64String(e))}catch(n){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new an(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:an._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ja(e,an._jsonSchema))return an.fromBase64String(e.bytes)}}an._jsonSchemaVersion="firestore/bytes/1.0",an._jsonSchema={type:He("string",an._jsonSchemaVersion),bytes:He("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jn._jsonSchemaVersion}}static fromJSON(e){if(ja(e,jn._jsonSchema))return new jn(e.latitude,e.longitude)}}jn._jsonSchemaVersion="firestore/geoPoint/1.0",jn._jsonSchema={type:He("string",jn._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ja(e,$n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new $n(e.vectorValues);throw new q(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$n._jsonSchemaVersion="firestore/vectorValue/1.0",$n._jsonSchema={type:He("string",$n._jsonSchemaVersion),vectorValues:He("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=/^__.*__$/;class BN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new za(e,this.data,n,this.fieldTransforms)}}class OT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new oi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function VT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ac:t})}}class gm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new gm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ju(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(VT(this.Ac)&&UN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mc(e)}Cc(e,n,r,i=!1){return new gm({Ac:e,methodName:n,Dc:r,path:lt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ym(t){const e=t._freezeSettings(),n=Mc(t._databaseId);return new jN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $N(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);_m("Data must be an object, but it was:",o,r);const l=LT(r,o);let u,c;if(s.merge)u=new Kt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=xf(e,f,n);if(!o.contains(p))throw new q(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);FT(h,p)||h.push(p)}u=new Kt(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new BN(new Mt(l),u,c)}class zc extends $c{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zc}}class vm extends $c{_toFieldTransform(e){return new kk(e.path,new _a)}isEqual(e){return e instanceof vm}}function zN(t,e,n,r){const i=t.Cc(1,e,n);_m("Data must be an object, but it was:",i,r);const s=[],o=Mt.empty();si(r,(u,c)=>{const h=wm(e,u,n);c=ht(c);const f=i.yc(h);if(c instanceof zc)s.push(h);else{const p=qa(c,f);p!=null&&(s.push(h),o.set(h,p))}});const l=new Kt(s);return new OT(o,l,i.fieldTransforms)}function WN(t,e,n,r,i,s){const o=t.Cc(1,e,n),l=[xf(e,r,n)],u=[i];if(s.length%2!=0)throw new q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)l.push(xf(e,s[p])),u.push(s[p+1]);const c=[],h=Mt.empty();for(let p=l.length-1;p>=0;--p)if(!FT(c,l[p])){const g=l[p];let w=u[p];w=ht(w);const C=o.yc(g);if(w instanceof zc)c.push(g);else{const P=qa(w,C);P!=null&&(c.push(g),h.set(g,P))}}const f=new Kt(c);return new OT(h,f,o.fieldTransforms)}function GN(t,e,n,r=!1){return qa(n,t.Cc(r?4:3,e))}function qa(t,e){if(MT(t=ht(t)))return _m("Unsupported field value:",e,t),LT(t,e);if(t instanceof $c)return function(r,i){if(!VT(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=qa(l,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Pk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Re.fromDate(r);return{timestampValue:Ku(i.serializer,s)}}if(r instanceof Re){const s=new Re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ku(i.serializer,s)}}if(r instanceof jn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof an)return{bytesValue:rT(i.serializer,r._byteString)};if(r instanceof qe){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:nm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof $n)return function(o,l){return{mapValue:{fields:{[kI]:{stringValue:NI},[Wu]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Sc("VectorValues must only contain numeric values.");return Jp(l.serializer,c)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Pc(r)}`)}(t,e)}function LT(t,e){const n={};return AI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):si(t,(r,i)=>{const s=qa(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function MT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Re||t instanceof jn||t instanceof an||t instanceof qe||t instanceof $c||t instanceof $n)}function _m(t,e,n){if(!MT(n)||!TI(n)){const r=Pc(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function xf(t,e,n){if((e=ht(e))instanceof jc)return e._internalPath;if(typeof e=="string")return wm(t,e);throw Ju("Field path arguments must be of type string or ",t,!1,void 0,n)}const HN=new RegExp("[~\\*/\\[\\]]");function wm(t,e,n){if(e.search(HN)>=0)throw Ju(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jc(...e.split("."))._internalPath}catch{throw Ju(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ju(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new q(F.INVALID_ARGUMENT,l+t+u)}function FT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(BT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qN extends UT{data(){return super.data()}}function BT(t,e){return typeof e=="string"?wm(t,e):e instanceof jc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Em{}class QN extends Em{}function YN(t,e,...n){let r=[];e instanceof Em&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Tm).length,l=s.filter(u=>u instanceof Im).length;if(o>1||o>0&&l>0)throw new q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Im extends QN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Im(e,n,r)}_apply(e){const n=this._parse(e);return jT(e._query,n),new Ks(e.firestore,e.converter,_f(e._query,n))}_parse(e){const n=ym(e.firestore);return function(s,o,l,u,c,h,f){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){A_(f,h);const w=[];for(const C of f)w.push(S_(u,s,C));p={arrayValue:{values:w}}}else p=S_(u,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||A_(f,h),p=GN(l,o,f,h==="in"||h==="not-in");return Ge.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Tm extends Em{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Tm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)jT(o,u),o=_f(o,u)}(e._query,n),new Ks(e.firestore,e.converter,_f(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function S_(t,e,n){if(typeof(n=ht(n))=="string"){if(n==="")throw new q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jI(e)&&n.indexOf("/")!==-1)throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Te.fromString(n));if(!J.isDocumentKey(r))throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fv(t,new J(r))}if(n instanceof qe)return Fv(t,n._key);throw new q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pc(n)}.`)}function A_(t,e){if(!Array.isArray(t)||t.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jT(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class XN{convertValue(e,n="none"){switch(Jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return si(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Wu].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Be(o.doubleValue));return new $n(n)}convertGeoPoint(e){return new jn(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ga(e));default:return null}}convertTimestamp(e){const n=Yr(e);return new Re(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Te.fromString(e);ve(uT(r),9688,{name:e});const i=new ya(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||lr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Do{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ai extends UT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(BT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ai._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ai._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ai._jsonSchema={type:He("string",Ai._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};class lu extends Ai{data(e={}){return super.data(e)}}class _s{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Do(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new lu(this._firestore,this._userDataWriter,r.key,r,new Do(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new lu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Do(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new lu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Do(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:ZN(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_s._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:t})}}_s._jsonSchemaVersion="firestore/querySnapshot/1.0",_s._jsonSchema={type:He("string",_s._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};class $T extends XN{constructor(e){super(),this.firestore=e}convertBytes(e){return new an(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}}function Gi(t,e,n,...r){t=$r(t,qe);const i=$r(t.firestore,Os),s=ym(i);let o;return o=typeof(e=ht(e))=="string"||e instanceof jc?WN(s,"updateDoc",t._key,e,n,r):zN(s,"updateDoc",t._key,e),Sm(i,[o.toMutation(t._key,Cn.exists(!0))])}function e2(t){return Sm($r(t.firestore,Os),[new Zp(t._key,Cn.none())])}function t2(t,e){const n=$r(t.firestore,Os),r=yr(t),i=JN(t.converter,e);return Sm(n,[$N(ym(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Cn.exists(!1))]).then(()=>r)}function n2(t,...e){var u,c,h;t=ht(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||T_(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(T_(e[r])){const f=e[r];e[r]=(u=f.next)==null?void 0:u.bind(f),e[r+1]=(c=f.error)==null?void 0:c.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let s,o,l;if(t instanceof qe)o=$r(t.firestore,Os),l=Xp(t._key.path),s={next:f=>{e[r]&&e[r](r2(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=$r(t,Ks);o=$r(f.firestore,Os),l=f._query;const p=new $T(o);s={next:g=>{e[r]&&e[r](new _s(o,p,f,g))},error:e[r+1],complete:e[r+2]},KN(t._query)}return function(p,g,w,C){const P=new DN(C),E=new fN(g,P,w);return p.asyncQueue.enqueueAndForget(async()=>uN(await m_(p),E)),()=>{P.Nu(),p.asyncQueue.enqueueAndForget(async()=>cN(await m_(p),E))}}(NT(o),l,i,s)}function Sm(t,e){return function(r,i){const s=new Si;return r.asyncQueue.enqueueAndForget(async()=>TN(await VN(r),i,s)),s.promise}(NT(t),e)}function r2(t,e,n){const r=n.docs.get(e._key),i=new $T(t);return new Ai(t,i,e._key,r,new Do(n.hasPendingWrites,n.fromCache),e.converter)}function i2(){return new vm("serverTimestamp")}(function(e,n=!0){(function(i){Ws=i})($s),Rs(new Di("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Os(new jx(r.getProvider("auth-internal")),new Wx(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ya(c.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Br(Av,Cv,e),Br(Av,Cv,"esm2020")})();function bt(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var s2=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),C_=s2,Xd=()=>Math.random().toString(36).substring(7).split("").join("."),o2={INIT:`@@redux/INIT${Xd()}`,REPLACE:`@@redux/REPLACE${Xd()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Xd()}`},R_=o2;function a2(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function zT(t,e,n){if(typeof t!="function")throw new Error(bt(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(bt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(bt(1));return n(zT)(t,e)}let r=t,i=e,s=new Map,o=s,l=0,u=!1;function c(){o===s&&(o=new Map,s.forEach((P,E)=>{o.set(E,P)}))}function h(){if(u)throw new Error(bt(3));return i}function f(P){if(typeof P!="function")throw new Error(bt(4));if(u)throw new Error(bt(5));let E=!0;c();const _=l++;return o.set(_,P),function(){if(E){if(u)throw new Error(bt(6));E=!1,c(),o.delete(_),s=null}}}function p(P){if(!a2(P))throw new Error(bt(7));if(typeof P.type>"u")throw new Error(bt(8));if(typeof P.type!="string")throw new Error(bt(17));if(u)throw new Error(bt(9));try{u=!0,i=r(i,P)}finally{u=!1}return(s=o).forEach(_=>{_()}),P}function g(P){if(typeof P!="function")throw new Error(bt(10));r=P,p({type:R_.REPLACE})}function w(){const P=f;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(bt(11));function _(){const k=E;k.next&&k.next(h())}return _(),{unsubscribe:P(_)}},[C_](){return this}}}return p({type:R_.INIT}),{dispatch:p,subscribe:f,getState:h,replaceReducer:g,[C_]:w}}function P_(t,e){return function(...n){return e(t.apply(this,n))}}function b_(t,e){if(typeof t=="function")return P_(t,e);if(typeof t!="object"||t===null)throw new Error(bt(16));const n={};for(const r in t){const i=t[r];typeof i=="function"&&(n[r]=P_(i,e))}return n}function WT(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function l2(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(bt(15))};const o={getState:i.getState,dispatch:(u,...c)=>s(u,...c)},l=t.map(u=>u(o));return s=WT(...l)(i.dispatch),{...i,dispatch:s}}}var u2={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ka=M;function c2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var d2=typeof Object.is=="function"?Object.is:c2,h2=Ka.useSyncExternalStore,f2=Ka.useRef,p2=Ka.useEffect,m2=Ka.useMemo,g2=Ka.useDebugValue;u2.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=f2(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=m2(function(){function u(g){if(!c){if(c=!0,h=g,g=r(g),i!==void 0&&o.hasValue){var w=o.value;if(i(w,g))return f=w}return f=g}if(w=f,d2(h,g))return w;var C=r(g);return i!==void 0&&i(w,C)?(h=g,w):(h=g,f=C)}var c=!1,h,f,p=n===void 0?null:n;return[function(){return u(e())},p===null?void 0:function(){return u(p())}]},[e,n,r,i]);var l=h2(t,s[0],s[1]);return p2(function(){o.hasValue=!0,o.value=l},[l]),g2(l),l};var y2=M.version.startsWith("19"),v2=Symbol.for(y2?"react.transitional.element":"react.element"),_2=Symbol.for("react.portal"),w2=Symbol.for("react.fragment"),E2=Symbol.for("react.strict_mode"),I2=Symbol.for("react.profiler"),T2=Symbol.for("react.consumer"),S2=Symbol.for("react.context"),GT=Symbol.for("react.forward_ref"),A2=Symbol.for("react.suspense"),C2=Symbol.for("react.suspense_list"),Am=Symbol.for("react.memo"),R2=Symbol.for("react.lazy"),P2=GT,b2=Am;function x2(t){if(typeof t=="object"&&t!==null){const{$$typeof:e}=t;switch(e){case v2:switch(t=t.type,t){case w2:case I2:case E2:case A2:case C2:return t;default:switch(t=t&&t.$$typeof,t){case S2:case GT:case R2:case Am:return t;case T2:return t;default:return e}}case _2:return e}}}function k2(t){return x2(t)===Am}function D2(t,e,n,r,{areStatesEqual:i,areOwnPropsEqual:s,areStatePropsEqual:o}){let l=!1,u,c,h,f,p;function g(_,T){return u=_,c=T,h=t(u,c),f=e(r,c),p=n(h,f,c),l=!0,p}function w(){return h=t(u,c),e.dependsOnOwnProps&&(f=e(r,c)),p=n(h,f,c),p}function C(){return t.dependsOnOwnProps&&(h=t(u,c)),e.dependsOnOwnProps&&(f=e(r,c)),p=n(h,f,c),p}function P(){const _=t(u,c),T=!o(_,h);return h=_,T&&(p=n(h,f,c)),p}function E(_,T){const k=!s(T,c),L=!i(_,u,T,c);return u=_,c=T,k&&L?w():k?C():L?P():p}return function(T,k){return l?E(T,k):g(T,k)}}function N2(t,{initMapStateToProps:e,initMapDispatchToProps:n,initMergeProps:r,...i}){const s=e(t,i),o=n(t,i),l=r(t,i);return D2(s,o,l,t,i)}function O2(t,e){const n={};for(const r in t){const i=t[r];typeof i=="function"&&(n[r]=(...s)=>e(i(...s)))}return n}function kf(t){return function(n){const r=t(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function x_(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function HT(t,e){return function(r,{displayName:i}){const s=function(l,u){return s.dependsOnOwnProps?s.mapToProps(l,u):s.mapToProps(l,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(l,u){s.mapToProps=t,s.dependsOnOwnProps=x_(t);let c=s(l,u);return typeof c=="function"&&(s.mapToProps=c,s.dependsOnOwnProps=x_(c),c=s(l,u)),c},s}}function Cm(t,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function V2(t){return t&&typeof t=="object"?kf(e=>O2(t,e)):t?typeof t=="function"?HT(t):Cm(t,"mapDispatchToProps"):kf(e=>({dispatch:e}))}function L2(t){return t?typeof t=="function"?HT(t):Cm(t,"mapStateToProps"):kf(()=>({}))}function M2(t,e,n){return{...n,...t,...e}}function F2(t){return function(n,{displayName:r,areMergedPropsEqual:i}){let s=!1,o;return function(u,c,h){const f=t(u,c,h);return s?i(f,o)||(o=f):(s=!0,o=f),o}}}function U2(t){return t?typeof t=="function"?F2(t):Cm(t,"mergeProps"):()=>M2}function B2(t){t()}function j2(){let t=null,e=null;return{clear(){t=null,e=null},notify(){B2(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var k_={notify(){},get:()=>[]};function qT(t,e){let n,r=k_,i=0,s=!1;function o(C){h();const P=r.subscribe(C);let E=!1;return()=>{E||(E=!0,P(),f())}}function l(){r.notify()}function u(){w.onStateChange&&w.onStateChange()}function c(){return s}function h(){i++,n||(n=e?e.addNestedSub(u):t.subscribe(u),r=j2())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=k_)}function p(){s||(s=!0,h())}function g(){s&&(s=!1,f())}const w={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:c,trySubscribe:p,tryUnsubscribe:g,getListeners:()=>r};return w}var $2=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",z2=$2(),W2=()=>typeof navigator<"u"&&navigator.product==="ReactNative",G2=W2(),H2=()=>z2||G2?M.useLayoutEffect:M.useEffect,Zu=H2();function D_(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Jd(t,e){if(D_(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!D_(t[n[i]],e[n[i]]))return!1;return!0}var q2={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},K2={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Q2={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},KT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Y2={[P2]:Q2,[b2]:KT};function N_(t){return k2(t)?KT:Y2[t.$$typeof]||q2}var X2=Object.defineProperty,J2=Object.getOwnPropertyNames,O_=Object.getOwnPropertySymbols,Z2=Object.getOwnPropertyDescriptor,eO=Object.getPrototypeOf,V_=Object.prototype;function Df(t,e){if(typeof e!="string"){if(V_){const s=eO(e);s&&s!==V_&&Df(t,s)}let n=J2(e);O_&&(n=n.concat(O_(e)));const r=N_(t),i=N_(e);for(let s=0;s<n.length;++s){const o=n[s];if(!K2[o]&&!(i&&i[o])&&!(r&&r[o])){const l=Z2(e,o);try{X2(t,o,l)}catch{}}}}return t}var Zd=Symbol.for("react-redux-context"),eh=typeof globalThis<"u"?globalThis:{};function tO(){if(!M.createContext)return{};const t=eh[Zd]??(eh[Zd]=new Map);let e=t.get(M.createContext);return e||(e=M.createContext(null),t.set(M.createContext,e)),e}var QT=tO(),nO=[null,null];function rO(t,e,n){Zu(()=>t(...e),n)}function iO(t,e,n,r,i,s){t.current=r,n.current=!1,i.current&&(i.current=null,s())}function sO(t,e,n,r,i,s,o,l,u,c,h){if(!t)return()=>{};let f=!1,p=null;const g=()=>{if(f||!l.current)return;const C=e.getState();let P,E;try{P=r(C,i.current)}catch(_){E=_,p=_}E||(p=null),P===s.current?o.current||c():(s.current=P,u.current=P,o.current=!0,h())};return n.onStateChange=g,n.trySubscribe(),g(),()=>{if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,p)throw p}}function oO(t,e){return t===e}function aO(t,e,n,{pure:r,areStatesEqual:i=oO,areOwnPropsEqual:s=Jd,areStatePropsEqual:o=Jd,areMergedPropsEqual:l=Jd,forwardRef:u=!1,context:c=QT}={}){const h=c,f=L2(t),p=V2(e),g=U2(n),w=!!t;return P=>{const E=P.displayName||P.name||"Component",_=`Connect(${E})`,T={shouldHandleStateChanges:w,displayName:_,wrappedComponentName:E,WrappedComponent:P,initMapStateToProps:f,initMapDispatchToProps:p,initMergeProps:g,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:s,areMergedPropsEqual:l};function k(I){const[v,S,A]=M.useMemo(()=>{const{reactReduxForwardedRef:be,...zt}=I;return[I.context,be,zt]},[I]),b=M.useMemo(()=>{let be=h;return v!=null&&v.Consumer,be},[v,h]),x=M.useContext(b),R=!!I.store&&!!I.store.getState&&!!I.store.dispatch,Je=!!x&&!!x.store,Ue=R?I.store:x.store,$t=Je?x.getServerState:Ue.getState,Ze=M.useMemo(()=>N2(Ue.dispatch,T),[Ue]),[G,Q]=M.useMemo(()=>{if(!w)return nO;const be=qT(Ue,R?void 0:x.subscription),zt=be.notifyNestedSubs.bind(be);return[be,zt]},[Ue,R,x]),Z=M.useMemo(()=>R?x:{...x,subscription:G},[R,x,G]),he=M.useRef(void 0),ue=M.useRef(A),ge=M.useRef(void 0),Ot=M.useRef(!1),pt=M.useRef(!1),Ct=M.useRef(void 0);Zu(()=>(pt.current=!0,()=>{pt.current=!1}),[]);const mt=M.useMemo(()=>()=>ge.current&&A===ue.current?ge.current:Ze(Ue.getState(),A),[Ue,A]),Js=M.useMemo(()=>zt=>G?sO(w,Ue,G,Ze,ue,he,Ot,pt,ge,Q,zt):()=>{},[G]);rO(iO,[ue,he,Ot,A,ge,Q]);let bn;try{bn=M.useSyncExternalStore(Js,mt,$t?()=>Ze($t(),A):mt)}catch(be){throw Ct.current&&(be.message+=`
The error may be correlated with this previous error:
${Ct.current.stack}

`),be}Zu(()=>{Ct.current=void 0,ge.current=void 0,he.current=bn});const pn=M.useMemo(()=>M.createElement(P,{...bn,ref:S}),[S,P,bn]);return M.useMemo(()=>w?M.createElement(b.Provider,{value:Z},pn):pn,[b,pn,Z])}const V=M.memo(k);if(V.WrappedComponent=P,V.displayName=k.displayName=_,u){const v=M.forwardRef(function(A,b){return M.createElement(V,{...A,reactReduxForwardedRef:b})});return v.displayName=_,v.WrappedComponent=P,Df(v,P)}return Df(V,P)}}var YT=aO;function lO(t){const{children:e,context:n,serverState:r,store:i}=t,s=M.useMemo(()=>{const u=qT(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=M.useMemo(()=>i.getState(),[i]);Zu(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,o]);const l=n||QT;return M.createElement(l.Provider,{value:s},e)}var uO=lO,cO=!0,th="Invariant failed";function dO(t,e){if(!t){if(cO)throw new Error(th);var n=typeof e=="function"?e():e,r=n?"".concat(th,": ").concat(n):th;throw new Error(r)}}var Tn=function(e){var n=e.top,r=e.right,i=e.bottom,s=e.left,o=r-s,l=i-n,u={top:n,right:r,bottom:i,left:s,width:o,height:l,x:s,y:n,center:{x:(r+s)/2,y:(i+n)/2}};return u},Rm=function(e,n){return{top:e.top-n.top,left:e.left-n.left,bottom:e.bottom+n.bottom,right:e.right+n.right}},L_=function(e,n){return{top:e.top+n.top,left:e.left+n.left,bottom:e.bottom-n.bottom,right:e.right-n.right}},hO=function(e,n){return{top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}},nh={top:0,right:0,bottom:0,left:0},Pm=function(e){var n=e.borderBox,r=e.margin,i=r===void 0?nh:r,s=e.border,o=s===void 0?nh:s,l=e.padding,u=l===void 0?nh:l,c=Tn(Rm(n,i)),h=Tn(L_(n,o)),f=Tn(L_(h,u));return{marginBox:c,borderBox:Tn(n),paddingBox:h,contentBox:f,margin:i,border:o,padding:u}},nn=function(e){var n=e.slice(0,-2),r=e.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&dO(!1),i},fO=function(){return{x:window.pageXOffset,y:window.pageYOffset}},ec=function(e,n){var r=e.borderBox,i=e.border,s=e.margin,o=e.padding,l=hO(r,n);return Pm({borderBox:l,border:i,margin:s,padding:o})},tc=function(e,n){return n===void 0&&(n=fO()),ec(e,n)},XT=function(e,n){var r={top:nn(n.marginTop),right:nn(n.marginRight),bottom:nn(n.marginBottom),left:nn(n.marginLeft)},i={top:nn(n.paddingTop),right:nn(n.paddingRight),bottom:nn(n.paddingBottom),left:nn(n.paddingLeft)},s={top:nn(n.borderTopWidth),right:nn(n.borderRightWidth),bottom:nn(n.borderBottomWidth),left:nn(n.borderLeftWidth)};return Pm({borderBox:e,margin:r,padding:i,border:s})},JT=function(e){var n=e.getBoundingClientRect(),r=window.getComputedStyle(e);return XT(n,r)},pO=function(e){var n=[],r=null,i=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];n=l,!r&&(r=requestAnimationFrame(function(){r=null,e.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};const Ia=pO;function nc(){return nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nc.apply(null,arguments)}function ZT(t,e){}ZT.bind(null,"warn");ZT.bind(null,"error");function Wr(){}function mO(t,e){return{...t,...e}}function un(t,e,n){const r=e.map(i=>{const s=mO(n,i.options);return t.addEventListener(i.eventName,i.fn,s),function(){t.removeEventListener(i.eventName,i.fn,s)}});return function(){r.forEach(s=>{s()})}}const gO="Invariant failed";class rc extends Error{}rc.prototype.toString=function(){return this.message};function z(t,e){throw new rc(gO)}class yO extends Fe.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=Wr,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof rc&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=un(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof rc){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const vO=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,ic=t=>t+1,_O=t=>`
  You have lifted an item in position ${ic(t.source.index)}
`,e1=(t,e)=>{const n=t.droppableId===e.droppableId,r=ic(t.index),i=ic(e.index);return n?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${t.droppableId}
    to list ${e.droppableId}
    in position ${i}
  `},t1=(t,e,n)=>e.droppableId===n.droppableId?`
      The item ${t}
      has been combined with ${n.draggableId}`:`
      The item ${t}
      in list ${e.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,wO=t=>{const e=t.destination;if(e)return e1(t.source,e);const n=t.combine;return n?t1(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},M_=t=>`
  The item has returned to its starting position
  of ${ic(t.index)}
`,EO=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${M_(t.source)}
    `;const e=t.destination,n=t.combine;return e?`
      You have dropped the item.
      ${e1(t.source,e)}
    `:n?`
      You have dropped the item.
      ${t1(t.draggableId,t.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${M_(t.source)}
  `},uu={dragHandleUsageInstructions:vO,onDragStart:_O,onDragUpdate:wO,onDragEnd:EO};function IO(t,e){return!!(t===e||Number.isNaN(t)&&Number.isNaN(e))}function n1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!IO(t[n],e[n]))return!1;return!0}function de(t,e){const n=M.useState(()=>({inputs:e,result:t()}))[0],r=M.useRef(!0),i=M.useRef(n),o=r.current||!!(e&&i.current.inputs&&n1(e,i.current.inputs))?i.current:{inputs:e,result:t()};return M.useEffect(()=>{r.current=!1,i.current=o},[o]),o.result}function X(t,e){return de(()=>t,e)}const it={x:0,y:0},ut=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),Qt=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),Gr=(t,e)=>t.x===e.x&&t.y===e.y,Qs=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),Vi=(t,e,n=0)=>t==="x"?{x:e,y:n}:{x:n,y:e},Ta=(t,e)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),F_=(t,e)=>Math.min(...e.map(n=>Ta(t,n))),r1=t=>e=>({x:t(e.x),y:t(e.y)});var TO=(t,e)=>{const n=Tn({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return n.width<=0||n.height<=0?null:n};const Qa=(t,e)=>({top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}),U_=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],SO={top:0,right:0,bottom:0,left:0},AO=(t,e)=>e?Qa(t,e.scroll.diff.displacement):t,CO=(t,e,n)=>n&&n.increasedBy?{...t,[e.end]:t[e.end]+n.increasedBy[e.line]}:t,RO=(t,e)=>e&&e.shouldClipSubject?TO(e.pageMarginBox,t):Tn(t);var Vs=({page:t,withPlaceholder:e,axis:n,frame:r})=>{const i=AO(t.marginBox,r),s=CO(i,n,e),o=RO(s,r);return{page:t,withPlaceholder:e,active:o}},bm=(t,e)=>{t.frame||z();const n=t.frame,r=Qt(e,n.scroll.initial),i=Qs(r),s={...n,scroll:{initial:n.scroll.initial,current:e,diff:{value:r,displacement:i},max:n.scroll.max}},o=Vs({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:s});return{...t,frame:s,subject:o}};function rt(t,e=n1){let n=null;function r(...i){if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;const s=t.apply(this,i);return n={lastResult:s,lastArgs:i,lastThis:this},s}return r.clear=function(){n=null},r}const i1=rt(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),s1=rt(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),Wc=rt(t=>Object.values(t)),PO=rt(t=>Object.values(t));var Ys=rt((t,e)=>PO(e).filter(r=>t===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function xm(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function Gc(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var Hc=rt((t,e)=>e.filter(n=>n.descriptor.id!==t.descriptor.id)),bO=({isMovingForward:t,draggable:e,destination:n,insideDestination:r,previousImpact:i})=>{if(!n.isCombineEnabled||!xm(i))return null;function o(g){const w={type:"COMBINE",combine:{draggableId:g,droppableId:n.descriptor.id}};return{...i,at:w}}const l=i.displaced.all,u=l.length?l[0]:null;if(t)return u?o(u):null;const c=Hc(e,r);if(!u){if(!c.length)return null;const g=c[c.length-1];return o(g.descriptor.id)}const h=c.findIndex(g=>g.descriptor.id===u);h===-1&&z();const f=h-1;if(f<0)return null;const p=c[f];return o(p.descriptor.id)},Xs=(t,e)=>t.descriptor.droppableId===e.descriptor.id;const o1={point:it,value:0},Sa={invisible:{},visible:{},all:[]},xO={displaced:Sa,displacedBy:o1,at:null};var dn=(t,e)=>n=>t<=n&&n<=e,a1=t=>{const e=dn(t.top,t.bottom),n=dn(t.left,t.right);return r=>{if(e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right))return!0;const s=e(r.top)||e(r.bottom),o=n(r.left)||n(r.right);if(s&&o)return!0;const u=r.top<t.top&&r.bottom>t.bottom,c=r.left<t.left&&r.right>t.right;return u&&c?!0:u&&o||c&&s}},kO=t=>{const e=dn(t.top,t.bottom),n=dn(t.left,t.right);return r=>e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right)};const km={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},l1={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var DO=t=>e=>{const n=dn(e.top,e.bottom),r=dn(e.left,e.right);return i=>t===km?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)};const NO=(t,e)=>{const n=e.frame?e.frame.scroll.diff.displacement:it;return Qa(t,n)},OO=(t,e,n)=>e.subject.active?n(e.subject.active)(t):!1,VO=(t,e,n)=>n(e)(t),Dm=({target:t,destination:e,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const s=r?NO(t,e):t;return OO(s,e,i)&&VO(s,n,i)},LO=t=>Dm({...t,isVisibleThroughFrameFn:a1}),u1=t=>Dm({...t,isVisibleThroughFrameFn:kO}),MO=t=>Dm({...t,isVisibleThroughFrameFn:DO(t.destination.axis)}),FO=(t,e,n)=>{if(typeof n=="boolean")return n;if(!e)return!0;const{invisible:r,visible:i}=e;if(r[t])return!1;const s=i[t];return s?s.shouldAnimate:!0};function UO(t,e){const n=t.page.marginBox,r={top:e.point.y,right:0,bottom:0,left:e.point.x};return Tn(Rm(n,r))}function Aa({afterDragging:t,destination:e,displacedBy:n,viewport:r,forceShouldAnimate:i,last:s}){return t.reduce(function(l,u){const c=UO(u,n),h=u.descriptor.id;if(l.all.push(h),!LO({target:c,destination:e,viewport:r,withDroppableDisplacement:!0}))return l.invisible[u.descriptor.id]=!0,l;const p=FO(h,s,i),g={draggableId:h,shouldAnimate:p};return l.visible[h]=g,l},{all:[],visible:{},invisible:{}})}function BO(t,e){if(!t.length)return 0;const n=t[t.length-1].descriptor.index;return e.inHomeList?n:n+1}function B_({insideDestination:t,inHomeList:e,displacedBy:n,destination:r}){const i=BO(t,{inHomeList:e});return{displaced:Sa,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function sc({draggable:t,insideDestination:e,destination:n,viewport:r,displacedBy:i,last:s,index:o,forceShouldAnimate:l}){const u=Xs(t,n);if(o==null)return B_({insideDestination:e,inHomeList:u,displacedBy:i,destination:n});const c=e.find(w=>w.descriptor.index===o);if(!c)return B_({insideDestination:e,inHomeList:u,displacedBy:i,destination:n});const h=Hc(t,e),f=e.indexOf(c),p=h.slice(f);return{displaced:Aa({afterDragging:p,destination:n,displacedBy:i,last:s,viewport:r.frame,forceShouldAnimate:l}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function ti(t,e){return!!e.effected[t]}var jO=({isMovingForward:t,destination:e,draggables:n,combine:r,afterCritical:i})=>{if(!e.isCombineEnabled)return null;const s=r.draggableId,l=n[s].descriptor.index;return ti(s,i)?t?l:l-1:t?l+1:l},$O=({isMovingForward:t,isInHomeList:e,insideDestination:n,location:r})=>{if(!n.length)return null;const i=r.index,s=t?i+1:i-1,o=n[0].descriptor.index,l=n[n.length-1].descriptor.index,u=e?l:l+1;return s<o||s>u?null:s},zO=({isMovingForward:t,isInHomeList:e,draggable:n,draggables:r,destination:i,insideDestination:s,previousImpact:o,viewport:l,afterCritical:u})=>{const c=o.at;if(c||z(),c.type==="REORDER"){const f=$O({isMovingForward:t,isInHomeList:e,location:c.destination,insideDestination:s});return f==null?null:sc({draggable:n,insideDestination:s,destination:i,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:f})}const h=jO({isMovingForward:t,destination:i,displaced:o.displaced,draggables:r,combine:c.combine,afterCritical:u});return h==null?null:sc({draggable:n,insideDestination:s,destination:i,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:h})},WO=({displaced:t,afterCritical:e,combineWith:n,displacedBy:r})=>{const i=!!(t.visible[n]||t.invisible[n]);return ti(n,e)?i?it:Qs(r.point):i?r.point:it},GO=({afterCritical:t,impact:e,draggables:n})=>{const r=Gc(e);r||z();const i=r.draggableId,s=n[i].page.borderBox.center,o=WO({displaced:e.displaced,afterCritical:t,combineWith:i,displacedBy:e.displacedBy});return ut(s,o)};const c1=(t,e)=>e.margin[t.start]+e.borderBox[t.size]/2,HO=(t,e)=>e.margin[t.end]+e.borderBox[t.size]/2,Nm=(t,e,n)=>e[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2,j_=({axis:t,moveRelativeTo:e,isMoving:n})=>Vi(t.line,e.marginBox[t.end]+c1(t,n),Nm(t,e.marginBox,n)),$_=({axis:t,moveRelativeTo:e,isMoving:n})=>Vi(t.line,e.marginBox[t.start]-HO(t,n),Nm(t,e.marginBox,n)),qO=({axis:t,moveInto:e,isMoving:n})=>Vi(t.line,e.contentBox[t.start]+c1(t,n),Nm(t,e.contentBox,n));var KO=({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:i})=>{const s=Ys(r.descriptor.id,n),o=e.page,l=r.axis;if(!s.length)return qO({axis:l,moveInto:r.page,isMoving:o});const{displaced:u,displacedBy:c}=t,h=u.all[0];if(h){const p=n[h];if(ti(h,i))return $_({axis:l,moveRelativeTo:p.page,isMoving:o});const g=ec(p.page,c.point);return $_({axis:l,moveRelativeTo:g,isMoving:o})}const f=s[s.length-1];if(f.descriptor.id===e.descriptor.id)return o.borderBox.center;if(ti(f.descriptor.id,i)){const p=ec(f.page,Qs(i.displacedBy.point));return j_({axis:l,moveRelativeTo:p,isMoving:o})}return j_({axis:l,moveRelativeTo:f.page,isMoving:o})},Nf=(t,e)=>{const n=t.frame;return n?ut(e,n.scroll.diff.displacement):e};const QO=({impact:t,draggable:e,droppable:n,draggables:r,afterCritical:i})=>{const s=e.page.borderBox.center,o=t.at;return!n||!o?s:o.type==="REORDER"?KO({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:i}):GO({impact:t,draggables:r,afterCritical:i})};var qc=t=>{const e=QO(t),n=t.droppable;return n?Nf(n,e):e},d1=(t,e)=>{const n=Qt(e,t.scroll.initial),r=Qs(n);return{frame:Tn({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:n,displacement:r}}}};function z_(t,e){return t.map(n=>e[n])}function YO(t,e){for(let n=0;n<e.length;n++){const r=e[n].visible[t];if(r)return r}return null}var XO=({impact:t,viewport:e,destination:n,draggables:r,maxScrollChange:i})=>{const s=d1(e,ut(e.scroll.current,i)),o=n.frame?bm(n,ut(n.frame.scroll.current,i)):n,l=t.displaced,u=Aa({afterDragging:z_(l.all,r),destination:n,displacedBy:t.displacedBy,viewport:s.frame,last:l,forceShouldAnimate:!1}),c=Aa({afterDragging:z_(l.all,r),destination:o,displacedBy:t.displacedBy,viewport:e.frame,last:l,forceShouldAnimate:!1}),h={},f={},p=[l,u,c];return l.all.forEach(w=>{const C=YO(w,p);if(C){f[w]=C;return}h[w]=!0}),{...t,displaced:{all:l.all,invisible:h,visible:f}}},JO=(t,e)=>ut(t.scroll.diff.displacement,e),Om=({pageBorderBoxCenter:t,draggable:e,viewport:n})=>{const r=JO(n,t),i=Qt(r,e.page.borderBox.center);return ut(e.client.borderBox.center,i)},h1=({draggable:t,destination:e,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:s=!1})=>{const o=Qt(n,t.page.borderBox.center),u={target:Qa(t.page.borderBox,o),destination:e,withDroppableDisplacement:i,viewport:r};return s?MO(u):u1(u)},ZO=({isMovingForward:t,draggable:e,destination:n,draggables:r,previousImpact:i,viewport:s,previousPageBorderBoxCenter:o,previousClientSelection:l,afterCritical:u})=>{if(!n.isEnabled)return null;const c=Ys(n.descriptor.id,r),h=Xs(e,n),f=bO({isMovingForward:t,draggable:e,destination:n,insideDestination:c,previousImpact:i})||zO({isMovingForward:t,isInHomeList:h,draggable:e,draggables:r,destination:n,insideDestination:c,previousImpact:i,viewport:s,afterCritical:u});if(!f)return null;const p=qc({impact:f,draggable:e,droppable:n,draggables:r,afterCritical:u});if(h1({draggable:e,destination:n,newPageBorderBoxCenter:p,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Om({pageBorderBoxCenter:p,draggable:e,viewport:s}),impact:f,scrollJumpRequest:null};const w=Qt(p,o),C=XO({impact:f,viewport:s,destination:n,draggables:r,maxScrollChange:w});return{clientSelection:l,impact:C,scrollJumpRequest:w}};const Pt=t=>{const e=t.subject.active;return e||z(),e};var eV=({isMovingForward:t,pageBorderBoxCenter:e,source:n,droppables:r,viewport:i})=>{const s=n.subject.active;if(!s)return null;const o=n.axis,l=dn(s[o.start],s[o.end]),u=Wc(r).filter(h=>h!==n).filter(h=>h.isEnabled).filter(h=>!!h.subject.active).filter(h=>a1(i.frame)(Pt(h))).filter(h=>{const f=Pt(h);return t?s[o.crossAxisEnd]<f[o.crossAxisEnd]:f[o.crossAxisStart]<s[o.crossAxisStart]}).filter(h=>{const f=Pt(h),p=dn(f[o.start],f[o.end]);return l(f[o.start])||l(f[o.end])||p(s[o.start])||p(s[o.end])}).sort((h,f)=>{const p=Pt(h)[o.crossAxisStart],g=Pt(f)[o.crossAxisStart];return t?p-g:g-p}).filter((h,f,p)=>Pt(h)[o.crossAxisStart]===Pt(p[0])[o.crossAxisStart]);if(!u.length)return null;if(u.length===1)return u[0];const c=u.filter(h=>dn(Pt(h)[o.start],Pt(h)[o.end])(e[o.line]));return c.length===1?c[0]:c.length>1?c.sort((h,f)=>Pt(h)[o.start]-Pt(f)[o.start])[0]:u.sort((h,f)=>{const p=F_(e,U_(Pt(h))),g=F_(e,U_(Pt(f)));return p!==g?p-g:Pt(h)[o.start]-Pt(f)[o.start]})[0]};const W_=(t,e)=>{const n=t.page.borderBox.center;return ti(t.descriptor.id,e)?Qt(n,e.displacedBy.point):n},tV=(t,e)=>{const n=t.page.borderBox;return ti(t.descriptor.id,e)?Qa(n,Qs(e.displacedBy.point)):n};var nV=({pageBorderBoxCenter:t,viewport:e,destination:n,insideDestination:r,afterCritical:i})=>r.filter(o=>u1({target:tV(o,i),destination:n,viewport:e.frame,withDroppableDisplacement:!0})).sort((o,l)=>{const u=Ta(t,Nf(n,W_(o,i))),c=Ta(t,Nf(n,W_(l,i)));return u<c?-1:c<u?1:o.descriptor.index-l.descriptor.index})[0]||null,Ya=rt(function(e,n){const r=n[e.line];return{value:r,point:Vi(e.line,r)}});const rV=(t,e,n)=>{const r=t.axis;if(t.descriptor.mode==="virtual")return Vi(r.line,e[r.line]);const i=t.subject.page.contentBox[r.size],u=Ys(t.descriptor.id,n).reduce((c,h)=>c+h.client.marginBox[r.size],0)+e[r.line]-i;return u<=0?null:Vi(r.line,u)},f1=(t,e)=>({...t,scroll:{...t.scroll,max:e}}),p1=(t,e,n)=>{const r=t.frame;Xs(e,t)&&z(),t.subject.withPlaceholder&&z();const i=Ya(t.axis,e.displaceBy).point,s=rV(t,i,n),o={placeholderSize:i,increasedBy:s,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!r){const h=Vs({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:t.frame});return{...t,subject:h}}const l=s?ut(r.scroll.max,s):r.scroll.max,u=f1(r,l),c=Vs({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:u});return{...t,subject:c,frame:u}},iV=t=>{const e=t.subject.withPlaceholder;e||z();const n=t.frame;if(!n){const o=Vs({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:o}}const r=e.oldFrameMaxScroll;r||z();const i=f1(n,r),s=Vs({page:t.subject.page,axis:t.axis,frame:i,withPlaceholder:null});return{...t,subject:s,frame:i}};var sV=({previousPageBorderBoxCenter:t,moveRelativeTo:e,insideDestination:n,draggable:r,draggables:i,destination:s,viewport:o,afterCritical:l})=>{if(!e){if(n.length)return null;const f={displaced:Sa,displacedBy:o1,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},p=qc({impact:f,draggable:r,droppable:s,draggables:i,afterCritical:l}),g=Xs(r,s)?s:p1(s,r,i);return h1({draggable:r,destination:g,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?f:null}const u=t[s.axis.line]<=e.page.borderBox.center[s.axis.line],c=(()=>{const f=e.descriptor.index;return e.descriptor.id===r.descriptor.id||u?f:f+1})(),h=Ya(s.axis,r.displaceBy);return sc({draggable:r,insideDestination:n,destination:s,viewport:o,displacedBy:h,last:Sa,index:c})},oV=({isMovingForward:t,previousPageBorderBoxCenter:e,draggable:n,isOver:r,draggables:i,droppables:s,viewport:o,afterCritical:l})=>{const u=eV({isMovingForward:t,pageBorderBoxCenter:e,source:r,droppables:s,viewport:o});if(!u)return null;const c=Ys(u.descriptor.id,i),h=nV({pageBorderBoxCenter:e,viewport:o,destination:u,insideDestination:c,afterCritical:l}),f=sV({previousPageBorderBoxCenter:e,destination:u,draggable:n,draggables:i,moveRelativeTo:h,insideDestination:c,viewport:o,afterCritical:l});if(!f)return null;const p=qc({impact:f,draggable:n,droppable:u,draggables:i,afterCritical:l});return{clientSelection:Om({pageBorderBoxCenter:p,draggable:n,viewport:o}),impact:f,scrollJumpRequest:null}},Xt=t=>{const e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const aV=(t,e)=>{const n=Xt(t);return n?e[n]:null};var lV=({state:t,type:e})=>{const n=aV(t.impact,t.dimensions.droppables),r=!!n,i=t.dimensions.droppables[t.critical.droppable.id],s=n||i,o=s.axis.direction,l=o==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||o==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(l&&!r)return null;const u=e==="MOVE_DOWN"||e==="MOVE_RIGHT",c=t.dimensions.draggables[t.critical.draggable.id],h=t.current.page.borderBoxCenter,{draggables:f,droppables:p}=t.dimensions;return l?ZO({isMovingForward:u,previousPageBorderBoxCenter:h,draggable:c,destination:s,draggables:f,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):oV({isMovingForward:u,previousPageBorderBoxCenter:h,draggable:c,isOver:s,draggables:f,droppables:p,viewport:t.viewport,afterCritical:t.afterCritical})};function yi(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function m1(t){const e=dn(t.top,t.bottom),n=dn(t.left,t.right);return function(i){return e(i.y)&&n(i.x)}}function uV(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function cV({pageBorderBox:t,draggable:e,candidates:n}){const r=e.page.borderBox.center,i=n.map(s=>{const o=s.axis,l=Vi(s.axis.line,t.center[o.line],s.page.borderBox.center[o.crossAxisLine]);return{id:s.descriptor.id,distance:Ta(r,l)}}).sort((s,o)=>o.distance-s.distance);return i[0]?i[0].id:null}function dV({pageBorderBox:t,draggable:e,droppables:n}){const r=Wc(n).filter(i=>{if(!i.isEnabled)return!1;const s=i.subject.active;if(!s||!uV(t,s))return!1;if(m1(s)(t.center))return!0;const o=i.axis,l=s.center[o.crossAxisLine],u=t[o.crossAxisStart],c=t[o.crossAxisEnd],h=dn(s[o.crossAxisStart],s[o.crossAxisEnd]),f=h(u),p=h(c);return!f&&!p?!0:f?u<l:c>l});return r.length?r.length===1?r[0].descriptor.id:cV({pageBorderBox:t,draggable:e,candidates:r}):null}const g1=(t,e)=>Tn(Qa(t,e));var hV=(t,e)=>{const n=t.frame;return n?g1(e,n.scroll.diff.value):e};function y1({displaced:t,id:e}){return!!(t.visible[e]||t.invisible[e])}function fV({draggable:t,closest:e,inHomeList:n}){return e?n&&e.descriptor.index>t.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var pV=({pageBorderBoxWithDroppableScroll:t,draggable:e,destination:n,insideDestination:r,last:i,viewport:s,afterCritical:o})=>{const l=n.axis,u=Ya(n.axis,e.displaceBy),c=u.value,h=t[l.start],f=t[l.end],g=Hc(e,r).find(C=>{const P=C.descriptor.id,E=C.page.borderBox.center[l.line],_=ti(P,o),T=y1({displaced:i,id:P});return _?T?f<=E:h<E-c:T?f<=E+c:h<E})||null,w=fV({draggable:e,closest:g,inHomeList:Xs(e,n)});return sc({draggable:e,insideDestination:r,destination:n,viewport:s,last:i,displacedBy:u,index:w})};const mV=4;var gV=({draggable:t,pageBorderBoxWithDroppableScroll:e,previousImpact:n,destination:r,insideDestination:i,afterCritical:s})=>{if(!r.isCombineEnabled)return null;const o=r.axis,l=Ya(r.axis,t.displaceBy),u=l.value,c=e[o.start],h=e[o.end],p=Hc(t,i).find(w=>{const C=w.descriptor.id,P=w.page.borderBox,_=P[o.size]/mV,T=ti(C,s),k=y1({displaced:n.displaced,id:C});return T?k?h>P[o.start]+_&&h<P[o.end]-_:c>P[o.start]-u+_&&c<P[o.end]-u-_:k?h>P[o.start]+u+_&&h<P[o.end]+u-_:c>P[o.start]+_&&c<P[o.end]-_});return p?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:p.descriptor.id,droppableId:r.descriptor.id}}}:null},v1=({pageOffset:t,draggable:e,draggables:n,droppables:r,previousImpact:i,viewport:s,afterCritical:o})=>{const l=g1(e.page.borderBox,t),u=dV({pageBorderBox:l,draggable:e,droppables:r});if(!u)return xO;const c=r[u],h=Ys(c.descriptor.id,n),f=hV(c,l);return gV({pageBorderBoxWithDroppableScroll:f,draggable:e,previousImpact:i,destination:c,insideDestination:h,afterCritical:o})||pV({pageBorderBoxWithDroppableScroll:f,draggable:e,destination:c,insideDestination:h,last:i.displaced,viewport:s,afterCritical:o})},Vm=(t,e)=>({...t,[e.descriptor.id]:e});const yV=({previousImpact:t,impact:e,droppables:n})=>{const r=Xt(t),i=Xt(e);if(!r||r===i)return n;const s=n[r];if(!s.subject.withPlaceholder)return n;const o=iV(s);return Vm(n,o)};var vV=({draggable:t,draggables:e,droppables:n,previousImpact:r,impact:i})=>{const s=yV({previousImpact:r,impact:i,droppables:n}),o=Xt(i);if(!o)return s;const l=n[o];if(Xs(t,l)||l.subject.withPlaceholder)return s;const u=p1(l,t,e);return Vm(s,u)},Ko=({state:t,clientSelection:e,dimensions:n,viewport:r,impact:i,scrollJumpRequest:s})=>{const o=r||t.viewport,l=n||t.dimensions,u=e||t.current.client.selection,c=Qt(u,t.initial.client.selection),h={offset:c,selection:u,borderBoxCenter:ut(t.initial.client.borderBoxCenter,c)},f={selection:ut(h.selection,o.scroll.current),borderBoxCenter:ut(h.borderBoxCenter,o.scroll.current),offset:ut(h.offset,o.scroll.diff.value)},p={client:h,page:f};if(t.phase==="COLLECTING")return{...t,dimensions:l,viewport:o,current:p};const g=l.draggables[t.critical.draggable.id],w=i||v1({pageOffset:f.offset,draggable:g,draggables:l.draggables,droppables:l.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),C=vV({draggable:g,impact:w,previousImpact:t.impact,draggables:l.draggables,droppables:l.droppables});return{...t,current:p,dimensions:{draggables:l.draggables,droppables:C},impact:w,viewport:o,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null}};function _V(t,e){return t.map(n=>e[n])}var _1=({impact:t,viewport:e,draggables:n,destination:r,forceShouldAnimate:i})=>{const s=t.displaced,o=_V(s.all,n),l=Aa({afterDragging:o,destination:r,displacedBy:t.displacedBy,viewport:e.frame,forceShouldAnimate:i,last:s});return{...t,displaced:l}},w1=({impact:t,draggable:e,droppable:n,draggables:r,viewport:i,afterCritical:s})=>{const o=qc({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:s});return Om({pageBorderBoxCenter:o,draggable:e,viewport:i})},E1=({state:t,dimensions:e,viewport:n})=>{t.movementMode!=="SNAP"&&z();const r=t.impact,i=n||t.viewport,s=e||t.dimensions,{draggables:o,droppables:l}=s,u=o[t.critical.draggable.id],c=Xt(r);c||z();const h=l[c],f=_1({impact:r,viewport:i,destination:h,draggables:o}),p=w1({impact:f,draggable:u,droppable:h,draggables:o,viewport:i,afterCritical:t.afterCritical});return Ko({impact:f,clientSelection:p,state:t,dimensions:s,viewport:i})},wV=t=>({index:t.index,droppableId:t.droppableId}),I1=({draggable:t,home:e,draggables:n,viewport:r})=>{const i=Ya(e.axis,t.displaceBy),s=Ys(e.descriptor.id,n),o=s.indexOf(t);o===-1&&z();const l=s.slice(o+1),u=l.reduce((p,g)=>(p[g.descriptor.id]=!0,p),{}),c={inVirtualList:e.descriptor.mode==="virtual",displacedBy:i,effected:u};return{impact:{displaced:Aa({afterDragging:l,destination:e,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:wV(t.descriptor)}},afterCritical:c}},EV=(t,e)=>({draggables:t.draggables,droppables:Vm(t.droppables,e)}),IV=({draggable:t,offset:e,initialWindowScroll:n})=>{const r=ec(t.client,e),i=tc(r,n);return{...t,placeholder:{...t.placeholder,client:r},client:r,page:i}},TV=t=>{const e=t.frame;return e||z(),e},SV=({additions:t,updatedDroppables:e,viewport:n})=>{const r=n.scroll.diff.value;return t.map(i=>{const s=i.descriptor.droppableId,o=e[s],u=TV(o).scroll.diff.value,c=ut(r,u);return IV({draggable:i,offset:c,initialWindowScroll:n.scroll.initial})})},AV=({state:t,published:e})=>{const n=e.modified.map(E=>{const _=t.dimensions.droppables[E.droppableId];return bm(_,E.scroll)}),r={...t.dimensions.droppables,...i1(n)},i=s1(SV({additions:e.additions,updatedDroppables:r,viewport:t.viewport})),s={...t.dimensions.draggables,...i};e.removals.forEach(E=>{delete s[E]});const o={droppables:r,draggables:s},l=Xt(t.impact),u=l?o.droppables[l]:null,c=o.draggables[t.critical.draggable.id],h=o.droppables[t.critical.droppable.id],{impact:f,afterCritical:p}=I1({draggable:c,home:h,draggables:s,viewport:t.viewport}),g=u&&u.isCombineEnabled?t.impact:f,w=v1({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:g,viewport:t.viewport,afterCritical:p}),C={...t,phase:"DRAGGING",impact:w,onLiftImpact:f,dimensions:o,afterCritical:p,forceShouldAnimate:!1};return t.phase==="COLLECTING"?C:{...C,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const Of=t=>t.movementMode==="SNAP",rh=(t,e,n)=>{const r=EV(t.dimensions,e);return!Of(t)||n?Ko({state:t,dimensions:r}):E1({state:t,dimensions:r})};function ih(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const G_={phase:"IDLE",completed:null,shouldFlush:!1};var CV=(t=G_,e)=>{if(e.type==="FLUSH")return{...G_,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&z();const{critical:n,clientSelection:r,viewport:i,dimensions:s,movementMode:o}=e.payload,l=s.draggables[n.draggable.id],u=s.droppables[n.droppable.id],c={selection:r,borderBoxCenter:l.client.borderBox.center,offset:it},h={client:c,page:{selection:ut(c.selection,i.scroll.initial),borderBoxCenter:ut(c.selection,i.scroll.initial),offset:ut(c.selection,i.scroll.diff.value)}},f=Wc(s.droppables).every(C=>!C.isFixedOnPage),{impact:p,afterCritical:g}=I1({draggable:l,home:u,draggables:s.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:s,initial:h,current:h,isWindowScrollAllowed:f,impact:p,afterCritical:g,onLiftImpact:p,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&z(),{...t,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||z(),AV({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;yi(t)||z();const{client:n}=e.payload;return Gr(n,t.current.client.selection)?t:Ko({state:t,clientSelection:n,impact:Of(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return ih(t);yi(t)||z();const{id:n,newScroll:r}=e.payload,i=t.dimensions.droppables[n];if(!i)return t;const s=bm(i,r);return rh(t,s,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;yi(t)||z();const{id:n,isEnabled:r}=e.payload,i=t.dimensions.droppables[n];i||z(),i.isEnabled===r&&z();const s={...i,isEnabled:r};return rh(t,s,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;yi(t)||z();const{id:n,isCombineEnabled:r}=e.payload,i=t.dimensions.droppables[n];i||z(),i.isCombineEnabled===r&&z();const s={...i,isCombineEnabled:r};return rh(t,s,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;yi(t)||z(),t.isWindowScrollAllowed||z();const n=e.payload.newScroll;if(Gr(t.viewport.scroll.current,n))return ih(t);const r=d1(t.viewport,n);return Of(t)?E1({state:t,viewport:r}):Ko({state:t,viewport:r})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!yi(t))return t;const n=e.payload.maxScroll;if(Gr(n,t.viewport.scroll.max))return t;const r={...t.viewport,scroll:{...t.viewport.scroll,max:n}};return{...t,viewport:r}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&z();const n=lV({state:t,type:e.type});return n?Ko({state:t,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){const n=e.payload.reason;return t.phase!=="COLLECTING"&&z(),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(e.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:i}=e.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||z(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:i,dimensions:t.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:n}=e.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return t};function ye(t,e){return t instanceof Object&&"type"in t&&t.type===e}const RV=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),PV=t=>({type:"LIFT",payload:t}),bV=t=>({type:"INITIAL_PUBLISH",payload:t}),xV=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),kV=()=>({type:"COLLECTION_STARTING",payload:null}),DV=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),NV=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),OV=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),T1=t=>({type:"MOVE",payload:t}),VV=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),LV=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),MV=()=>({type:"MOVE_UP",payload:null}),FV=()=>({type:"MOVE_DOWN",payload:null}),UV=()=>({type:"MOVE_RIGHT",payload:null}),BV=()=>({type:"MOVE_LEFT",payload:null}),Lm=()=>({type:"FLUSH",payload:null}),jV=t=>({type:"DROP_ANIMATE",payload:t}),Mm=t=>({type:"DROP_COMPLETE",payload:t}),S1=t=>({type:"DROP",payload:t}),$V=t=>({type:"DROP_PENDING",payload:t}),A1=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var zV=t=>({getState:e,dispatch:n})=>r=>i=>{if(!ye(i,"LIFT")){r(i);return}const{id:s,clientSelection:o,movementMode:l}=i.payload,u=e();u.phase==="DROP_ANIMATING"&&n(Mm({completed:u.completed})),e().phase!=="IDLE"&&z(),n(Lm()),n(RV({draggableId:s,movementMode:l}));const h={draggableId:s,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:f,dimensions:p,viewport:g}=t.startPublishing(h);n(bV({critical:f,dimensions:p,clientSelection:o,movementMode:l,viewport:g}))},WV=t=>()=>e=>n=>{ye(n,"INITIAL_PUBLISH")&&t.dragging(),ye(n,"DROP_ANIMATE")&&t.dropping(n.payload.completed.result.reason),(ye(n,"FLUSH")||ye(n,"DROP_COMPLETE"))&&t.resting(),e(n)};const Fm={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Ca={opacity:{drop:0,combining:.7},scale:{drop:.75}},C1={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},fi=`${C1.outOfTheWay}s ${Fm.outOfTheWay}`,Qo={fluid:`opacity ${fi}`,snap:`transform ${fi}, opacity ${fi}`,drop:t=>{const e=`${t}s ${Fm.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${fi}`,placeholder:`height ${fi}, width ${fi}, margin ${fi}`},H_=t=>Gr(t,it)?void 0:`translate(${t.x}px, ${t.y}px)`,Vf={moveTo:H_,drop:(t,e)=>{const n=H_(t);if(n)return e?`${n} scale(${Ca.scale.drop})`:n}},{minDropTime:Lf,maxDropTime:R1}=C1,GV=R1-Lf,q_=1500,HV=.6;var qV=({current:t,destination:e,reason:n})=>{const r=Ta(t,e);if(r<=0)return Lf;if(r>=q_)return R1;const i=r/q_,s=Lf+GV*i,o=n==="CANCEL"?s*HV:s;return Number(o.toFixed(2))},KV=({impact:t,draggable:e,dimensions:n,viewport:r,afterCritical:i})=>{const{draggables:s,droppables:o}=n,l=Xt(t),u=l?o[l]:null,c=o[e.descriptor.droppableId],h=w1({impact:t,draggable:e,draggables:s,afterCritical:i,droppable:u||c,viewport:r});return Qt(h,e.client.borderBox.center)},QV=({draggables:t,reason:e,lastImpact:n,home:r,viewport:i,onLiftImpact:s})=>!n.at||e!=="DROP"?{impact:_1({draggables:t,impact:s,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Sa},didDropInsideDroppable:!0};const YV=({getState:t,dispatch:e})=>n=>r=>{if(!ye(r,"DROP")){n(r);return}const i=t(),s=r.payload.reason;if(i.phase==="COLLECTING"){e($V({reason:s}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&z(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||z();const l=i.critical,u=i.dimensions,c=u.draggables[i.critical.draggable.id],{impact:h,didDropInsideDroppable:f}=QV({reason:s,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),p=f?xm(h):null,g=f?Gc(h):null,w={index:l.draggable.index,droppableId:l.droppable.id},C={draggableId:c.descriptor.id,type:c.descriptor.type,source:w,reason:s,mode:i.movementMode,destination:p,combine:g},P=KV({impact:h,draggable:c,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),E={critical:i.critical,afterCritical:i.afterCritical,result:C,impact:h};if(!(!Gr(i.current.client.offset,P)||!!C.combine)){e(Mm({completed:E}));return}const T=qV({current:i.current.client.offset,destination:P,reason:s});e(jV({newHomeClientOffset:P,dropDuration:T,completed:E}))};var P1=()=>({x:window.pageXOffset,y:window.pageYOffset});function XV(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||t()}}}function JV({onWindowScroll:t}){function e(){t(P1())}const n=Ia(e),r=XV(n);let i=Wr;function s(){return i!==Wr}function o(){s()&&z(),i=un(window,[r])}function l(){s()||z(),n.cancel(),i(),i=Wr}return{start:o,stop:l,isActive:s}}const ZV=t=>ye(t,"DROP_COMPLETE")||ye(t,"DROP_ANIMATE")||ye(t,"FLUSH"),eL=t=>{const e=JV({onWindowScroll:n=>{t.dispatch(VV({newScroll:n}))}});return n=>r=>{!e.isActive()&&ye(r,"INITIAL_PUBLISH")&&e.start(),e.isActive()&&ZV(r)&&e.stop(),n(r)}};var tL=t=>{let e=!1,n=!1;const r=setTimeout(()=>{n=!0}),i=s=>{e||n||(e=!0,t(s),clearTimeout(r))};return i.wasCalled=()=>e,i},nL=()=>{const t=[],e=i=>{const s=t.findIndex(l=>l.timerId===i);s===-1&&z();const[o]=t.splice(s,1);o.callback()};return{add:i=>{const s=setTimeout(()=>e(s)),o={timerId:s,callback:i};t.push(o)},flush:()=>{if(!t.length)return;const i=[...t];t.length=0,i.forEach(s=>{clearTimeout(s.timerId),s.callback()})}}};const rL=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.droppableId===e.droppableId&&t.index===e.index,iL=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.draggableId===e.draggableId&&t.droppableId===e.droppableId,sL=(t,e)=>{if(t===e)return!0;const n=t.draggable.id===e.draggable.id&&t.draggable.droppableId===e.draggable.droppableId&&t.draggable.type===e.draggable.type&&t.draggable.index===e.draggable.index,r=t.droppable.id===e.droppable.id&&t.droppable.type===e.droppable.type;return n&&r},Io=(t,e)=>{e()},Ll=(t,e)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:e});function sh(t,e,n,r){if(!t){n(r(e));return}const i=tL(n);t(e,{announce:i}),i.wasCalled()||n(r(e))}var oL=(t,e)=>{const n=nL();let r=null;const i=(f,p)=>{r&&z(),Io("onBeforeCapture",()=>{const g=t().onBeforeCapture;g&&g({draggableId:f,mode:p})})},s=(f,p)=>{r&&z(),Io("onBeforeDragStart",()=>{const g=t().onBeforeDragStart;g&&g(Ll(f,p))})},o=(f,p)=>{r&&z();const g=Ll(f,p);r={mode:p,lastCritical:f,lastLocation:g.source,lastCombine:null},n.add(()=>{Io("onDragStart",()=>sh(t().onDragStart,g,e,uu.onDragStart))})},l=(f,p)=>{const g=xm(p),w=Gc(p);r||z();const C=!sL(f,r.lastCritical);C&&(r.lastCritical=f);const P=!rL(r.lastLocation,g);P&&(r.lastLocation=g);const E=!iL(r.lastCombine,w);if(E&&(r.lastCombine=w),!C&&!P&&!E)return;const _={...Ll(f,r.mode),combine:w,destination:g};n.add(()=>{Io("onDragUpdate",()=>sh(t().onDragUpdate,_,e,uu.onDragUpdate))})},u=()=>{r||z(),n.flush()},c=f=>{r||z(),r=null,Io("onDragEnd",()=>sh(t().onDragEnd,f,e,uu.onDragEnd))};return{beforeCapture:i,beforeStart:s,start:o,update:l,flush:u,drop:c,abort:()=>{if(!r)return;const f={...Ll(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};c(f)}}},aL=(t,e)=>{const n=oL(t,e);return r=>i=>s=>{if(ye(s,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(ye(s,"INITIAL_PUBLISH")){const l=s.payload.critical;n.beforeStart(l,s.payload.movementMode),i(s),n.start(l,s.payload.movementMode);return}if(ye(s,"DROP_COMPLETE")){const l=s.payload.completed.result;n.flush(),i(s),n.drop(l);return}if(i(s),ye(s,"FLUSH")){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const lL=t=>e=>n=>{if(!ye(n,"DROP_ANIMATION_FINISHED")){e(n);return}const r=t.getState();r.phase!=="DROP_ANIMATING"&&z(),t.dispatch(Mm({completed:r.completed}))},uL=t=>{let e=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),e&&(e(),e=null)}return i=>s=>{if((ye(s,"FLUSH")||ye(s,"DROP_COMPLETE")||ye(s,"DROP_ANIMATION_FINISHED"))&&r(),i(s),!ye(s,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(A1())}};n=requestAnimationFrame(()=>{n=null,e=un(window,[o])})}};var cL=t=>()=>e=>n=>{(ye(n,"DROP_COMPLETE")||ye(n,"FLUSH")||ye(n,"DROP_ANIMATE"))&&t.stopPublishing(),e(n)},dL=t=>{let e=!1;return()=>n=>r=>{if(ye(r,"INITIAL_PUBLISH")){e=!0,t.tryRecordFocus(r.payload.critical.draggable.id),n(r),t.tryRestoreFocusRecorded();return}if(n(r),!!e){if(ye(r,"FLUSH")){e=!1,t.tryRestoreFocusRecorded();return}if(ye(r,"DROP_COMPLETE")){e=!1;const i=r.payload.completed.result;i.combine&&t.tryShiftRecord(i.draggableId,i.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const hL=t=>ye(t,"DROP_COMPLETE")||ye(t,"DROP_ANIMATE")||ye(t,"FLUSH");var fL=t=>e=>n=>r=>{if(hL(r)){t.stop(),n(r);return}if(ye(r,"INITIAL_PUBLISH")){n(r);const i=e.getState();i.phase!=="DRAGGING"&&z(),t.start(i);return}n(r),t.scroll(e.getState())};const pL=t=>e=>n=>{if(e(n),!ye(n,"PUBLISH_WHILE_DRAGGING"))return;const r=t.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||t.dispatch(S1({reason:r.reason})))},mL=WT;var gL=({dimensionMarshal:t,focusMarshal:e,styleMarshal:n,getResponders:r,announce:i,autoScroller:s})=>zT(CV,mL(l2(WV(n),cL(t),zV(t),YV,lL,uL,pL,fL(s),eL,dL(e),aL(r,i))));const oh=()=>({additions:{},removals:{},modified:{}});function yL({registry:t,callbacks:e}){let n=oh(),r=null;const i=()=>{r||(e.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:u,removals:c,modified:h}=n,f=Object.keys(u).map(w=>t.draggable.getById(w).getDimension(it)).sort((w,C)=>w.descriptor.index-C.descriptor.index),p=Object.keys(h).map(w=>{const P=t.droppable.getById(w).callbacks.getScrollWhileDragging();return{droppableId:w,scroll:P}}),g={additions:f,removals:Object.keys(c),modified:p};n=oh(),e.publish(g)}))};return{add:u=>{const c=u.descriptor.id;n.additions[c]=u,n.modified[u.descriptor.droppableId]=!0,n.removals[c]&&delete n.removals[c],i()},remove:u=>{const c=u.descriptor;n.removals[c.id]=!0,n.modified[c.droppableId]=!0,n.additions[c.id]&&delete n.additions[c.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=oh())}}}var b1=({scrollHeight:t,scrollWidth:e,height:n,width:r})=>{const i=Qt({x:e,y:t},{x:r,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},x1=()=>{const t=document.documentElement;return t||z(),t},k1=()=>{const t=x1();return b1({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},vL=()=>{const t=P1(),e=k1(),n=t.y,r=t.x,i=x1(),s=i.clientWidth,o=i.clientHeight,l=r+s,u=n+o;return{frame:Tn({top:n,left:r,right:l,bottom:u}),scroll:{initial:t,current:t,max:e,diff:{value:it,displacement:it}}}},_L=({critical:t,scrollOptions:e,registry:n})=>{const r=vL(),i=r.scroll.current,s=t.droppable,o=n.droppable.getAllByType(s.type).map(h=>h.callbacks.getDimensionAndWatchScroll(i,e)),l=n.draggable.getAllByType(t.draggable.type).map(h=>h.getDimension(i));return{dimensions:{draggables:s1(l),droppables:i1(o)},critical:t,viewport:r}};function K_(t,e,n){return!(n.descriptor.id===e.id||n.descriptor.type!==e.type||t.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var wL=(t,e)=>{let n=null;const r=yL({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),i=(p,g)=>{t.droppable.exists(p)||z(),n&&e.updateDroppableIsEnabled({id:p,isEnabled:g})},s=(p,g)=>{n&&(t.droppable.exists(p)||z(),e.updateDroppableIsCombineEnabled({id:p,isCombineEnabled:g}))},o=(p,g)=>{n&&(t.droppable.exists(p)||z(),e.updateDroppableScroll({id:p,newScroll:g}))},l=(p,g)=>{n&&t.droppable.getById(p).callbacks.scroll(g)},u=()=>{if(!n)return;r.stop();const p=n.critical.droppable;t.droppable.getAllByType(p.type).forEach(g=>g.callbacks.dragStopped()),n.unsubscribe(),n=null},c=p=>{n||z();const g=n.critical.draggable;p.type==="ADDITION"&&K_(t,g,p.value)&&r.add(p.value),p.type==="REMOVAL"&&K_(t,g,p.value)&&r.remove(p.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:s,scrollDroppable:l,updateDroppableScroll:o,startPublishing:p=>{n&&z();const g=t.draggable.getById(p.draggableId),w=t.droppable.getById(g.descriptor.droppableId),C={draggable:g.descriptor,droppable:w.descriptor},P=t.subscribe(c);return n={critical:C,unsubscribe:P},_L({critical:C,registry:t,scrollOptions:p.scrollOptions})},stopPublishing:u}},D1=(t,e)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP",EL=t=>{window.scrollBy(t.x,t.y)};const IL=rt(t=>Wc(t).filter(e=>!(!e.isEnabled||!e.frame))),TL=(t,e)=>IL(e).find(r=>(r.frame||z(),m1(r.frame.pageMarginBox)(t)))||null;var SL=({center:t,destination:e,droppables:n})=>{if(e){const i=n[e];return i.frame?i:null}return TL(t,n)};const Ra={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var AL=(t,e,n=()=>Ra)=>{const r=n(),i=t[e.size]*r.startFromPercentage,s=t[e.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:s}},N1=({startOfRange:t,endOfRange:e,current:n})=>{const r=e-t;return r===0?0:(n-t)/r},Um=1,CL=(t,e,n=()=>Ra)=>{const r=n();if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return r.maxPixelScroll;if(t===e.startScrollingFrom)return Um;const s=1-N1({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),o=r.maxPixelScroll*r.ease(s);return Math.ceil(o)},RL=(t,e,n)=>{const r=n(),i=r.durationDampening.accelerateAt,s=r.durationDampening.stopDampeningAt,o=e,l=s,c=Date.now()-o;if(c>=s)return t;if(c<i)return Um;const h=N1({startOfRange:i,endOfRange:l,current:c}),f=t*r.ease(h);return Math.ceil(f)},Q_=({distanceToEdge:t,thresholds:e,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const s=CL(t,e,i);return s===0?0:r?Math.max(RL(s,n,i),Um):s},Y_=({container:t,distanceToEdges:e,dragStartTime:n,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=AL(t,r,s);return e[r.end]<e[r.start]?Q_({distanceToEdge:e[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s}):-1*Q_({distanceToEdge:e[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s})},PL=({container:t,subject:e,proposedScroll:n})=>{const r=e.height>t.height,i=e.width>t.width;return!i&&!r?n:i&&r?null:{x:i?0:n.x,y:r?0:n.y}};const bL=r1(t=>t===0?0:t);var O1=({dragStartTime:t,container:e,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o={top:r.y-e.top,right:e.right-r.x,bottom:e.bottom-r.y,left:r.x-e.left},l=Y_({container:e,distanceToEdges:o,dragStartTime:t,axis:km,shouldUseTimeDampening:i,getAutoScrollerOptions:s}),u=Y_({container:e,distanceToEdges:o,dragStartTime:t,axis:l1,shouldUseTimeDampening:i,getAutoScrollerOptions:s}),c=bL({x:u,y:l});if(Gr(c,it))return null;const h=PL({container:e,subject:n,proposedScroll:c});return h?Gr(h,it)?null:h:null};const xL=r1(t=>t===0?0:t>0?1:-1),Bm=(()=>{const t=(e,n)=>e<0?e:e>n?e-n:0;return({current:e,max:n,change:r})=>{const i=ut(e,r),s={x:t(i.x,n.x),y:t(i.y,n.y)};return Gr(s,it)?null:s}})(),V1=({max:t,current:e,change:n})=>{const r={x:Math.max(e.x,t.x),y:Math.max(e.y,t.y)},i=xL(n),s=Bm({max:r,current:e,change:i});return!s||i.x!==0&&s.x===0||i.y!==0&&s.y===0},jm=(t,e)=>V1({current:t.scroll.current,max:t.scroll.max,change:e}),kL=(t,e)=>{if(!jm(t,e))return null;const n=t.scroll.max,r=t.scroll.current;return Bm({current:r,max:n,change:e})},$m=(t,e)=>{const n=t.frame;return n?V1({current:n.scroll.current,max:n.scroll.max,change:e}):!1},DL=(t,e)=>{const n=t.frame;return!n||!$m(t,e)?null:Bm({current:n.scroll.current,max:n.scroll.max,change:e})};var NL=({viewport:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=O1({dragStartTime:r,container:t.frame,subject:e,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s});return o&&jm(t,o)?o:null},OL=({droppable:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=t.frame;if(!o)return null;const l=O1({dragStartTime:r,container:o.pageMarginBox,subject:e,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s});return l&&$m(t,l)?l:null},X_=({state:t,dragStartTime:e,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:s})=>{const o=t.current.page.borderBoxCenter,u=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const f=t.viewport,p=NL({dragStartTime:e,viewport:f,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s});if(p){r(p);return}}const c=SL({center:o,destination:Xt(t.impact),droppables:t.dimensions.droppables});if(!c)return;const h=OL({dragStartTime:e,droppable:c,subject:u,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s});h&&i(c.descriptor.id,h)},VL=({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n=()=>Ra})=>{const r=Ia(t),i=Ia(e);let s=null;const o=c=>{s||z();const{shouldUseTimeDampening:h,dragStartTime:f}=s;X_({state:c,scrollWindow:r,scrollDroppable:i,dragStartTime:f,shouldUseTimeDampening:h,getAutoScrollerOptions:n})};return{start:c=>{s&&z();const h=Date.now();let f=!1;const p=()=>{f=!0};X_({state:c,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:p,scrollDroppable:p,getAutoScrollerOptions:n}),s={dragStartTime:h,shouldUseTimeDampening:f},f&&o(c)},stop:()=>{s&&(r.cancel(),i.cancel(),s=null)},scroll:o}},LL=({move:t,scrollDroppable:e,scrollWindow:n})=>{const r=(l,u)=>{const c=ut(l.current.client.selection,u);t({client:c})},i=(l,u)=>{if(!$m(l,u))return u;const c=DL(l,u);if(!c)return e(l.descriptor.id,u),null;const h=Qt(u,c);return e(l.descriptor.id,h),Qt(u,h)},s=(l,u,c)=>{if(!l||!jm(u,c))return c;const h=kL(u,c);if(!h)return n(c),null;const f=Qt(c,h);return n(f),Qt(c,f)};return l=>{const u=l.scrollJumpRequest;if(!u)return;const c=Xt(l.impact);c||z();const h=i(l.dimensions.droppables[c],u);if(!h)return;const f=l.viewport,p=s(l.isWindowScrollAllowed,f,h);p&&r(l,p)}},ML=({scrollDroppable:t,scrollWindow:e,move:n,getAutoScrollerOptions:r})=>{const i=VL({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r}),s=LL({move:n,scrollWindow:e,scrollDroppable:t});return{scroll:u=>{if(!(r().disabled||u.phase!=="DRAGGING")){if(u.movementMode==="FLUID"){i.scroll(u);return}u.scrollJumpRequest&&s(u)}},start:i.start,stop:i.stop}};const Ls="data-rfd",Ms=(()=>{const t=`${Ls}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),Mf=(()=>{const t=`${Ls}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),FL=(()=>{const t=`${Ls}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),J_={contextId:`${Ls}-scroll-container-context-id`},UL=t=>e=>`[${e}="${t}"]`,To=(t,e)=>t.map(n=>{const r=n.styles[e];return r?`${n.selector} { ${r} }`:""}).join(" "),BL="pointer-events: none;";var jL=t=>{const e=UL(t),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Ms.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:BL,dropAnimating:l}}})(),r=(()=>{const l=`
      transition: ${Qo.outOfTheWay};
    `;return{selector:e(Mf.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),i={selector:e(FL.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:To(o,"always"),resting:To(o,"resting"),dragging:To(o,"dragging"),dropAnimating:To(o,"dropAnimating"),userCancel:To(o,"userCancel")}};const Jt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?M.useLayoutEffect:M.useEffect,ah=()=>{const t=document.querySelector("head");return t||z(),t},Z_=t=>{const e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.type="text/css",e};function $L(t,e){const n=de(()=>jL(t),[t]),r=M.useRef(null),i=M.useRef(null),s=X(rt(f=>{const p=i.current;p||z(),p.textContent=f}),[]),o=X(f=>{const p=r.current;p||z(),p.textContent=f},[]);Jt(()=>{!r.current&&!i.current||z();const f=Z_(e),p=Z_(e);return r.current=f,i.current=p,f.setAttribute(`${Ls}-always`,t),p.setAttribute(`${Ls}-dynamic`,t),ah().appendChild(f),ah().appendChild(p),o(n.always),s(n.resting),()=>{const g=w=>{const C=w.current;C||z(),ah().removeChild(C),w.current=null};g(r),g(i)}},[e,o,s,n.always,n.resting,t]);const l=X(()=>s(n.dragging),[s,n.dragging]),u=X(f=>{if(f==="DROP"){s(n.dropAnimating);return}s(n.userCancel)},[s,n.dropAnimating,n.userCancel]),c=X(()=>{i.current&&s(n.resting)},[s,n.resting]);return de(()=>({dragging:l,dropping:u,resting:c}),[l,u,c])}function L1(t,e){return Array.from(t.querySelectorAll(e))}var M1=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function Kc(t){return t instanceof M1(t).HTMLElement}function zL(t,e){const n=`[${Ms.contextId}="${t}"]`,r=L1(document,n);if(!r.length)return null;const i=r.find(s=>s.getAttribute(Ms.draggableId)===e);return!i||!Kc(i)?null:i}function WL(t){const e=M.useRef({}),n=M.useRef(null),r=M.useRef(null),i=M.useRef(!1),s=X(function(p,g){const w={id:p,focus:g};return e.current[p]=w,function(){const P=e.current;P[p]!==w&&delete P[p]}},[]),o=X(function(p){const g=zL(t,p);g&&g!==document.activeElement&&g.focus()},[t]),l=X(function(p,g){n.current===p&&(n.current=g)},[]),u=X(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const p=n.current;p&&o(p)}))},[o]),c=X(function(p){n.current=null;const g=document.activeElement;g&&g.getAttribute(Ms.draggableId)===p&&(n.current=p)},[]);return Jt(()=>(i.current=!0,function(){i.current=!1;const p=r.current;p&&cancelAnimationFrame(p)}),[]),de(()=>({register:s,tryRecordFocus:c,tryRestoreFocusRecorded:u,tryShiftRecord:l}),[s,c,u,l])}function GL(){const t={draggables:{},droppables:{}},e=[];function n(f){return e.push(f),function(){const g=e.indexOf(f);g!==-1&&e.splice(g,1)}}function r(f){e.length&&e.forEach(p=>p(f))}function i(f){return t.draggables[f]||null}function s(f){const p=i(f);return p||z(),p}const o={register:f=>{t.draggables[f.descriptor.id]=f,r({type:"ADDITION",value:f})},update:(f,p)=>{const g=t.draggables[p.descriptor.id];g&&g.uniqueId===f.uniqueId&&(delete t.draggables[p.descriptor.id],t.draggables[f.descriptor.id]=f)},unregister:f=>{const p=f.descriptor.id,g=i(p);g&&f.uniqueId===g.uniqueId&&(delete t.draggables[p],t.droppables[f.descriptor.droppableId]&&r({type:"REMOVAL",value:f}))},getById:s,findById:i,exists:f=>!!i(f),getAllByType:f=>Object.values(t.draggables).filter(p=>p.descriptor.type===f)};function l(f){return t.droppables[f]||null}function u(f){const p=l(f);return p||z(),p}const c={register:f=>{t.droppables[f.descriptor.id]=f},unregister:f=>{const p=l(f.descriptor.id);p&&f.uniqueId===p.uniqueId&&delete t.droppables[f.descriptor.id]},getById:u,findById:l,exists:f=>!!l(f),getAllByType:f=>Object.values(t.droppables).filter(p=>p.descriptor.type===f)};function h(){t.draggables={},t.droppables={},e.length=0}return{draggable:o,droppable:c,subscribe:n,clean:h}}function HL(){const t=de(GL,[]);return M.useEffect(()=>function(){t.clean()},[t]),t}var zm=Fe.createContext(null),oc=()=>{const t=document.body;return t||z(),t};const qL={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},KL=t=>`rfd-announcement-${t}`;function QL(t){const e=de(()=>KL(t),[t]),n=M.useRef(null);return M.useEffect(function(){const s=document.createElement("div");return n.current=s,s.id=e,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),nc(s.style,qL),oc().appendChild(s),function(){setTimeout(function(){const u=oc();u.contains(s)&&u.removeChild(s),s===n.current&&(n.current=null)})}},[e]),X(i=>{const s=n.current;if(s){s.textContent=i;return}},[])}const YL={separator:"::"};function Wm(t,e=YL){const n=Fe.useId();return de(()=>`${t}${e.separator}${n}`,[e.separator,t,n])}function XL({contextId:t,uniqueId:e}){return`rfd-hidden-text-${t}-${e}`}function JL({contextId:t,text:e}){const n=Wm("hidden-text",{separator:"-"}),r=de(()=>XL({contextId:t,uniqueId:n}),[n,t]);return M.useEffect(function(){const s=document.createElement("div");return s.id=r,s.textContent=e,s.style.display="none",oc().appendChild(s),function(){const l=oc();l.contains(s)&&l.removeChild(s)}},[r,e]),r}var Qc=Fe.createContext(null);function F1(t){const e=M.useRef(t);return M.useEffect(()=>{e.current=t}),e}function ZL(){let t=null;function e(){return!!t}function n(o){return o===t}function r(o){t&&z();const l={abandon:o};return t=l,l}function i(){t||z(),t=null}function s(){t&&(t.abandon(),i())}return{isClaimed:e,isActive:n,claim:r,release:i,tryAbandon:s}}function Pa(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const eM=9,tM=13,Gm=27,U1=32,nM=33,rM=34,iM=35,sM=36,oM=37,aM=38,lM=39,uM=40,cM={[tM]:!0,[eM]:!0};var B1=t=>{cM[t.keyCode]&&t.preventDefault()};const Yc=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(r=>`on${r}`in document)||t})(),j1=0,e0=5;function dM(t,e){return Math.abs(e.x-t.x)>=e0||Math.abs(e.y-t.y)>=e0}const t0={type:"IDLE"};function hM({cancel:t,completed:e,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:s,clientX:o,clientY:l}=i;if(s!==j1)return;const u={x:o,y:l},c=n();if(c.type==="DRAGGING"){i.preventDefault(),c.actions.move(u);return}c.type!=="PENDING"&&z();const h=c.point;if(!dM(h,u))return;i.preventDefault();const f=c.actions.fluidLift(u);r({type:"DRAGGING",actions:f})}},{eventName:"mouseup",fn:i=>{const s=n();if(s.type!=="DRAGGING"){t();return}i.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:i=>{n().type==="DRAGGING"&&i.preventDefault(),t()}},{eventName:"keydown",fn:i=>{if(n().type==="PENDING"){t();return}if(i.keyCode===Gm){i.preventDefault(),t();return}B1(i)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:i=>{const s=n();if(s.type==="IDLE"&&z(),s.actions.shouldRespectForcePress()){t();return}i.preventDefault()}},{eventName:Yc,fn:t}]}function fM(t){const e=M.useRef(t0),n=M.useRef(Wr),r=de(()=>({eventName:"mousedown",fn:function(f){if(f.defaultPrevented||f.button!==j1||f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)return;const p=t.findClosestDraggableId(f);if(!p)return;const g=t.tryGetLock(p,o,{sourceEvent:f});if(!g)return;f.preventDefault();const w={x:f.clientX,y:f.clientY};n.current(),c(g,w)}}),[t]),i=de(()=>({eventName:"webkitmouseforcewillbegin",fn:h=>{if(h.defaultPrevented)return;const f=t.findClosestDraggableId(h);if(!f)return;const p=t.findOptionsForDraggable(f);p&&(p.shouldRespectForcePress||t.canGetLock(f)&&h.preventDefault())}}),[t]),s=X(function(){const f={passive:!1,capture:!0};n.current=un(window,[i,r],f)},[i,r]),o=X(()=>{e.current.type!=="IDLE"&&(e.current=t0,n.current(),s())},[s]),l=X(()=>{const h=e.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=X(function(){const f={capture:!0,passive:!1},p=hM({cancel:l,completed:o,getPhase:()=>e.current,setPhase:g=>{e.current=g}});n.current=un(window,p,f)},[l,o]),c=X(function(f,p){e.current.type!=="IDLE"&&z(),e.current={type:"PENDING",point:p,actions:f},u()},[u]);Jt(function(){return s(),function(){n.current()}},[s])}function pM(){}const mM={[rM]:!0,[nM]:!0,[sM]:!0,[iM]:!0};function gM(t,e){function n(){e(),t.cancel()}function r(){e(),t.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===Gm){i.preventDefault(),n();return}if(i.keyCode===U1){i.preventDefault(),r();return}if(i.keyCode===uM){i.preventDefault(),t.moveDown();return}if(i.keyCode===aM){i.preventDefault(),t.moveUp();return}if(i.keyCode===lM){i.preventDefault(),t.moveRight();return}if(i.keyCode===oM){i.preventDefault(),t.moveLeft();return}if(mM[i.keyCode]){i.preventDefault();return}B1(i)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Yc,fn:n}]}function yM(t){const e=M.useRef(pM),n=de(()=>({eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==U1)return;const o=t.findClosestDraggableId(s);if(!o)return;const l=t.tryGetLock(o,h,{sourceEvent:s});if(!l)return;s.preventDefault();let u=!0;const c=l.snapLift();e.current();function h(){u||z(),u=!1,e.current(),r()}e.current=un(window,gM(c,h),{capture:!0,passive:!1})}}),[t]),r=X(function(){const s={passive:!1,capture:!0};e.current=un(window,[n],s)},[n]);Jt(function(){return r(),function(){e.current()}},[r])}const lh={type:"IDLE"},vM=120,_M=.15;function wM({cancel:t,getPhase:e}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(e().type!=="DRAGGING"){t();return}n.keyCode===Gm&&n.preventDefault(),t()}},{eventName:Yc,fn:t}]}function EM({cancel:t,completed:e,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=n();if(i.type!=="DRAGGING"){t();return}i.hasMoved=!0;const{clientX:s,clientY:o}=r.touches[0],l={x:s,y:o};r.preventDefault(),i.actions.move(l)}},{eventName:"touchend",fn:r=>{const i=n();if(i.type!=="DRAGGING"){t();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){t();return}r.preventDefault(),t()}},{eventName:"touchforcechange",fn:r=>{const i=n();i.type==="IDLE"&&z();const s=r.touches[0];if(!s||!(s.force>=_M))return;const l=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){l&&t();return}if(l){if(i.hasMoved){r.preventDefault();return}t();return}r.preventDefault()}},{eventName:Yc,fn:t}]}function IM(t){const e=M.useRef(lh),n=M.useRef(Wr),r=X(function(){return e.current},[]),i=X(function(g){e.current=g},[]),s=de(()=>({eventName:"touchstart",fn:function(g){if(g.defaultPrevented)return;const w=t.findClosestDraggableId(g);if(!w)return;const C=t.tryGetLock(w,l,{sourceEvent:g});if(!C)return;const P=g.touches[0],{clientX:E,clientY:_}=P,T={x:E,y:_};n.current(),f(C,T)}}),[t]),o=X(function(){const g={capture:!0,passive:!1};n.current=un(window,[s],g)},[s]),l=X(()=>{const p=e.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),i(lh),n.current(),o())},[o,i]),u=X(()=>{const p=e.current;l(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[l]),c=X(function(){const g={capture:!0,passive:!1},w={cancel:u,completed:l,getPhase:r},C=un(window,EM(w),g),P=un(window,wM(w),g);n.current=function(){C(),P()}},[u,r,l]),h=X(function(){const g=r();g.type!=="PENDING"&&z();const w=g.actions.fluidLift(g.point);i({type:"DRAGGING",actions:w,hasMoved:!1})},[r,i]),f=X(function(g,w){r().type!=="IDLE"&&z();const C=setTimeout(h,vM);i({type:"PENDING",point:w,actions:g,longPressTimerId:C}),c()},[c,r,i,h]);Jt(function(){return o(),function(){n.current();const w=r();w.type==="PENDING"&&(clearTimeout(w.longPressTimerId),i(lh))}},[r,o,i]),Jt(function(){return un(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const TM=["input","button","textarea","select","option","optgroup","video","audio"];function $1(t,e){if(e==null)return!1;if(TM.includes(e.tagName.toLowerCase()))return!0;const r=e.getAttribute("contenteditable");return r==="true"||r===""?!0:e===t?!1:$1(t,e.parentElement)}function SM(t,e){const n=e.target;return Kc(n)?$1(t,n):!1}var AM=t=>Tn(t.getBoundingClientRect()).center;function CM(t){return t instanceof M1(t).Element}const RM=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||t})();function z1(t,e){return t==null?null:t[RM](e)?t:z1(t.parentElement,e)}function PM(t,e){return t.closest?t.closest(e):z1(t,e)}function bM(t){return`[${Ms.contextId}="${t}"]`}function xM(t,e){const n=e.target;if(!CM(n))return null;const r=bM(t),i=PM(n,r);return!i||!Kc(i)?null:i}function kM(t,e){const n=xM(t,e);return n?n.getAttribute(Ms.draggableId):null}function DM(t,e){const n=`[${Mf.contextId}="${t}"]`,i=L1(document,n).find(s=>s.getAttribute(Mf.id)===e);return!i||!Kc(i)?null:i}function NM(t){t.preventDefault()}function Ml({expected:t,phase:e,isLockActive:n,shouldWarn:r}){return!(!n()||t!==e)}function W1({lockAPI:t,store:e,registry:n,draggableId:r}){if(t.isClaimed())return!1;const i=n.draggable.findById(r);return!(!i||!i.options.isEnabled||!D1(e.getState(),r))}function OM({lockAPI:t,contextId:e,store:n,registry:r,draggableId:i,forceSensorStop:s,sourceEvent:o}){if(!W1({lockAPI:t,store:n,registry:r,draggableId:i}))return null;const u=r.draggable.getById(i),c=DM(e,u.descriptor.id);if(!c||o&&!u.options.canDragInteractiveElements&&SM(c,o))return null;const h=t.claim(s||Wr);let f="PRE_DRAG";function p(){return u.options.shouldRespectForcePress}function g(){return t.isActive(h)}function w(L,V){Ml({expected:L,phase:f,isLockActive:g,shouldWarn:!0})&&n.dispatch(V())}const C=w.bind(null,"DRAGGING");function P(L){function V(){t.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(V(),z()),n.dispatch(PV(L.liftActionArgs)),f="DRAGGING";function I(v,S={shouldBlockNextClick:!1}){if(L.cleanup(),S.shouldBlockNextClick){const A=un(window,[{eventName:"click",fn:NM,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(A)}V(),n.dispatch(S1({reason:v}))}return{isActive:()=>Ml({expected:"DRAGGING",phase:f,isLockActive:g,shouldWarn:!1}),shouldRespectForcePress:p,drop:v=>I("DROP",v),cancel:v=>I("CANCEL",v),...L.actions}}function E(L){const V=Ia(v=>{C(()=>T1({client:v}))});return{...P({liftActionArgs:{id:i,clientSelection:L,movementMode:"FLUID"},cleanup:()=>V.cancel(),actions:{move:V}}),move:V}}function _(){const L={moveUp:()=>C(MV),moveRight:()=>C(UV),moveDown:()=>C(FV),moveLeft:()=>C(BV)};return P({liftActionArgs:{id:i,clientSelection:AM(c),movementMode:"SNAP"},cleanup:Wr,actions:L})}function T(){Ml({expected:"PRE_DRAG",phase:f,isLockActive:g,shouldWarn:!0})&&t.release()}return{isActive:()=>Ml({expected:"PRE_DRAG",phase:f,isLockActive:g,shouldWarn:!1}),shouldRespectForcePress:p,fluidLift:E,snapLift:_,abort:T}}const VM=[fM,yM,IM];function LM({contextId:t,store:e,registry:n,customSensors:r,enableDefaultSensors:i}){const s=[...i?VM:[],...r||[]],o=M.useState(()=>ZL())[0],l=X(function(P,E){Pa(P)&&!Pa(E)&&o.tryAbandon()},[o]);Jt(function(){let P=e.getState();return e.subscribe(()=>{const _=e.getState();l(P,_),P=_})},[o,e,l]),Jt(()=>o.tryAbandon,[o.tryAbandon]);const u=X(C=>W1({lockAPI:o,registry:n,store:e,draggableId:C}),[o,n,e]),c=X((C,P,E)=>OM({lockAPI:o,registry:n,contextId:t,store:e,draggableId:C,forceSensorStop:P||null,sourceEvent:E&&E.sourceEvent?E.sourceEvent:null}),[t,o,n,e]),h=X(C=>kM(t,C),[t]),f=X(C=>{const P=n.draggable.findById(C);return P?P.options:null},[n.draggable]),p=X(function(){o.isClaimed()&&(o.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(Lm()))},[o,e]),g=X(()=>o.isClaimed(),[o]),w=de(()=>({canGetLock:u,tryGetLock:c,findClosestDraggableId:h,findOptionsForDraggable:f,tryReleaseLock:p,isLockClaimed:g}),[u,c,h,f,p,g]);for(let C=0;C<s.length;C++)s[C](w)}const MM=t=>({onBeforeCapture:e=>{const n=()=>{t.onBeforeCapture&&t.onBeforeCapture(e)};Sc.flushSync(n)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),FM=t=>({...Ra,...t.autoScrollerOptions,durationDampening:{...Ra.durationDampening,...t.autoScrollerOptions}});function So(t){return t.current||z(),t.current}function UM(t){const{contextId:e,setCallbacks:n,sensors:r,nonce:i,dragHandleUsageInstructions:s}=t,o=M.useRef(null),l=F1(t),u=X(()=>MM(l.current),[l]),c=X(()=>FM(l.current),[l]),h=QL(e),f=JL({contextId:e,text:s}),p=$L(e,i),g=X(A=>{So(o).dispatch(A)},[]),w=de(()=>b_({publishWhileDragging:xV,updateDroppableScroll:DV,updateDroppableIsEnabled:NV,updateDroppableIsCombineEnabled:OV,collectionStarting:kV},g),[g]),C=HL(),P=de(()=>wL(C,w),[C,w]),E=de(()=>ML({scrollWindow:EL,scrollDroppable:P.scrollDroppable,getAutoScrollerOptions:c,...b_({move:T1},g)}),[P.scrollDroppable,g,c]),_=WL(e),T=de(()=>gL({announce:h,autoScroller:E,dimensionMarshal:P,focusMarshal:_,getResponders:u,styleMarshal:p}),[h,E,P,_,u,p]);o.current=T;const k=X(()=>{const A=So(o);A.getState().phase!=="IDLE"&&A.dispatch(Lm())},[]),L=X(()=>{const A=So(o).getState();return A.phase==="DROP_ANIMATING"?!0:A.phase==="IDLE"?!1:A.isDragging},[]),V=de(()=>({isDragging:L,tryAbort:k}),[L,k]);n(V);const I=X(A=>D1(So(o).getState(),A),[]),v=X(()=>yi(So(o).getState()),[]),S=de(()=>({marshal:P,focus:_,contextId:e,canLift:I,isMovementAllowed:v,dragHandleUsageInstructionsId:f,registry:C}),[e,P,f,_,I,v,C]);return LM({contextId:e,store:T,registry:C,customSensors:r||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),M.useEffect(()=>k,[k]),Fe.createElement(Qc.Provider,{value:S},Fe.createElement(uO,{context:zm,store:T},t.children))}function BM(){return Fe.useId()}function jM(t){const e=BM(),n=t.dragHandleUsageInstructions||uu.dragHandleUsageInstructions;return Fe.createElement(yO,null,r=>Fe.createElement(UM,{nonce:t.nonce,contextId:e,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const n0={dragging:5e3,dropAnimating:4500},$M=(t,e)=>e?Qo.drop(e.duration):t?Qo.snap:Qo.fluid,zM=(t,e)=>{if(t)return e?Ca.opacity.drop:Ca.opacity.combining},WM=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function GM(t){const n=t.dimension.client,{offset:r,combineWith:i,dropping:s}=t,o=!!i,l=WM(t),u=!!s,c=u?Vf.drop(r,o):Vf.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:$M(l,s),transform:c,opacity:zM(o,u),zIndex:u?n0.dropAnimating:n0.dragging,pointerEvents:"none"}}function HM(t){return{transform:Vf.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function qM(t){return t.type==="DRAGGING"?GM(t):HM(t)}function KM(t,e,n=it){const r=window.getComputedStyle(e),i=e.getBoundingClientRect(),s=XT(i,r),o=tc(s,n),l={client:s,tagName:e.tagName.toLowerCase(),display:r.display},u={x:s.marginBox.width,y:s.marginBox.height};return{descriptor:t,placeholder:l,displaceBy:u,client:s,page:o}}function QM(t){const e=Wm("draggable"),{descriptor:n,registry:r,getDraggableRef:i,canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:l}=t,u=de(()=>({canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:l}),[s,l,o]),c=X(g=>{const w=i();return w||z(),KM(n,w,g)},[n,i]),h=de(()=>({uniqueId:e,descriptor:n,options:u,getDimension:c}),[n,c,u,e]),f=M.useRef(h),p=M.useRef(!0);Jt(()=>(r.draggable.register(f.current),()=>r.draggable.unregister(f.current)),[r.draggable]),Jt(()=>{if(p.current){p.current=!1;return}const g=f.current;f.current=h,r.draggable.update(h,g)},[h,r.draggable])}var Hm=Fe.createContext(null);function ac(t){const e=M.useContext(t);return e||z(),e}function YM(t){t.preventDefault()}const XM=t=>{const e=M.useRef(null),n=X((V=null)=>{e.current=V},[]),r=X(()=>e.current,[]),{contextId:i,dragHandleUsageInstructionsId:s,registry:o}=ac(Qc),{type:l,droppableId:u}=ac(Hm),c=de(()=>({id:t.draggableId,index:t.index,type:l,droppableId:u}),[t.draggableId,t.index,l,u]),{children:h,draggableId:f,isEnabled:p,shouldRespectForcePress:g,canDragInteractiveElements:w,isClone:C,mapped:P,dropAnimationFinished:E}=t;if(!C){const V=de(()=>({descriptor:c,registry:o,getDraggableRef:r,canDragInteractiveElements:w,shouldRespectForcePress:g,isEnabled:p}),[c,o,r,w,g,p]);QM(V)}const _=de(()=>p?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:YM}:null,[i,s,f,p]),T=X(V=>{P.type==="DRAGGING"&&P.dropping&&V.propertyName==="transform"&&Sc.flushSync(E)},[E,P]),k=de(()=>{const V=qM(P),I=P.type==="DRAGGING"&&P.dropping?T:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":f,style:V,onTransitionEnd:I},dragHandleProps:_}},[i,_,f,P,T,n]),L=de(()=>({draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}),[c.droppableId,c.id,c.index,c.type]);return Fe.createElement(Fe.Fragment,null,h(k,P.snapshot,L))};var G1=(t,e)=>t===e,H1=t=>{const{combine:e,destination:n}=t;return n?n.droppableId:e?e.droppableId:null};const JM=t=>t.combine?t.combine.draggableId:null,ZM=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function e4(){const t=rt((i,s)=>({x:i,y:s})),e=rt((i,s,o=null,l=null,u=null)=>({isDragging:!0,isClone:s,isDropAnimating:!!u,dropAnimation:u,mode:i,draggingOver:o,combineWith:l,combineTargetFor:null})),n=rt((i,s,o,l,u=null,c=null,h=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:c,mode:s,offset:i,dimension:o,forceShouldAnimate:h,snapshot:e(s,l,u,c,null)}}));return(i,s)=>{if(Pa(i)){if(i.critical.draggable.id!==s.draggableId)return null;const o=i.current.client.offset,l=i.dimensions.draggables[s.draggableId],u=Xt(i.impact),c=ZM(i.impact),h=i.forceShouldAnimate;return n(t(o.x,o.y),i.movementMode,l,s.isClone,u,c,h)}if(i.phase==="DROP_ANIMATING"){const o=i.completed;if(o.result.draggableId!==s.draggableId)return null;const l=s.isClone,u=i.dimensions.draggables[s.draggableId],c=o.result,h=c.mode,f=H1(c),p=JM(c),w={duration:i.dropDuration,curve:Fm.drop,moveTo:i.newHomeClientOffset,opacity:p?Ca.opacity.drop:null,scale:p?Ca.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:u,dropping:w,draggingOver:f,combineWith:p,mode:h,forceShouldAnimate:null,snapshot:e(h,l,f,p,w)}}}return null}}function q1(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const t4={mapped:{type:"SECONDARY",offset:it,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:q1(null)}};function n4(){const t=rt((o,l)=>({x:o,y:l})),e=rt(q1),n=rt((o,l=null,u)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:u,snapshot:e(l)}})),r=o=>o?n(it,o,!0):null,i=(o,l,u,c)=>{const h=u.displaced.visible[o],f=!!(c.inVirtualList&&c.effected[o]),p=Gc(u),g=p&&p.draggableId===o?l:null;if(!h){if(!f)return r(g);if(u.displaced.invisible[o])return null;const P=Qs(c.displacedBy.point),E=t(P.x,P.y);return n(E,g,!0)}if(f)return r(g);const w=u.displacedBy.point,C=t(w.x,w.y);return n(C,g,h.shouldAnimate)};return(o,l)=>{if(Pa(o))return o.critical.draggable.id===l.draggableId?null:i(l.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const u=o.completed;return u.result.draggableId===l.draggableId?null:i(l.draggableId,u.result.draggableId,u.impact,u.afterCritical)}return null}}const r4=()=>{const t=e4(),e=n4();return(r,i)=>t(r,i)||e(r,i)||t4},i4={dropAnimationFinished:A1},s4=YT(r4,i4,null,{context:zm,areStatePropsEqual:G1})(XM);function K1(t){return ac(Hm).isUsingCloneFor===t.draggableId&&!t.isClone?null:Fe.createElement(s4,t)}function r0(t){const e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,n=!!t.disableInteractiveElementBlocking,r=!!t.shouldRespectForcePress;return Fe.createElement(K1,nc({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const Q1=t=>e=>t===e,o4=Q1("scroll"),a4=Q1("auto"),i0=(t,e)=>e(t.overflowX)||e(t.overflowY),l4=t=>{const e=window.getComputedStyle(t),n={overflowX:e.overflowX,overflowY:e.overflowY};return i0(n,o4)||i0(n,a4)},u4=()=>!1,Y1=t=>t==null?null:t===document.body?u4()?t:null:t===document.documentElement?null:l4(t)?t:Y1(t.parentElement);var Ff=t=>({x:t.scrollLeft,y:t.scrollTop});const X1=t=>t?window.getComputedStyle(t).position==="fixed"?!0:X1(t.parentElement):!1;var c4=t=>{const e=Y1(t),n=X1(t);return{closestScrollable:e,isFixedOnPage:n}},d4=({descriptor:t,isEnabled:e,isCombineEnabled:n,isFixedOnPage:r,direction:i,client:s,page:o,closest:l})=>{const u=(()=>{if(!l)return null;const{scrollSize:p,client:g}=l,w=b1({scrollHeight:p.scrollHeight,scrollWidth:p.scrollWidth,height:g.paddingBox.height,width:g.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:g,scrollSize:p,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:w,diff:{value:it,displacement:it}}}})(),c=i==="vertical"?km:l1,h=Vs({page:o,withPlaceholder:null,axis:c,frame:u});return{descriptor:t,isCombineEnabled:n,isFixedOnPage:r,axis:c,isEnabled:e,client:s,page:o,frame:u,subject:h}};const h4=(t,e)=>{const n=JT(t);if(!e||t!==e)return n;const r=n.paddingBox.top-e.scrollTop,i=n.paddingBox.left-e.scrollLeft,s=r+e.scrollHeight,o=i+e.scrollWidth,u=Rm({top:r,right:o,bottom:s,left:i},n.border);return Pm({borderBox:u,margin:n.margin,border:n.border,padding:n.padding})};var f4=({ref:t,descriptor:e,env:n,windowScroll:r,direction:i,isDropDisabled:s,isCombineEnabled:o,shouldClipSubject:l})=>{const u=n.closestScrollable,c=h4(t,u),h=tc(c,r),f=(()=>{if(!u)return null;const g=JT(u),w={scrollHeight:u.scrollHeight,scrollWidth:u.scrollWidth};return{client:g,page:tc(g,r),scroll:Ff(u),scrollSize:w,shouldClipSubject:l}})();return d4({descriptor:e,isEnabled:!s,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:c,page:h,closest:f})};const p4={passive:!1},m4={passive:!0};var s0=t=>t.shouldPublishImmediately?p4:m4;const Fl=t=>t&&t.env.closestScrollable||null;function g4(t){const e=M.useRef(null),n=ac(Qc),r=Wm("droppable"),{registry:i,marshal:s}=n,o=F1(t),l=de(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),u=M.useRef(l),c=de(()=>rt((k,L)=>{e.current||z();const V={x:k,y:L};s.updateDroppableScroll(l.id,V)}),[l.id,s]),h=X(()=>{const k=e.current;return!k||!k.env.closestScrollable?it:Ff(k.env.closestScrollable)},[]),f=X(()=>{const k=h();c(k.x,k.y)},[h,c]),p=de(()=>Ia(f),[f]),g=X(()=>{const k=e.current,L=Fl(k);if(k&&L||z(),k.scrollOptions.shouldPublishImmediately){f();return}p()},[p,f]),w=X((k,L)=>{e.current&&z();const V=o.current,I=V.getDroppableRef();I||z();const v=c4(I),S={ref:I,descriptor:l,env:v,scrollOptions:L};e.current=S;const A=f4({ref:I,descriptor:l,env:v,windowScroll:k,direction:V.direction,isDropDisabled:V.isDropDisabled,isCombineEnabled:V.isCombineEnabled,shouldClipSubject:!V.ignoreContainerClipping}),b=v.closestScrollable;return b&&(b.setAttribute(J_.contextId,n.contextId),b.addEventListener("scroll",g,s0(S.scrollOptions))),A},[n.contextId,l,g,o]),C=X(()=>{const k=e.current,L=Fl(k);return k&&L||z(),Ff(L)},[]),P=X(()=>{const k=e.current;k||z();const L=Fl(k);e.current=null,L&&(p.cancel(),L.removeAttribute(J_.contextId),L.removeEventListener("scroll",g,s0(k.scrollOptions)))},[g,p]),E=X(k=>{const L=e.current;L||z();const V=Fl(L);V||z(),V.scrollTop+=k.y,V.scrollLeft+=k.x},[]),_=de(()=>({getDimensionAndWatchScroll:w,getScrollWhileDragging:C,dragStopped:P,scroll:E}),[P,w,C,E]),T=de(()=>({uniqueId:r,descriptor:l,callbacks:_}),[_,l,r]);Jt(()=>(u.current=T.descriptor,i.droppable.register(T),()=>{e.current&&P(),i.droppable.unregister(T)}),[_,l,P,T,s,i.droppable]),Jt(()=>{e.current&&s.updateDroppableIsEnabled(u.current.id,!t.isDropDisabled)},[t.isDropDisabled,s]),Jt(()=>{e.current&&s.updateDroppableIsCombineEnabled(u.current.id,t.isCombineEnabled)},[t.isCombineEnabled,s])}function uh(){}const o0={width:0,height:0,margin:SO},y4=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>t||n==="close"?o0:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},v4=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>{const r=y4({isAnimatingOpenOnMount:t,placeholder:e,animate:n});return{display:e.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Qo.placeholder:null}},_4=t=>{const e=M.useRef(null),n=X(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:s,contextId:o}=t,[l,u]=M.useState(t.animate==="open");M.useEffect(()=>l?r!=="open"?(n(),u(!1),uh):e.current?uh:(e.current=setTimeout(()=>{e.current=null,u(!1)}),n):uh,[r,l,n]);const c=X(f=>{f.propertyName==="height"&&(i(),r==="close"&&s())},[r,s,i]),h=v4({isAnimatingOpenOnMount:l,animate:t.animate,placeholder:t.placeholder});return Fe.createElement(t.placeholder.tagName,{style:h,"data-rfd-placeholder-context-id":o,onTransitionEnd:c,ref:t.innerRef})};var w4=Fe.memo(_4);class E4 extends Fe.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,n){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const I4=t=>{const e=M.useContext(Qc);e||z();const{contextId:n,isMovementAllowed:r}=e,i=M.useRef(null),s=M.useRef(null),{children:o,droppableId:l,type:u,mode:c,direction:h,ignoreContainerClipping:f,isDropDisabled:p,isCombineEnabled:g,snapshot:w,useClone:C,updateViewportMaxScroll:P,getContainerForClone:E}=t,_=X(()=>i.current,[]),T=X((b=null)=>{i.current=b},[]);X(()=>s.current,[]);const k=X((b=null)=>{s.current=b},[]),L=X(()=>{r()&&P({maxScroll:k1()})},[r,P]);g4({droppableId:l,type:u,mode:c,direction:h,isDropDisabled:p,isCombineEnabled:g,ignoreContainerClipping:f,getDroppableRef:_});const V=de(()=>Fe.createElement(E4,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:b,data:x,animate:R})=>Fe.createElement(w4,{placeholder:x,onClose:b,innerRef:k,animate:R,contextId:n,onTransitionEnd:L})),[n,L,t.placeholder,t.shouldAnimatePlaceholder,k]),I=de(()=>({innerRef:T,placeholder:V,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,V,T]),v=C?C.dragging.draggableId:null,S=de(()=>({droppableId:l,type:u,isUsingCloneFor:v}),[l,v,u]);function A(){if(!C)return null;const{dragging:b,render:x}=C,R=Fe.createElement(K1,{draggableId:b.draggableId,index:b.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(Je,Ue)=>x(Je,Ue,b));return YC.createPortal(R,E())}return Fe.createElement(Hm.Provider,{value:S},o(I,w),A())};function T4(){return document.body||z(),document.body}const a0={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:T4},J1=t=>{let e={...t},n;for(n in a0)t[n]===void 0&&(e={...e,[n]:a0[n]});return e},ch=(t,e)=>t===e.droppable.type,l0=(t,e)=>e.draggables[t.draggable.id],S4=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...t,shouldAnimatePlaceholder:!1},n=rt(s=>({draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}})),r=rt((s,o,l,u,c,h)=>{const f=c.descriptor.id;if(c.descriptor.droppableId===s){const w=h?{render:h,dragging:n(c.descriptor)}:null,C={isDraggingOver:l,draggingOverWith:l?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!1,snapshot:C,useClone:w}}if(!o)return e;if(!u)return t;const g={isDraggingOver:l,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!0,snapshot:g,useClone:null}});return(s,o)=>{const l=J1(o),u=l.droppableId,c=l.type,h=!l.isDropDisabled,f=l.renderClone;if(Pa(s)){const p=s.critical;if(!ch(c,p))return e;const g=l0(p,s.dimensions),w=Xt(s.impact)===u;return r(u,h,w,w,g,f)}if(s.phase==="DROP_ANIMATING"){const p=s.completed;if(!ch(c,p.critical))return e;const g=l0(p.critical,s.dimensions);return r(u,h,H1(p.result)===u,Xt(p.impact)===u,g,f)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){const p=s.completed;if(!ch(c,p.critical))return e;const g=Xt(p.impact)===u,w=!!(p.impact.at&&p.impact.at.type==="COMBINE"),C=p.critical.droppable.id===u;return g?w?t:e:C?t:e}return e}},A4={updateViewportMaxScroll:LV},u0=YT(S4,A4,(t,e,n)=>({...J1(n),...t,...e}),{context:zm,areStatePropsEqual:G1})(I4);let Ul,Bl,kn;const wr=t=>{if(isNaN(t)||t<0)return"00:00:00";const e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=Math.floor(t%60);return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`},C4=()=>{const t=new(window.AudioContext||window.webkitAudioContext);t.state==="suspended"&&t.resume();const e=t.createOscillator(),n=t.createGain();e.connect(n),n.connect(t.destination),e.type="sine",e.frequency.setValueAtTime(880,t.currentTime),n.gain.setValueAtTime(.5,t.currentTime),e.start(t.currentTime),e.stop(t.currentTime+.3)},R4=({activity:t,onSave:e,onClose:n})=>{const[r,i]=M.useState(t.title),s=Math.floor(t.initialDuration/3600),o=Math.floor(t.initialDuration%3600/60),l=t.initialDuration%60,[u,c]=M.useState(s),[h,f]=M.useState(o),[p,g]=M.useState(l),w=()=>{const C=parseInt(u,10)*3600+parseInt(h,10)*60+parseInt(p,10);e(t.id,{title:r,initialDuration:C,...!t.isRunning&&{duration:C}})};return N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:N.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md",children:[N.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Edit Activity"}),N.jsx("input",{className:"w-full mb-4 p-3 bg-gray-700 border-2 border-gray-600 rounded-md focus:outline-none focus:border-cyan-500 transition",placeholder:"What are you working on?",value:r,onChange:C=>i(C.target.value)}),N.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[N.jsx("input",{type:"number",value:u,onChange:C=>c(C.target.value),placeholder:"Hours",className:"p-3 bg-gray-700 border-2 border-gray-600 rounded-md focus:outline-none focus:border-cyan-500 transition",min:"0"}),N.jsx("input",{type:"number",value:h,onChange:C=>f(C.target.value),placeholder:"Minutes",className:"p-3 bg-gray-700 border-2 border-gray-600 rounded-md focus:outline-none focus:border-cyan-500 transition",min:"0",max:"59"}),N.jsx("input",{type:"number",value:p,onChange:C=>g(C.target.value),placeholder:"Seconds",className:"p-3 bg-gray-700 border-2 border-gray-600 rounded-md focus:outline-none focus:border-cyan-500 transition",min:"0",max:"59"})]}),N.jsxs("div",{className:"flex justify-end gap-3",children:[N.jsx("button",{onClick:n,className:"px-5 py-2 bg-gray-600 hover:bg-gray-500 text-white font-semibold rounded-lg transition",children:"Cancel"}),N.jsx("button",{onClick:w,className:"px-5 py-2 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg transition",children:"Save Changes"})]})]})})},P4=({activity:t,nextActivity:e,remainingTime:n,estimatedFinishTime:r,isRunning:i,onToggle:s,onReset:o,onClose:l})=>{const u=(t.initialDuration-n)/t.initialDuration,c=2*Math.PI*140,h=c*(1-u),f=!i&&n<t.initialDuration;return N.jsxs("div",{className:"fixed inset-0 bg-gray-900 flex flex-col items-center justify-center z-50 p-4",children:[N.jsx("button",{onClick:l,className:"absolute top-6 right-6 text-gray-500 hover:text-white transition",children:N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[N.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),N.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),N.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-cyan-300 mb-4 text-center",children:t.title}),N.jsxs("div",{className:"relative w-80 h-80 sm:w-96 sm:h-96 flex items-center justify-center",children:[N.jsxs("svg",{className:"absolute w-full h-full",viewBox:"0 0 300 300",children:[N.jsx("circle",{cx:"150",cy:"150",r:"140",stroke:"#374151",strokeWidth:"12",fill:"none"}),N.jsx("circle",{cx:"150",cy:"150",r:"140",stroke:"#22d3ee",strokeWidth:"12",fill:"none",strokeLinecap:"round",transform:"rotate(-90 150 150)",style:{strokeDasharray:c,strokeDashoffset:h,transition:"stroke-dashoffset 0.5s linear"}})]}),N.jsxs("div",{className:"z-10 text-center",children:[N.jsx("p",{className:"text-6xl sm:text-7xl font-mono font-bold text-white",children:wr(n)}),r&&N.jsxs("p",{className:"text-lg text-gray-400 mt-2 flex items-center justify-center gap-2",children:[N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[N.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),N.jsx("path",{d:"m12 6-0.01 6L16 14"})]}),r.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]})]}),N.jsxs("div",{className:"flex items-center gap-6 mt-8",children:[N.jsx("button",{onClick:s,className:`w-20 h-20 flex items-center justify-center rounded-full transition-transform transform hover:scale-110 ${i?"bg-yellow-500":"bg-blue-500"}`,children:i?N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"currentColor",className:"text-white",children:N.jsx("path",{d:"M8 7h3v10H8zm5 0h3v10h-3z"})}):N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"currentColor",className:"text-white ml-1",children:N.jsx("path",{d:"M7 6v12l10-6z"})})}),f&&N.jsx("button",{onClick:o,className:"w-16 h-16 flex items-center justify-center rounded-full bg-gray-700 hover:bg-gray-600 transition-transform transform hover:scale-110",children:N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-white",children:[N.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),N.jsx("path",{d:"M3 3v5h5"}),N.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),N.jsx("path",{d:"M21 21v-5h-5"})]})})]}),N.jsx("div",{className:"absolute bottom-8 text-center",children:e?N.jsxs(N.Fragment,{children:[N.jsx("p",{className:"text-gray-500 text-sm uppercase tracking-wider",children:"Up Next"}),N.jsxs("p",{className:"text-gray-300 text-lg",children:[e.title," (",wr(e.initialDuration),")"]})]}):N.jsx("p",{className:"text-gray-500 text-sm",children:"This is the last task"})})]})},b4=({onClose:t})=>N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:N.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-xl w-full max-w-md text-center",children:[N.jsx("h2",{className:"text-3xl font-bold mb-4 text-yellow-400",children:"Yay! Congrats!"}),N.jsx("p",{className:"text-lg text-gray-300 mb-6",children:"You did it. I know you could nail it, huh?"}),N.jsx("button",{onClick:t,className:"px-6 py-2 bg-cyan-500 hover:bg-cyan-600 text-gray-900 font-semibold rounded-lg transition-transform transform hover:scale-105",children:"Close"})]})});function x4(){const[t,e]=M.useState([]),[n,r]=M.useState(""),[i,s]=M.useState(""),[o,l]=M.useState(""),[u,c]=M.useState(""),[h,f]=M.useState(!1),[p,g]=M.useState(null),[w,C]=M.useState(!1),[P,E]=M.useState(!0),[_,T]=M.useState(null),[k,L]=M.useState(null),[V,I]=M.useState(null),[v,S]=M.useState(!1),[A,b]=M.useState(0),[x,R]=M.useState(!1),[Je,Ue]=M.useState("default"),$t=M.useRef(null),Ze=M.useRef(t);M.useEffect(()=>{Ze.current=t},[t]);const G=M.useRef(x);M.useEffect(()=>{G.current=x},[x]),M.useEffect(()=>{Ue(Notification.permission);const B={apiKey:"AIzaSyAQu_EiQsIvTgAMpZcYEOg1XJlx5ek0Ar8",authDomain:"my-projects-1eecb.firebaseapp.com",projectId:"my-projects-1eecb",storageBucket:"my-projects-1eecb.firebasestorage.app",messagingSenderId:"406566970928",appId:"1:406566970928:web:fb82aa1bf6dbc0f0db2ff5",measurementId:"74NH9R60XG"},Y=(typeof __firebase_config<"u"?JSON.parse(__firebase_config):null)||B;if(Y&&Y.apiKey&&!Y.apiKey.startsWith("PASTE_"))try{Ul||(Ul=NE(Y),Bl=Lx(Ul),kn=MN(Ul),Fx("debug")),C(!0)}catch(ne){console.error("Firebase initialization failed:",ne),T("Firebase configuration is invalid."),E(!1)}else T("Firebase is not configured. Please add your project keys to App.jsx."),E(!1)},[]),M.useEffect(()=>{if(!w)return;const B=Ab(Bl,async $=>{if($)g($.uid);else try{const Y=typeof __initial_auth_token<"u"?__initial_auth_token:null;Y?await Ib(Bl,Y):await yb(Bl)}catch(Y){console.error("Authentication Error:",Y),T("Could not connect to the service. Please refresh.")}});return()=>B()},[w]),M.useEffect(()=>{if(!w||!p)return;E(!0);const $=__(kn,"artifacts",typeof __app_id<"u"?__app_id:"default-time-blocker","users",p,"activities"),Y=YN($),ne=n2(Y,me=>{const we=me.docs.map(ke=>({id:ke.id,...ke.data()}));e(we);const Ie=we.find(ke=>ke.isRunning);R(!!Ie),E(!1)},me=>{console.error("Firestore Snapshot Error:",me),T("Failed to load activities. Please check your connection."),E(!1)});return()=>ne()},[w,p]);const Q=M.useCallback(B=>{if(!B||B.isCompleted)return 0;if(!B.isRunning||!B.endTime)return B.duration;const $=B.endTime.toMillis(),Y=Date.now();return Math.max(0,Math.round(($-Y)/1e3))},[]),Z=M.useCallback(async(B,$)=>{if(p)try{const ne=yr(kn,"artifacts",typeof __app_id<"u"?__app_id:"default-time-blocker","users",p,"activities",B.id);await Gi(ne,$)}catch(Y){console.error("Error updating activity status:",Y),T("Could not update the activity state.")}},[p]),he=M.useCallback(async(B,$)=>{if(!p||!B||$t.current===B.id)return;$t.current=B.id,Notification.permission==="granted"&&(new Notification("Task Complete!",{body:`You've completed: "${B.title}"`}),C4());const Y=Q(B),ne=B.initialDuration-Y,me=(B.timeSpent||0)+ne,we=[...Ze.current].filter(Wt=>!Wt.isCompleted).sort((Wt,gn)=>Wt.order-gn.order),Ie=we.findIndex(Wt=>Wt.id===B.id),ke=we[Ie+1];await Z(B,{isRunning:!1,isCompleted:!0,endTime:null,duration:0,timeSpent:me}),ke&&$?await Z(ke,{isRunning:!0,endTime:new Date(Date.now()+Q(ke)*1e3)}):(R(!1),ke||S(!0)),$t.current=null},[p,Q,Z]);M.useEffect(()=>{if(!G.current)return;const B=Ze.current.find($=>$.isRunning&&!$.isCompleted);B&&Q(B)<=0&&$t.current!==B.id&&(console.log(`Timer for "${B.title}" expired. Completing task.`),he(B,!0))},[A,Q,he]),M.useEffect(()=>{const B=setInterval(()=>{b($=>$+1)},1e3);return()=>clearInterval(B)},[]);const ue=M.useCallback(()=>{var B;if(document.visibilityState==="visible"){const $=Ze.current.find(Y=>Y.isRunning&&!Y.isCompleted);if($){const Y=(B=$.endTime)==null?void 0:B.toMillis();Y&&Date.now()>=Y&&(console.log("Catching up on missed completion..."),he($,!0))}}},[he]);M.useEffect(()=>(document.addEventListener("visibilitychange",ue),()=>{document.removeEventListener("visibilitychange",ue)}),[ue]);const ge=()=>{R(B=>!B)};M.useEffect(()=>{const B=t.filter(ne=>!ne.isCompleted).sort((ne,me)=>ne.order-me.order),$=B.find(ne=>ne.isRunning),Y=B[0];x?Y&&!Y.isRunning?($&&Z($,{isRunning:!1,duration:Q($),endTime:null}),Z(Y,{isRunning:!0,endTime:new Date(Date.now()+Q(Y)*1e3)})):Y||R(!1):$&&Z($,{isRunning:!1,duration:Q($),endTime:null})},[x,t,Q,Z]),M.useEffect(()=>{if(!V)return;const B=t.find(Y=>Y.id===V),$=t.find(Y=>Y.isRunning&&!Y.isCompleted);B&&B.isCompleted?I($?$.id:null):B||I(null)},[t,V]),M.useEffect(()=>{const B=localStorage.getItem("timeblocker_showForm");B&&f(JSON.parse(B));const $=localStorage.getItem("timeblocker_formInputs");if($){const{title:Y,hours:ne,minutes:me,seconds:we}=JSON.parse($);r(Y||""),s(ne||""),l(me||""),c(we||"")}},[]),M.useEffect(()=>{localStorage.setItem("timeblocker_showForm",JSON.stringify(h))},[h]),M.useEffect(()=>{localStorage.setItem("timeblocker_formInputs",JSON.stringify({title:n,hours:i,minutes:o,seconds:u}))},[n,i,o,u]);const Ot=async(B,$)=>{if(!p)return;const ne=yr(kn,"artifacts",typeof __app_id<"u"?__app_id:"default-time-blocker","users",p,"activities",B);try{await Gi(ne,$),L(null)}catch(me){console.error("Error updating activity: ",me),T("Could not update the activity.")}},pt=async B=>{if(!(!p||B.isCompleted))try{const Y=yr(kn,"artifacts",typeof __app_id<"u"?__app_id:"default-time-blocker","users",p,"activities",B.id);await Gi(Y,{duration:B.initialDuration,isRunning:!1,endTime:null}),R(!1)}catch($){console.error("Error resetting activity: ",$),T("Could not reset the activity.")}},Ct=async()=>{if(!n.trim()||!p)return;T(null);const B=parseInt(i,10)||0,$=parseInt(o,10)||0,Y=parseInt(u,10)||0,ne=B*3600+$*60+Y;if(ne<=0){T("Please set a duration greater than zero.");return}const me={title:n.trim(),initialDuration:ne,duration:ne,endTime:null,createdAt:i2(),isRunning:!1,isCompleted:!1,order:t.length,timeSpent:0};try{const Ie=__(kn,"artifacts",typeof __app_id<"u"?__app_id:"default-time-blocker","users",p,"activities");await t2(Ie,me),r(""),s(""),l(""),c(""),f(!1)}catch(we){console.error("Error adding activity: ",we),T("Could not save the new activity.")}},mt=async B=>{if(p)try{const Y=yr(kn,"artifacts",typeof __app_id<"u"?__app_id:"default-time-blocker","users",p,"activities",B);await e2(Y)}catch($){console.error("Error deleting activity: ",$),T("Could not delete the activity.")}},Js=B=>{const{destination:$,source:Y}=B;if(!$)return;const ne=typeof __app_id<"u"?__app_id:"default-time-blocker",me=t.filter(Ie=>!Ie.isCompleted).sort((Ie,ke)=>Ie.order-ke.order),we=t.filter(Ie=>Ie.isCompleted).sort((Ie,ke)=>Ie.order-ke.order);if(Y.droppableId===$.droppableId){const Ie=Y.droppableId==="active"?me:we,[ke]=Ie.splice(Y.index,1);Ie.splice($.index,0,ke);const Wt=Ie.map((gn,$e)=>{const Ke=yr(kn,"artifacts",ne,"users",p,"activities",gn.id);return Gi(Ke,{order:$e})});Promise.all(Wt).catch(gn=>T("Failed to reorder tasks."))}else{const[Ie]=we.splice(Y.index,1);Ie.isCompleted=!1,Ie.duration=Ie.initialDuration,me.splice($.index,0,Ie);const ke=[],Wt=yr(kn,"artifacts",ne,"users",p,"activities",Ie.id);ke.push(Gi(Wt,{isCompleted:!1,duration:Ie.initialDuration})),me.forEach((gn,$e)=>{const Ke=yr(kn,"artifacts",ne,"users",p,"activities",gn.id);ke.push(Gi(Ke,{order:$e}))}),Promise.all(ke).catch(gn=>T("Failed to reactivate task."))}},bn=M.useMemo(()=>{const B=new Map;let $=Date.now();const Y=[...t].filter(ne=>!ne.isCompleted).sort((ne,me)=>ne.isRunning&&!me.isRunning?-1:!ne.isRunning&&me.isRunning?1:ne.order-me.order);for(const ne of Y){const me=Q(ne);$+=me*1e3,B.set(ne.id,new Date($))}return B},[t,Q,A]),pn=M.useMemo(()=>t.reduce((B,$)=>B+($.timeSpent||0),0),[t]),ai=async()=>{const B=await Notification.requestPermission();Ue(B)};if(!w&&P)return N.jsx("div",{className:"bg-gray-900 text-white min-h-screen flex items-center justify-center",children:N.jsx("p",{children:"Loading Firebase..."})});const be=t.filter(B=>!B.isCompleted).sort((B,$)=>B.order-$.order),zt=t.filter(B=>B.isCompleted).sort((B,$)=>B.order-$.order),li=be.find(B=>B.isRunning),mn=V?t.find(B=>B.id===V):null;let Zs=null;if(mn){const B=be.findIndex($=>$.id===mn.id);B>-1&&B<be.length-1&&(Zs=be[B+1])}return N.jsxs("div",{className:"bg-gray-900 text-white min-h-screen font-sans p-4 sm:p-6 lg:p-8",children:[k&&N.jsx(R4,{activity:k,onSave:Ot,onClose:()=>L(null)}),mn&&N.jsx(P4,{activity:mn,nextActivity:Zs,remainingTime:Q(mn),estimatedFinishTime:bn.get(mn.id),isRunning:x,onToggle:ge,onReset:()=>pt(mn),onClose:()=>I(null)}),v&&N.jsx(b4,{onClose:()=>S(!1)}),N.jsxs("div",{className:"max-w-2xl mx-auto",children:[N.jsxs("header",{className:"text-center mb-8",children:[N.jsx("h1",{className:"text-4xl sm:text-5xl font-bold text-cyan-400",children:"TimeBlock"}),N.jsx("p",{className:"text-gray-400 mt-2",children:"Focus on what matters, one block at a time."}),p&&N.jsxs("div",{className:"mt-4 text-xs text-gray-500 bg-gray-800 rounded-full px-3 py-1 inline-block",children:["User ID: ",p]})]}),_&&N.jsxs("div",{className:"bg-red-500/20 text-red-300 p-3 rounded-lg mb-4 text-center cursor-pointer",onClick:()=>T(null),children:[_," (click to dismiss)"]}),Je==="default"&&N.jsxs("div",{className:"mb-4 p-3 bg-blue-500/20 text-blue-300 rounded-lg text-center",children:[N.jsx("p",{children:"Enable notifications to get alerts when a task is finished."}),N.jsx("button",{onClick:ai,className:"mt-2 font-bold underline",children:"Allow Notifications"})]}),N.jsxs("div",{className:"mb-6 space-y-4",children:[N.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[N.jsxs("button",{onClick:()=>f(!h),disabled:!w,className:`w-full flex items-center justify-center gap-2 text-white font-bold py-3 px-4 rounded-lg transition-transform transform hover:scale-105 shadow-lg disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed disabled:transform-none ${h?"bg-red-600 hover:bg-red-700 shadow-red-500/20":"bg-green-600 hover:bg-green-700 shadow-green-500/20"}`,children:[N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[N.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),N.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),h?"Close":"Add"]}),N.jsxs("button",{onClick:()=>li&&I(li.id),disabled:!li,className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg transition-transform transform hover:scale-105 shadow-lg shadow-indigo-500/20 disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed disabled:transform-none",children:[N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:N.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})}),"Focus"]})]}),N.jsx("button",{onClick:ge,disabled:!w||be.length===0,className:`w-full font-bold py-3 px-4 rounded-lg transition-transform transform hover:scale-105 shadow-lg ${x?"bg-yellow-500 hover:bg-yellow-600 shadow-yellow-500/20":"bg-blue-500 hover:bg-blue-600 shadow-blue-500/20"} disabled:bg-gray-600 disabled:cursor-not-allowed disabled:transform-none`,children:x?"Pause Session":"Start Session"})]}),h&&N.jsxs("div",{className:"mb-6 p-5 bg-gray-800 border border-gray-700 rounded-lg shadow-2xl",children:[N.jsx("input",{className:"w-full mb-4 p-3 bg-gray-700 border-2 border-gray-600 rounded-md focus:outline-none focus:border-cyan-500 transition",placeholder:"What are you working on?",value:n,onChange:B=>r(B.target.value)}),N.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[N.jsx("input",{type:"number",value:i,onChange:B=>s(B.target.value),placeholder:"Hours",className:"p-3 bg-gray-700 border-2 border-gray-600 rounded-md focus:outline-none focus:border-cyan-500 transition",min:"0"}),N.jsx("input",{type:"number",value:o,onChange:B=>l(B.target.value),placeholder:"Minutes",className:"p-3 bg-gray-700 border-2 border-gray-600 rounded-md focus:outline-none focus:border-cyan-500 transition",min:"0",max:"59"}),N.jsx("input",{type:"number",value:u,onChange:B=>c(B.target.value),placeholder:"Seconds",className:"p-3 bg-gray-700 border-2 border-gray-600 rounded-md focus:outline-none focus:border-cyan-500 transition",min:"0",max:"59"})]}),N.jsxs("div",{className:"flex justify-end gap-3",children:[N.jsx("button",{onClick:()=>f(!1),className:"px-5 py-2 bg-gray-600 hover:bg-gray-500 text-white font-semibold rounded-lg transition",children:"Cancel"}),N.jsx("button",{onClick:Ct,className:"px-5 py-2 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg transition",children:"Save Activity"})]})]}),P?N.jsx("div",{className:"text-center py-10 text-gray-400",children:"Loading activities..."}):N.jsx(jM,{onDragEnd:Js,children:N.jsxs("div",{children:[N.jsx(u0,{droppableId:"active",children:B=>N.jsxs("div",{className:"space-y-4",...B.droppableProps,ref:B.innerRef,children:[be.map(($,Y)=>N.jsx(r0,{draggableId:$.id,index:Y,children:(ne,me)=>N.jsxs("div",{ref:ne.innerRef,...ne.draggableProps,onClick:()=>!$.isRunning&&L($),className:`p-5 border rounded-lg shadow-lg flex items-center gap-4 transition-all duration-300 bg-gray-800 ${$.isRunning?"border-yellow-500":"border-gray-700"} ${$.isRunning?"":"hover:border-cyan-500 cursor-pointer"} ${me.isDragging?"border-cyan-400 shadow-lg":""}`,children:[N.jsxs("div",{className:"flex-grow",children:[N.jsx("h2",{className:"text-xl font-semibold text-cyan-300",children:$.title}),N.jsxs("p",{className:"text-gray-400 text-sm",children:["Initial Duration: ",wr($.initialDuration)]}),bn.get($.id)&&N.jsxs("p",{className:"text-sm text-cyan-400/80",children:["Est. Finish: ",bn.get($.id).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]}),N.jsx("p",{className:"text-2xl sm:text-3xl font-mono font-bold text-white my-2",children:wr(Q($))})]}),N.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!$.isRunning&&$.duration<$.initialDuration&&N.jsx("button",{onClick:we=>{we.stopPropagation(),pt($)},className:"p-2 bg-gray-600 hover:bg-gray-500 text-white rounded-full transition transform hover:scale-110","aria-label":"Reset timer",children:N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[N.jsx("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),N.jsx("path",{d:"M3 3v5h5"}),N.jsx("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),N.jsx("path",{d:"M21 21v-5h-5"})]})}),N.jsx("button",{onClick:we=>{we.stopPropagation(),he($,x)},className:"px-3 py-1 text-xs font-bold bg-green-600 hover:bg-green-500 text-white rounded-lg transition transform hover:scale-105","aria-label":"Mark as Done",children:"Finish"}),N.jsx("button",{onClick:we=>{we.stopPropagation(),mt($.id)},className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-full transition transform hover:scale-110","aria-label":"Delete activity",children:N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[N.jsx("polyline",{points:"3 6 5 6 21 6"}),N.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),N.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),N.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),N.jsx("div",{...ne.dragHandleProps,className:"p-2 cursor-grab touch-none",onClick:we=>we.stopPropagation(),children:N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[N.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),N.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),N.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]})},$.id)),B.placeholder]})}),zt.length>0&&N.jsxs("div",{className:"mt-8 pt-4 border-t-2 border-gray-700",children:[N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h3",{className:"text-lg font-semibold text-gray-400",children:"Completed Activities"}),pn>0&&N.jsxs("span",{className:"text-sm font-mono text-gray-500 bg-gray-800 px-2 py-1 rounded",children:["Total: ",wr(pn)]})]}),N.jsx(u0,{droppableId:"completed",children:B=>N.jsxs("div",{className:"space-y-4",...B.droppableProps,ref:B.innerRef,children:[zt.map(($,Y)=>N.jsx(r0,{draggableId:$.id,index:Y,children:(ne,me)=>N.jsxs("div",{ref:ne.innerRef,...ne.draggableProps,className:`p-5 border border-gray-700 rounded-lg shadow-lg flex items-center gap-4 transition-all duration-300 bg-gray-800/50 opacity-60 ${me.isDragging?"border-cyan-400 shadow-lg":""}`,children:[N.jsxs("div",{className:"flex-grow",children:[N.jsx("h2",{className:"text-xl font-semibold text-cyan-300",children:$.title}),N.jsxs("p",{className:"text-gray-400 text-sm",children:["Initial Duration: ",wr($.initialDuration)]}),N.jsxs("p",{className:"text-gray-400 text-sm",children:["Time Spent: ",wr($.timeSpent)]}),N.jsx("p",{className:"text-2xl sm:text-3xl font-mono font-bold text-white my-2",children:wr($.initialDuration)})]}),N.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[N.jsx("button",{onClick:we=>{we.stopPropagation(),mt($.id)},className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-full transition transform hover:scale-110","aria-label":"Delete activity",children:N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[N.jsx("polyline",{points:"3 6 5 6 21 6"}),N.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),N.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),N.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),N.jsx("div",{...ne.dragHandleProps,className:"p-2 cursor-grab touch-none",onClick:we=>we.stopPropagation(),children:N.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-500",children:[N.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),N.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),N.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]})},$.id)),B.placeholder]})})]}),be.length===0&&zt.length===0&&N.jsx("div",{className:"text-center py-10 px-4 bg-gray-800/50 rounded-lg",children:N.jsx("p",{className:"text-gray-400",children:"No activities yet. Add one to get started!"})})]})})]})]})}dh.createRoot(document.getElementById("root")).render(N.jsx(Fe.StrictMode,{children:N.jsx(x4,{})}));
